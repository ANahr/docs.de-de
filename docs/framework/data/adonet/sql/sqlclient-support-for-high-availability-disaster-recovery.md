---
title: "SqlClient-Unterstützung für hohe Verfügbarkeit, Notfallwiederherstellung"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 61e0b396-09d7-4e13-9711-7dcbcbd103a0
caps.latest.revision: "13"
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: dotnet
ms.openlocfilehash: 612f667020522d94b53c3f7e715b9a2ad1177836
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/22/2017
---
# <a name="sqlclient-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="d1b96-102">SqlClient-Unterstützung für hohe Verfügbarkeit, Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d1b96-102">SqlClient Support for High Availability, Disaster Recovery</span></span>
<span data-ttu-id="d1b96-103">In diesem Thema wird die (in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)] eingeführte) SqlClient-Unterstützung für hohe Verfügbarkeit und Notfallwiederherstellung erörtert, die in Form von AlwaysOn-Verfügbarkeitsgruppen bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d1b96-103">This topic discusses SqlClient support (added in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) for high-availability, disaster recovery -- AlwaysOn Availability Groups.</span></span>  <span data-ttu-id="d1b96-104">Die Funktion für AlwaysOn-Verfügbarkeitsgruppen wurde [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-104">AlwaysOn Availability Groups feature was added to [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012.</span></span> <span data-ttu-id="d1b96-105">Weitere Informationen über AlwaysOn Availability Gruppen finden Sie unter [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Online-Bücher.</span><span class="sxs-lookup"><span data-stu-id="d1b96-105">For more information about AlwaysOn Availability Groups, see [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="d1b96-106">Sie können jetzt den Verfügbarkeitsgruppenlistener einer Verfügbarkeitsgruppe (für hohe Verfügbarkeit und Notfallwiederherstellung) oder eine [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz in der Verbindungseigenschaft angeben.</span><span class="sxs-lookup"><span data-stu-id="d1b96-106">You can now specify the availability group listener of a (high-availability, disaster-recovery) availability group (AG) or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance in the connection property.</span></span> <span data-ttu-id="d1b96-107">Wenn eine SqlClient-Anwendung mit einer AlwaysOn-Datenbank verbunden ist, die einen Failover ausführt, ist die ursprüngliche Verbindung unterbrochen, und die Anwendung muss eine neue Verbindung öffnen, um die Arbeit nach dem Failover fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-107">If a SqlClient application is connected to an AlwaysOn database that fails over, the original connection is broken and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="d1b96-108">Wenn Sie keine Verbindung mit einem Verfügbarkeitsgruppenlistener oder einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz herstellen und mehrere IP-Adressen einem Hostnamen zugeordnet sind, durchläuft SqlClient nacheinander alle IP-Adressen, die dem DNS-Eintrag zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="d1b96-108">If you are not connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, and if multiple IP addresses are associated with a hostname, SqlClient will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="d1b96-109">Dies kann zeitaufwändig sein, wenn die erste IP-Adresse, die vom DNS-Server zurückgegeben wird, an keine Netzwerkschnittstellenkarte (NIC) gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="d1b96-109">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="d1b96-110">Beim Herstellen einer Verbindung mit einem Verfügbarkeitsgruppenlistener oder einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz versucht SqlClient, Verbindungen mit allen IP-Adressen gleichzeitig herzustellen, und wenn ein Verbindungsversuch erfolgreich war, verwirft der Treiber alle ausstehenden Verbindungsversuche.</span><span class="sxs-lookup"><span data-stu-id="d1b96-110">When connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, SqlClient attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1b96-111">Ein höheres Verbindungstimeout und das Implementieren einer Logik für die Verbindungswiederholung erhöht die Wahrscheinlichkeit, dass eine Anwendung eine Verbindung mit einer Verfügbarkeitsgruppe herstellt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-111">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="d1b96-112">Da eine Verbindung aufgrund eines Failovers fehlschlagen kann, sollte auch eine Logik für Verbindungswiederholungen implementiert werden, die bis zur erfolgreichen Verbindung Verbindungswiederholungen durchführt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-112">Also, because a connection can fail because of a failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
 <span data-ttu-id="d1b96-113">Die folgenden Verbindungseigenschaften wurden SqlClient in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)] hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="d1b96-113">The following connection properties were added to SqlClient in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="d1b96-114">Sie können diese Schlüsselwörter für Verbindungszeichenfolgen programmgesteuert ändern:</span><span class="sxs-lookup"><span data-stu-id="d1b96-114">You can programmatically modify these connection string keywords with:</span></span>  
  
1.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.ApplicationIntent%2A>  
  
2.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A>  
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="d1b96-115">Verbinden mit MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="d1b96-115">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="d1b96-116">Geben Sie immer `MultiSubnetFailover=True` an, wenn Sie eine Verbindung mit einem [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Verfügbarkeitsgruppenlistener oder einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz herstellen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-116">Always specify `MultiSubnetFailover=True` when connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="d1b96-117">`MultiSubnetFailover` ermöglicht ein schnelleres Failover für alle Verfügbarkeitsgruppen und/oder Failoverclusterinstanzen in [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 und verringert erheblich die Failoverzeit für AlwaysOn-Topologien mit einem oder mehreren Subnetzen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-117">`MultiSubnetFailover` enables faster failover for all Availability Groups and or Failover Cluster Instance in [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="d1b96-118">Während eines Multisubnetzfailovers versucht der Client parallel, Verbindungen herzustellen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-118">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="d1b96-119">Während eines Subnetzfailovers wird die Herstellung der TCP-Verbindung aggressiv neu versucht.</span><span class="sxs-lookup"><span data-stu-id="d1b96-119">During a subnet failover, will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="d1b96-120">Die `MultiSubnetFailover`-Verbindungseigenschaft gibt an, dass die Anwendung in einer Verfügbarkeitsgruppe oder [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz bereitgestellt wird und dass SqlClient versucht, eine Verbindung mit der Datenbank auf der primären [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)]-Instanz herzustellen, indem eine Verbindung mit allen IP-Adressen versucht wird.</span><span class="sxs-lookup"><span data-stu-id="d1b96-120">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance and that SqlClient will try to connect to the database on the primary [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="d1b96-121">Wenn `MultiSubnetFailover=True` für eine Verbindung angegeben wird, versucht der Client, TCP-Verbindungen schneller wiederherzustellen, als in den standardmäßigen TCP-Neuverbindungsintervallen des Betriebssystems angegeben.</span><span class="sxs-lookup"><span data-stu-id="d1b96-121">When `MultiSubnetFailover=True` is specified for a connection, the client retries TCP connection attempts faster than the operating system’s default TCP retransmit intervals.</span></span> <span data-ttu-id="d1b96-122">Dies ermöglicht die schnellere Wiederverbindung nach einem Failover einer AlwaysOn-Verfügbarkeitsgruppe oder einer AlwaysOn-Failoverclusterinstanz und ist auf Verfügbarkeitsgruppen und Failoverclusterinstanzen mit einem oder mehreren Subnetzen anwendbar.</span><span class="sxs-lookup"><span data-stu-id="d1b96-122">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="d1b96-123">Weitere Informationen über Schlüsselwörter für Verbindungszeichenfolgen in SqlClient finden Sie unter <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span><span class="sxs-lookup"><span data-stu-id="d1b96-123">For more information about connection string keywords in SqlClient, see <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="d1b96-124">Das Angeben von `MultiSubnetFailover=True` wenn eine Verbindung mit anderen Komponenten als einem Verfügbarkeitsgruppenlistener oder einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz hergestellt wird, führt zu verminderter Leistung und wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-124">Specifying `MultiSubnetFailover=True` when connecting to something other than a availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="d1b96-125">Verwenden Sie die folgenden Richtlinien, um eine Verbindung mit einem Server in einer Verfügbarkeitsgruppe oder einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012-Failoverclusterinstanz herzustellen:</span><span class="sxs-lookup"><span data-stu-id="d1b96-125">Use the following guidelines to connect to a server in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="d1b96-126">Verwenden Sie die `MultiSubnetFailover`-Verbindungseigenschaft beim Herstellen der Verbindung mit einem einzelnen oder mehreren Subnetzen. Die Leistung wird in beiden Fällen gesteigert.</span><span class="sxs-lookup"><span data-stu-id="d1b96-126">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="d1b96-127">Um eine Verbindung mit einer Verfügbarkeitsgruppe herzustellen, geben Sie den Verfügbarkeitsgruppenlistener der Verfügbarkeitsgruppe als Server in der Verbindungszeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="d1b96-127">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="d1b96-128">Die Verbindung mit einer [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)]-Instanz, die mit mehr als 64 IP-Adressen konfiguriert wurde, führt zu einem Verbindungsfehler.</span><span class="sxs-lookup"><span data-stu-id="d1b96-128">Connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="d1b96-129">Das Verhalten einer Anwendung, die die `MultiSubnetFailover`-Verbindungseigenschaft verwendet, wird je nach Art der Authentifizierung nicht beeinflusst: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)]-Authentifizierung, Kerberos-Authentifizierung oder Windows-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="d1b96-129">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="d1b96-130">Erhöhen Sie den Wert von `Connect Timeout`, um die Failoverzeit anzupassen und die Wiederholungsversuche für die Verbindung mit der Anwendung zu verringern.</span><span class="sxs-lookup"><span data-stu-id="d1b96-130">Increase the value of `Connect Timeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="d1b96-131">Verteilte Transaktionen werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-131">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="d1b96-132">Wenn das schreibgeschützte Routing nicht aktiviert ist, schlägt die Verbindung mit dem Speicherort eines sekundären Replikats in folgenden Situationen fehl:</span><span class="sxs-lookup"><span data-stu-id="d1b96-132">If read-only routing is not in effect, connecting to a secondary replica location will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="d1b96-133">Wenn der Speicherort des sekundären Replikats keine Verbindungen akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="d1b96-133">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="d1b96-134">Wenn eine Anwendung `ApplicationIntent=ReadWrite` (unten erläutert) verwendet und der Speicherort des sekundären Replikats für den schreibgeschützten Zugriff konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="d1b96-134">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="d1b96-135"><xref:System.Data.SqlClient.SqlDependency> wird für schreibgeschützte sekundäre Replikate nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-135"><xref:System.Data.SqlClient.SqlDependency> is not supported on read-only secondary replicas.</span></span>  
  
 <span data-ttu-id="d1b96-136">Ein Verbindungsfehler tritt auf, wenn ein primäres Replikat so konfiguriert ist, dass schreibgeschützte Arbeitslasten abgelehnt werden und die Verbindungszeichenfolge `ApplicationIntent=ReadOnly` enthält.</span><span class="sxs-lookup"><span data-stu-id="d1b96-136">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="d1b96-137">Upgrade von der Datenbankspiegelung auf die Verwendung von Multisubnetz-Clustern</span><span class="sxs-lookup"><span data-stu-id="d1b96-137">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="d1b96-138">Ein Verbindungsfehler (<xref:System.ArgumentException>) tritt auf, wenn die Verbindungsschlüsselwörter `MultiSubnetFailover` und `Failover Partner` in der Verbindungszeichenfolge vorhanden sind oder wenn `MultiSubnetFailover=True` und ein anderes Protokoll als TCP verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d1b96-138">A connection error (<xref:System.ArgumentException>) will occur if the `MultiSubnetFailover` and `Failover Partner` connection keywords are present in the connection string, or if `MultiSubnetFailover=True` and a protocol other than TCP is used.</span></span> <span data-ttu-id="d1b96-139">Ein Fehler (<xref:System.Data.SqlClient.SqlException>) tritt ebenfalls auf, wenn `MultiSubnetFailover` verwendet wird und [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] eine Failoverpartnerantwort zurückgibt, die angibt, das die Anwendung Teil eines Datenbankspiegelungspaares ist.</span><span class="sxs-lookup"><span data-stu-id="d1b96-139">An error (<xref:System.Data.SqlClient.SqlException>) will also occur if `MultiSubnetFailover` is used and the [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="d1b96-140">Wenn Sie eine SqlClient-Anwendung, die aktuell die Datenbankspiegelung verwendet, auf ein Multisubnetz-Szenario aktualisieren, sollten Sie die `Failover Partner`-Verbindungseigenschaft entfernen und durch `MultiSubnetFailover` = `True` ersetzen und anstelle des Servernamens in der Verbindungszeichenfolge einen Verfügbarkeitsgruppenlistener verwenden.</span><span class="sxs-lookup"><span data-stu-id="d1b96-140">If you upgrade a SqlClient application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover Partner` connection property and replace it with `MultiSubnetFailover` set to `True` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="d1b96-141">Wenn eine Verbindungszeichenfolge `Failover Partner` und `MultiSubnetFailover=True` verwendet, generiert der Treiber einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="d1b96-141">If a connection string uses `Failover Partner` and `MultiSubnetFailover=True`, the driver will generate an error.</span></span> <span data-ttu-id="d1b96-142">Wenn jedoch eine Verbindungszeichenfolge `Failover Partner` und `MultiSubnetFailover=False` (oder `ApplicationIntent=ReadWrite`) verwendet, unterliegt die Anwendung der Datenbankspiegelung.</span><span class="sxs-lookup"><span data-stu-id="d1b96-142">However, if a connection string uses `Failover Partner` and `MultiSubnetFailover=False` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="d1b96-143">Der Treiber gibt einen Fehler zurück, wenn die Datenbankspiegelung auf der primären Datenbank in der Verfügbarkeitsgruppe verwendet wird und wenn `MultiSubnetFailover=True` in der Verbindungszeichenfolge verwendet wird, wodurch eine Verbindung mit einer primären Datenbank und nicht mit einem Verfügbarkeitsgruppenlistener hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="d1b96-143">The driver will return an error if database mirroring is used on the primary database in the AG, and if `MultiSubnetFailover=True` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="d1b96-144">Angeben des Anwendungszwecks</span><span class="sxs-lookup"><span data-stu-id="d1b96-144">Specifying Application Intent</span></span>  
 <span data-ttu-id="d1b96-145">Bei `ApplicationIntent=ReadOnly` fordert der Client eine Lesearbeitslast an, wenn er eine Verbindung mit einer AlwaysOn-fähigen Datenbank herstellt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-145">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="d1b96-146">Der Server erzwingt den Zweck zur Verbindungszeit und während einer USE-Datenbankanweisung, aber nur für eine AlwaysOn-fähige Datenbank.</span><span class="sxs-lookup"><span data-stu-id="d1b96-146">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="d1b96-147">Das `ApplicationIntent`-Schlüsselwort funktioniert nicht mit schreibgeschützten Legacy-Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="d1b96-147">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="d1b96-148">Eine Datenbank kann Lesearbeitslasten für die AlwaysOn-Zieldatenbank zulassen oder ablehnen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-148">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="d1b96-149">(Dies erfolgt über die `ALLOW_CONNECTIONS`-Klausel der `PRIMARY_ROLE`-Anweisung und der `SECONDARY_ROLE`[!INCLUDE[tsql](../../../../../includes/tsql-md.md)]-Anweisung).</span><span class="sxs-lookup"><span data-stu-id="d1b96-149">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="d1b96-150">Das `ApplicationIntent`-Schlüsselwort wird verwendet, um das schreibgeschützte Routing zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="d1b96-150">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="d1b96-151">Schreibgeschütztes Routing</span><span class="sxs-lookup"><span data-stu-id="d1b96-151">Read-Only Routing</span></span>  
 <span data-ttu-id="d1b96-152">Das schreibgeschützte Routing ist eine Funktion, die die Verfügbarkeit eines schreibgeschützten Replikats einer Datenbank sicherstellt.</span><span class="sxs-lookup"><span data-stu-id="d1b96-152">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="d1b96-153">So aktivieren Sie das schreibgeschützte Routing</span><span class="sxs-lookup"><span data-stu-id="d1b96-153">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="d1b96-154">Sie müssen eine Verbindung mit dem Verfügbarkeitsgruppenlistener einer AlwaysOn-Verfügbarkeitsgruppe herstellen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-154">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="d1b96-155">Das `ApplicationIntent`-Schlüsselwort der Verbindungszeichenfolge muss auf `ReadOnly` festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="d1b96-155">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="d1b96-156">Die Verfügbarkeitsgruppe muss vom Datenbankadministrator so konfiguriert werden, dass schreibgeschütztes Routing aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="d1b96-156">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="d1b96-157">Es ist möglich, dass mehrere Verbindungen, die das schreibgeschützte Routing verwenden, nicht alle eine Verbindung mit demselben schreibgeschützten Replikat herstellen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-157">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="d1b96-158">Änderungen in der Datenbanksynchronisierung oder Änderungen an der Routingkonfiguration des Servers können dazu führen, dass Clientverbindungen mit anderen schreibgeschützten Replikaten hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d1b96-158">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="d1b96-159">Um sicherzustellen, dass alle schreibgeschützten Anforderungen an dasselbe schreibgeschützte Replikat gerichtet werden, übergeben Sie keinen Verfügbarkeitsgruppenlistener an das `Data Source`-Schlüsselwort der Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="d1b96-159">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Data Source` connection string keyword.</span></span> <span data-ttu-id="d1b96-160">Stattdessen geben Sie den Namen der schreibgeschützten Instanz an.</span><span class="sxs-lookup"><span data-stu-id="d1b96-160">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="d1b96-161">Das schreibgeschützte Routing dauert möglicherweise länger als die Verbindung mit der primären Datenbank, da zuerst eine Verbindung mit der primären Datenbank hergestellt und dann nach dem besten verfügbaren lesbaren sekundären Replikat gesucht wird.</span><span class="sxs-lookup"><span data-stu-id="d1b96-161">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="d1b96-162">Aus diesem Grund sollten Sie das Anmeldetimeout erhöhen.</span><span class="sxs-lookup"><span data-stu-id="d1b96-162">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d1b96-163">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="d1b96-163">See Also</span></span>  
 [<span data-ttu-id="d1b96-164">SQL Server Features and ADO.NET (SQL Server-Features und ADO.NET)</span><span class="sxs-lookup"><span data-stu-id="d1b96-164">SQL Server Features and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/sql-server-features-and-adonet.md)  
 [<span data-ttu-id="d1b96-165">ADO.NET Managed Provider und DataSet Developer Center</span><span class="sxs-lookup"><span data-stu-id="d1b96-165">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
