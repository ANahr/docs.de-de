---
title: Bedingtes GET und PUT
ms.date: 03/30/2017
ms.assetid: 3d22067f-57b8-4e0f-a571-a694512187ae
ms.openlocfilehash: 29819f89327128cdd71cc89eb8d14126522dc2df
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/04/2018
ms.locfileid: "43539382"
---
# <a name="conditional-get-and-put"></a><span data-ttu-id="d44bc-102">Bedingtes GET und PUT</span><span class="sxs-lookup"><span data-stu-id="d44bc-102">Conditional Get and Put</span></span>
<span data-ttu-id="d44bc-103">In diesem Beispiel wird veranschaulicht, wie die neuen bedingten Abruf- und Aktualisierungs-APIs für das WCF REST-Programmiermodell verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d44bc-103">This sample demonstrates how to use the new conditional retrieve and update APIs for the WCF REST programming model.</span></span> <span data-ttu-id="d44bc-104">Da bedingtes abrufen und aktualisieren für am besten geeignet sind ressourcenorientierte und REST-Dienste in diesem Beispiel erweitert die [grundlegenden Ressourcendiensts](../../../../docs/framework/wcf/samples/basic-resource-service.md) Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d44bc-104">Because conditional retrieve and update are most appropriate for resource-oriented and REST services, this sample extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="d44bc-105">Dieses Beispiel konzentriert sich auf das Hinzufügen von Unterstützung für bedingtes abrufen und aktualisieren Sie auf die [grundlegenden Ressourcendiensts](../../../../docs/framework/wcf/samples/basic-resource-service.md) -Beispiels mit der neuen APIs in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d44bc-105">This sample focuses on adding support for conditional retrieve and update to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample using the new APIs introduced in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="d44bc-106">Veranschaulicht</span><span class="sxs-lookup"><span data-stu-id="d44bc-106">Demonstrates</span></span>  
 <span data-ttu-id="d44bc-107">Bedingtes Abrufen und Aktualisieren</span><span class="sxs-lookup"><span data-stu-id="d44bc-107">Conditional Retrieve and Update</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="d44bc-108">Diskussion</span><span class="sxs-lookup"><span data-stu-id="d44bc-108">Discussion</span></span>  
 <span data-ttu-id="d44bc-109">Der WCF-Dienst in diesem Beispiel macht eine Auflistung der Kunden auf ressourcenorientierte und REST-Weise verfügbar.</span><span class="sxs-lookup"><span data-stu-id="d44bc-109">The WCF service in this sample exposes a collection of customers in a resource-oriented and REST manner.</span></span> <span data-ttu-id="d44bc-110">Eine detaillierte Beschreibung der dienstimplementierung, finden Sie unter den [grundlegenden Ressourcendiensts](../../../../docs/framework/wcf/samples/basic-resource-service.md) Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d44bc-110">For a detailed description of the service implementation, please see the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span>  
  
 <span data-ttu-id="d44bc-111">Dieses Beispiel fügt bedingten Abruf- und Aktualisierungsfunktionen zum die [grundlegenden Ressourcendiensts](../../../../docs/framework/wcf/samples/basic-resource-service.md) Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d44bc-111">This sample adds conditional retrieve and update capabilities to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="d44bc-112">Die bedingten Abruf- und Aktualisierungsfunktionen überprüfen mithilfe der HTTP-Entitätstags und der HTTP-Header If-None-Match und If-Match, dass Clients entweder über die aktuellste Entität für eine angegebene Ressource verfügen oder nicht.</span><span class="sxs-lookup"><span data-stu-id="d44bc-112">Conditional retrieve and update use HTTP entity tags and the HTTP If-None-Match and If-Match headers to validate that clients either have or do not have the most current entity for a given resource.</span></span> <span data-ttu-id="d44bc-113">Die Implementierung des Codes zum ordnungsgemäßen Analysieren der HTTP-Header If-None-Match und If-Match kann sich jedoch als mühsam und fehleranfällig erweisen.</span><span class="sxs-lookup"><span data-stu-id="d44bc-113">However, implementing the code to correctly parse the HTTP If-None-Match and If-Match headers can be tedious and error-prone.</span></span> <span data-ttu-id="d44bc-114">Aus diesem Grund wurden die Methoden <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> und <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> zu <xref:System.ServiceModel.Web.IncomingWebRequestContext> hinzugefügt, auf die über die aktuelle <xref:System.ServiceModel.Web.WebOperationContext>-Instanz zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="d44bc-114">Therefore, the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> and <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> methods have been added to the <xref:System.ServiceModel.Web.IncomingWebRequestContext>, which can be accessed using the current instance of the <xref:System.ServiceModel.Web.WebOperationContext>.</span></span> <span data-ttu-id="d44bc-115">Darüber hinaus wurde die `SetETag`-Methode zu <xref:System.ServiceModel.Web.OutgoingWebRequestContext> hinzugefügt, sodass es einfacher ist, gültige Entitätstags zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="d44bc-115">In addition, the `SetETag` method has been added to the <xref:System.ServiceModel.Web.OutgoingWebRequestContext>, making it easier to return valid entity tags.</span></span>  
  
 <span data-ttu-id="d44bc-116">Die <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode ist für die Verwendung mit [WebGet]-Vorgängen bestimmt.</span><span class="sxs-lookup"><span data-stu-id="d44bc-116">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method is intended to be used with [WebGet] operations.</span></span> <span data-ttu-id="d44bc-117">Das aktuelle Entitätstag wird für die angegebene Ressource als `entityTag`-Parameter verwendet. Dabei kann es sich um `string`, `int`, `long` oder `Guid` handeln.</span><span class="sxs-lookup"><span data-stu-id="d44bc-117">It takes the current entity tag for the given resource as the `entityTag` parameter, which can be a `string`, `int`, `long` or `Guid`.</span></span> <span data-ttu-id="d44bc-118">Die <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode vergleicht das Entitätstag mit dem HTTP-Header If-None-Match der Anforderung.</span><span class="sxs-lookup"><span data-stu-id="d44bc-118">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method checks the entity tag against the HTTP If-None-Match header of the request.</span></span> <span data-ttu-id="d44bc-119">Wenn das Entitätstag im HTTP-Header If-None-Match vorhanden ist, wird eine <xref:System.ServiceModel.Web.WebFaultException> mit dem Statuscode 304 (Nicht geändert) ausgelöst; andernfalls gibt die Methode einen Wert zurück.</span><span class="sxs-lookup"><span data-stu-id="d44bc-119">If the entity tag is present in the HTTP If-None-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Not Modified (304) is thrown; otherwise the method returns.</span></span> <span data-ttu-id="d44bc-120">Der bedingte Abrufmechanismus ermöglicht es dem Client, dem Server mitzuteilen, dass er über diese Entität verfügt, und dass die aktuelle Entität nur gesendet werden soll, wenn sie der Client nicht bereits hat.</span><span class="sxs-lookup"><span data-stu-id="d44bc-120">The conditional retrieve mechanism allows the client to tell the server that it has this entity and to only send the current entity if the client does not already have it.</span></span> <span data-ttu-id="d44bc-121">Beispiele für die Nutzung der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode sind in den Vorgängen `GetCustomer` und `GetCustomers` des Diensts zu finden.</span><span class="sxs-lookup"><span data-stu-id="d44bc-121">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method can be seen in the `GetCustomer` and `GetCustomers` operations of the service.</span></span> <span data-ttu-id="d44bc-122">Wichtig: Aufrufe der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode geben möglicherweise keinen Wert zurück.</span><span class="sxs-lookup"><span data-stu-id="d44bc-122">It is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> may not return.</span></span> <span data-ttu-id="d44bc-123">Entwickler sollten den Vorgang so implementieren, dass die Anforderung bereits vor dem Aufruf von <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> als erfolgreich angesehen wird, damit der Dienst eine Antwort mit erfolgreichem Statuscode senden würde, auch wenn der Aufruf von <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> nicht vorhanden wäre.</span><span class="sxs-lookup"><span data-stu-id="d44bc-123">Developers should implement the operation so that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> was not present, the service would send a response with a successful status code.</span></span>  
  
 <span data-ttu-id="d44bc-124">Die <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>-Methode ähnelt der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode.</span><span class="sxs-lookup"><span data-stu-id="d44bc-124">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method is similar to the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method.</span></span> <span data-ttu-id="d44bc-125">Sie verwendet auch das aktuelle Entitätstag für die angegebene Ressource.</span><span class="sxs-lookup"><span data-stu-id="d44bc-125">It also takes the current entity tag for the given resource.</span></span> <span data-ttu-id="d44bc-126">Es soll jedoch mit [WebInvoke]-Vorgängen verwendet werden, in dem die Methode "PUT" oder "DELETE" festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="d44bc-126">However, it is intended to be used with [WebInvoke] operations in which the method is set to "PUT" or "DELETE".</span></span> <span data-ttu-id="d44bc-127">Die <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>-Methode vergleicht das Entitätstag mit dem HTTP-Header If-Match der Anforderung.</span><span class="sxs-lookup"><span data-stu-id="d44bc-127">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method checks the entity tag against the HTTP If-Match header of the request.</span></span> <span data-ttu-id="d44bc-128">Wenn das Entitätstag im HTTP-Header If-Match nicht vorhanden ist, wird eine <xref:System.ServiceModel.Web.WebFaultException> mit dem Statuscode 412 (Vorbedingungsfehler) ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="d44bc-128">If the entity tag is not present in the HTTP If-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Precondition Failed (412) is thrown.</span></span> <span data-ttu-id="d44bc-129">Der bedingte Aktualisierungsmechanismus ermöglicht es dem Client, dem Server mitzuteilen, dass er über diese Entität für die Ressource verfügt und dass nur er die Ressource ändern kann, vorausgesetzt dass er über die aktuelle Entität verfügt.</span><span class="sxs-lookup"><span data-stu-id="d44bc-129">The conditional update mechanism allows the client to tell the server that it has this entity for the resource and to only allow the client to alter the resource; if the entity it has is current.</span></span> <span data-ttu-id="d44bc-130">Beispiele für die Nutzung der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>-Methode sind in den Vorgängen `UpdateCustomer` und `DeleteCustomer` des Diensts zu finden.</span><span class="sxs-lookup"><span data-stu-id="d44bc-130">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method can be seen in the `UpdateCustomer` and `DeleteCustomer` operations of the service.</span></span> <span data-ttu-id="d44bc-131">Wie bei der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>-Methode sollte auch hier beachtet werden, dass Aufrufe der <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A>-Methode möglicherweise keinen Wert zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="d44bc-131">Just as with <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>, it is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> may not return.</span></span> <span data-ttu-id="d44bc-132">Entwickler sollten den Vorgang so implementieren, dass die Anforderung bereits vor dem Aufruf von <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> als erfolgreich angesehen wird, damit der Dienst eine Antwort mit erfolgreichem Statuscode senden würde, auch wenn der Aufruf von <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> nicht vorhanden wäre.</span><span class="sxs-lookup"><span data-stu-id="d44bc-132">Developers should implement the operation such that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> was not present, the service would respond with a successful status code.</span></span>  
  
 <span data-ttu-id="d44bc-133">Das Beispiel umfasst einen selbst gehosteten Dienst und einen Client, der in einer Konsolenanwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d44bc-133">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="d44bc-134">Während die Konsolenanwendung ausgeführt wird, sendet der Client Anforderungen an den Dienst und schreibt die in den Antworten enthaltenen wichtigen Informationen in das Konsolenfenster.</span><span class="sxs-lookup"><span data-stu-id="d44bc-134">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="d44bc-135">So führen Sie das Beispiel aus</span><span class="sxs-lookup"><span data-stu-id="d44bc-135">To run the sample</span></span>  
  
1.  <span data-ttu-id="d44bc-136">Öffnen Sie die Projektmappe für das bedingte Get- und Put-Beispiel.</span><span class="sxs-lookup"><span data-stu-id="d44bc-136">Open the solution for the Conditional Get and Put sample.</span></span> <span data-ttu-id="d44bc-137">Sie müssen [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] als Administrator ausführen, damit das Beispiel erfolgreich ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="d44bc-137">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully.</span></span> <span data-ttu-id="d44bc-138">Zu diesem Zweck mit der rechten Maustaste die [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Symbol, und wählen **als Administrator ausführen** aus dem Kontextmenü.</span><span class="sxs-lookup"><span data-stu-id="d44bc-138">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="d44bc-139">Drücken Sie STRG+UMSCHALT+B, um die Projektmappe zu erstellen, und dann STRG+F5, um das Konsolenanwendungsprojekt auszuführen.</span><span class="sxs-lookup"><span data-stu-id="d44bc-139">Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application project.</span></span> <span data-ttu-id="d44bc-140">Wenn bei der Ausführung dieses Projekts Debuggen aktiviert ist, (durch Drücken von F5 statt STRG+F5), wird der Debugger beendet, wenn durch die bedingte GET und PUT-Überprüfung eine Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="d44bc-140">If running this project with debugging enabled (by pressing F5 instead of CTRL+F5), the debugger stops when an exception is thrown by the conditional GET and PUT checking.</span></span> <span data-ttu-id="d44bc-141">Drücken Sie in dem Fall F5, um mit der Ausführung des Beispiels fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="d44bc-141">When this happens, press F5 to continue executing the sample.</span></span>  
  
3.  <span data-ttu-id="d44bc-142">Im eingeblendeten Konsolenfenster werden der URI des ausgeführten Diensts und der URI der HTML-Hilfeseite für den ausgeführten Dienst angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d44bc-142">The console window appear sand provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
4.  <span data-ttu-id="d44bc-143">Während das Beispiel ausgeführt wird, sendet der Client Anforderungen an den Dienst und schreibt die Antworten in das Konsolenfenster.</span><span class="sxs-lookup"><span data-stu-id="d44bc-143">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span>  
  
5.  <span data-ttu-id="d44bc-144">Drücken Sie eine beliebige Taste, um das Beispiel zu beenden.</span><span class="sxs-lookup"><span data-stu-id="d44bc-144">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d44bc-145">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="d44bc-145">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d44bc-146">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="d44bc-146">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="d44bc-147">Wenn dieses Verzeichnis nicht vorhanden ist, fahren Sie mit [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF) Samples für .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) alle Windows Communication Foundation (WCF) herunterladen und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele.</span><span class="sxs-lookup"><span data-stu-id="d44bc-147">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d44bc-148">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="d44bc-148">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\ConditionalGetAndPut`
