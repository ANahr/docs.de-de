---
title: Automatische Formatauswahl
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 4fd695195f5c7c13bc088248a6b3c12388328d37
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/06/2018
ms.locfileid: "43873048"
---
# <a name="automatic-format-selection"></a><span data-ttu-id="8d722-102">Automatische Formatauswahl</span><span class="sxs-lookup"><span data-stu-id="8d722-102">Automatic Format Selection</span></span>
<span data-ttu-id="8d722-103">Dieses Beispiel veranschaulicht, wie So aktivieren Sie die automatische Formatauswahl (XML oder JSON) mit dem Windows Communication Foundation (WCF) REST-Programmiermodell, wie und wie Sie das Format im Vorgangscode explizit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="8d722-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="8d722-104">Beispieldetails</span><span class="sxs-lookup"><span data-stu-id="8d722-104">Sample Details</span></span>  
 <span data-ttu-id="8d722-105">Das Beispiel besteht aus einem Dienst und Clientcode, mit dem Anforderungen an den Dienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="8d722-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="8d722-106">Der Dienst unterstützt einen einzelnen HTTP-`GET`-Vorgang (`EchoWithGet`) und einen einzelnen HTTP-`POST`-Vorgang (`EchoWithPost`).</span><span class="sxs-lookup"><span data-stu-id="8d722-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="8d722-107">Bei beiden Vorgängen wird eine Zeichenfolge erwartet, die als Antwort wieder zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="8d722-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="8d722-108">Der Zeichenfolge wird mithilfe des `GET`-Vorgangs in einem URI-Abfragezeichenfolgenparameter bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="8d722-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="8d722-109">Der Zeichenfolge wird mit dem `POST`-Vorgang im Text der Anforderung bereitgestellt und in XML serialisiert.</span><span class="sxs-lookup"><span data-stu-id="8d722-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="8d722-110">Der Dienst kann Antworten in XML oder JSON zurückgeben. Dazu werden die neue automatische Formatauswahl und die imperativen Formatauswahlfunktionen in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] verwendet.</span><span class="sxs-lookup"><span data-stu-id="8d722-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="8d722-111">In diesem Beispiel wird die automatische Formatauswahl mit der Datei App.config aktiviert.</span><span class="sxs-lookup"><span data-stu-id="8d722-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="8d722-112">Im standardmäßigen HTTP-Webendpunkt wurde dem `automaticFormatSelectionEnabled`-Attribut der Wert `true` zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="8d722-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="8d722-113">Mit automatische Formatauswahl aktiviert ist wählt die WCF-Infrastruktur das geeignetste Antwortformat (XML oder JSON) der HTTP Accept- oder Content-Type-Header der Anforderung angegeben.</span><span class="sxs-lookup"><span data-stu-id="8d722-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="8d722-114">Der Entwickler muss keinen zusätzlichen Code und keine zusätzliche Konfiguration bereitstellen, sondern nur das `automaticFormatSelectionEnabled`-Attribut auf `true` festlegen, um diese neue Funktion zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8d722-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="8d722-115">In den Client-Code in "Program.cs" Anforderungen gesendet werden sowohl die `GET` und `POST` Vorgänge des Diensts mit dem HTTP-Accept-Header, die als "Application/Xml" oder "Application/Json" angegeben und der Dienst gibt eine Antwort zurück, in diesem entsprechenden Format.</span><span class="sxs-lookup"><span data-stu-id="8d722-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="8d722-116">Beim `GET`-Vorgang wird außerdem die imperative Formatauswahl verwendet.</span><span class="sxs-lookup"><span data-stu-id="8d722-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="8d722-117">Der `GET`-Vorgang überprüft, ob es einen optionalen `format`-Abfragezeichenfolgenparameter gibt und legt das Antwortformat für die <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A>-Eigenschaft fest, falls ein entsprechender Parameter vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="8d722-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="8d722-118">Imperativ das Format der Antwort auf diese Weise festlegen, überschreibt die automatische Formatauswahl erreicht, indem die WCF-Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="8d722-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="8d722-119">Das Beispiel umfasst einen selbst gehosteten Dienst und einen Client, der in einer Konsolenanwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8d722-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="8d722-120">Während die Konsolenanwendung ausgeführt wird, sendet der Client Anforderungen an den Dienst und schreibt die in den Antworten enthaltenen wichtigen Informationen in das Konsolenfenster.</span><span class="sxs-lookup"><span data-stu-id="8d722-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="8d722-121">So verwenden Sie dieses Beispiel</span><span class="sxs-lookup"><span data-stu-id="8d722-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="8d722-122">Öffnen Sie die Projektmappe für das Beispiel zur automatischen Formatauswahl.</span><span class="sxs-lookup"><span data-stu-id="8d722-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="8d722-123">Sie müssen [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] als Administrator ausführen, damit das Beispiel erfolgreich ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="8d722-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="8d722-124">Zu diesem Zweck mit der rechten Maustaste die [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Symbol, und wählen **als Administrator ausführen** aus dem Kontextmenü.</span><span class="sxs-lookup"><span data-stu-id="8d722-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="8d722-125">Drücken Sie STRG+UMSCHALT+B, um die Projektmappe zu erstellen, und dann STRG+F5, um das Projekt AutomaticFormatSelection der Konsolenanwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="8d722-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="8d722-126">Im eingeblendeten Konsolenfenster werden der URI des ausgeführten Diensts und der URI der HTML-Hilfeseite für den ausgeführten Dienst angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8d722-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="8d722-127">Während das Beispiel ausgeführt wird, sendet der Client Anforderungen an den Dienst und schreibt die Antworten in das Konsolenfenster.</span><span class="sxs-lookup"><span data-stu-id="8d722-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="8d722-128">Beachten Sie die anderen Formate der Antworten in XML und JSON.</span><span class="sxs-lookup"><span data-stu-id="8d722-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="8d722-129">Drücken Sie eine beliebige Taste, um das Beispiel zu beenden.</span><span class="sxs-lookup"><span data-stu-id="8d722-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8d722-130">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="8d722-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="8d722-131">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="8d722-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="8d722-132">Wenn dieses Verzeichnis nicht vorhanden ist, fahren Sie mit [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF) Samples für .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) alle Windows Communication Foundation (WCF) herunterladen und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele.</span><span class="sxs-lookup"><span data-stu-id="8d722-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="8d722-133">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="8d722-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="8d722-134">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="8d722-134">See Also</span></span>
