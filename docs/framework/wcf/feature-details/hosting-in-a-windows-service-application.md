---
title: Hosten in einer Windows-Dienstanwendung
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: e440961055ccd40bf56b4b88ea73d167f1903245
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33492231"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="e00f7-102">Hosten in einer Windows-Dienstanwendung</span><span class="sxs-lookup"><span data-stu-id="e00f7-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="e00f7-103">Windows-Dienste (früher Windows NT-Dienste) bieten ein Prozessmodell, das besonders für Anwendungen geeignet ist, die sich in ausführbaren Dateien mit langer Laufzeit befinden müssen und keinerlei Benutzeroberfläche anzeigen.</span><span class="sxs-lookup"><span data-stu-id="e00f7-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="e00f7-104">Die Prozesslebensdauer einer Windows-Dienstanwendung wird vom Dienststeuerungs-Manager (Service Control Manager, SCM) verwaltet, mit dem Sie Windows-Dienstanwendungen starten, beenden und anhalten können.</span><span class="sxs-lookup"><span data-stu-id="e00f7-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="e00f7-105">Sie können ein Windows-Dienstprozess für den automatischen start beim Starten des Computers somit eine angemessene Hostingumgebung für "immer aktiviert" Anwendungen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e00f7-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="e00f7-106">Weitere Informationen zu Windows-dienstanwendungen, finden Sie unter [Windows-Dienstanwendungen](http://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="e00f7-106">For more information about Windows service applications, see [Windows Service Applications](http://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="e00f7-107">Anwendungen, die lang andauernde Windows Communication Foundation (WCF)-Dienste hosten haben viele gemeinsamkeiten mit Windows-Dienste.</span><span class="sxs-lookup"><span data-stu-id="e00f7-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="e00f7-108">WCF-Dienste sind insbesondere Serverdateien mit langer, die interagieren nicht direkt mit dem Benutzer und daher keinerlei Benutzeroberfläche nicht implementiert.</span><span class="sxs-lookup"><span data-stu-id="e00f7-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="e00f7-109">Daher ist das Hosten von WCF-Diensten innerhalb einer Windows-dienstanwendung eine Option zum Erstellen robuster und lang andauernde, WCF-Clientanwendungen.</span><span class="sxs-lookup"><span data-stu-id="e00f7-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="e00f7-110">Häufig müssen erfahrenen Entwicklern von WCF entscheiden, ob ihre WCF-Anwendung in einer Windows-dienstanwendung oder in der hostumgebung (Internet Information Services, IIS) oder Windows Process Activation Service (WAS) hosten.</span><span class="sxs-lookup"><span data-stu-id="e00f7-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="e00f7-111">Unter folgenden Bedingungen sollen Sie die Verwendung von Windows-Dienstanwendungen in Erwägung ziehen:</span><span class="sxs-lookup"><span data-stu-id="e00f7-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="e00f7-112">Die Anwendung erfordert explizite Aktivierung.</span><span class="sxs-lookup"><span data-stu-id="e00f7-112">Your application requires explicit activation.</span></span> <span data-ttu-id="e00f7-113">Beispielsweise sollten Sie Windows-Dienste verwenden, wenn die Anwendung automatisch beim Serverstart gestartet werden soll, statt dynamisch als Antwort auf die erste eingehende Nachricht.</span><span class="sxs-lookup"><span data-stu-id="e00f7-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="e00f7-114">Der Prozess, der die Anwendung hostet, muss nach dem Start weiterhin ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e00f7-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="e00f7-115">Nach dem Start wird ein Windows-Dienstprozess solange ausgeführt, bis er explizit von einem Serveradministrator über den Dienststeuerungs-Manager beendet wird.</span><span class="sxs-lookup"><span data-stu-id="e00f7-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="e00f7-116">In IIS oder WAS gehostete Anwendungen können dynamisch gestartet und beendet werden, um die Systemressourcen optimal zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="e00f7-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="e00f7-117">Anwendungen, die explizite Steuerung während der gesamten Lebensdauer ihres Hostingprozesses erfordern, sollten Windows-Dienste anstelle von IIS oder WAS verwenden.</span><span class="sxs-lookup"><span data-stu-id="e00f7-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="e00f7-118">Der WCF-Dienst muss unter Windows Server 2003 ausführen und andere Transportoptionen als HTTP verwenden.</span><span class="sxs-lookup"><span data-stu-id="e00f7-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="e00f7-119">Auf Windows&#160;Server&#160;2003 ist die [!INCLUDE[iis601](../../../../includes/iis601-md.md)]-Hostumgebung auf HTTP-Kommunikation beschränkt.</span><span class="sxs-lookup"><span data-stu-id="e00f7-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="e00f7-120">Windows-dienstanwendungen fallen nicht unter diese Beschränkung und können Transport WCF unterstützt werden, darunter net.tcp, net.pipe und net.msmq.</span><span class="sxs-lookup"><span data-stu-id="e00f7-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="e00f7-121">So hosten Sie WCF innerhalb einer Windows-Dienstanwendung</span><span class="sxs-lookup"><span data-stu-id="e00f7-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="e00f7-122">Erstellen Sie eine Windows-Dienstanwendung.</span><span class="sxs-lookup"><span data-stu-id="e00f7-122">Create a Windows service application.</span></span> <span data-ttu-id="e00f7-123">Mit den Klassen im <xref:System.ServiceProcess>-Namespace können Sie Windows-Dienstanwendungen in verwaltetem Code schreiben.</span><span class="sxs-lookup"><span data-stu-id="e00f7-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="e00f7-124">Diese Anwendung muss eine Klasse einschließen, die von <xref:System.ServiceProcess.ServiceBase> erbt.</span><span class="sxs-lookup"><span data-stu-id="e00f7-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="e00f7-125">Verknüpfen Sie die Lebensdauer der WCF-Dienste, von der Lebensdauer der Windows-dienstanwendung.</span><span class="sxs-lookup"><span data-stu-id="e00f7-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="e00f7-126">In der Regel möchten Sie die WCF-Diensten in einer Windows-dienstanwendung werden aktiviert, beim Starten des Hostingdienst, Beenden der Überwachung für Nachrichten beim hosting-Dienst beendet, und der Hostprozess heruntergefahren wird, wenn der WCF-Dienst ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="e00f7-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="e00f7-127">Dies kann folgendermaßen erfüllt werden:</span><span class="sxs-lookup"><span data-stu-id="e00f7-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="e00f7-128">Überschreiben Sie <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>, um eine oder mehrere Instanzen von <xref:System.ServiceModel.ServiceHost> zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="e00f7-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="e00f7-129">Eine einzelne Windows-dienstanwendung kann mehrere WCF-Dienste hosten, die starten und beenden, die als Gruppe.</span><span class="sxs-lookup"><span data-stu-id="e00f7-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="e00f7-130">Überschreiben Sie <xref:System.ServiceProcess.ServiceBase.OnStop%2A> Aufrufen <xref:System.ServiceModel.Channels.CommunicationObject.Closed> auf die <xref:System.ServiceModel.ServiceHost> alle ausgeführten WCF-Dienste, die während der gestartet wurden <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="e00f7-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="e00f7-131">Abonnieren Sie das <xref:System.ServiceModel.Channels.CommunicationObject.Faulted>-Ereignis von <xref:System.ServiceModel.ServiceHost>, und verwenden Sie die <xref:System.ServiceProcess.ServiceController>-Klasse, um die Windows-Dienstanwendung im Fehlerfall zu beenden.</span><span class="sxs-lookup"><span data-stu-id="e00f7-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="e00f7-132">Windows-dienstanwendungen, die WCF-Dienste gehostet werden bereitgestellt und auf die gleiche Weise verwaltet werden, da Windows-dienstanwendungen, die nicht vornehmen von WCF verwenden.</span><span class="sxs-lookup"><span data-stu-id="e00f7-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e00f7-133">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="e00f7-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="e00f7-134">Exemplarische Vorgehensweise: Erstellen einer Windows-Dienstanwendung im Komponenten-Designer</span><span class="sxs-lookup"><span data-stu-id="e00f7-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](http://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="e00f7-135">Vorgehensweise: Hosten eines WCF-Diensts in einem verwalteten Windows-Dienst</span><span class="sxs-lookup"><span data-stu-id="e00f7-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="e00f7-136">Windows-Diensthost</span><span class="sxs-lookup"><span data-stu-id="e00f7-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="e00f7-137">Programmierarchitektur für Dienstanwendungen</span><span class="sxs-lookup"><span data-stu-id="e00f7-137">Service Application Programming Architecture</span></span>](http://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="e00f7-138">Windows Server AppFabric-Hostingfunktionen</span><span class="sxs-lookup"><span data-stu-id="e00f7-138">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
