---
title: Hosten in einer Windows-Dienstanwendung
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
caps.latest.revision: "12"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 1f411e0280a1f663e5e001e471eb836208083160
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/02/2017
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="ddaa9-102">Hosten in einer Windows-Dienstanwendung</span><span class="sxs-lookup"><span data-stu-id="ddaa9-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="ddaa9-103">Windows-Dienste (früher Windows NT-Dienste) bieten ein Prozessmodell, das besonders für Anwendungen geeignet ist, die sich in ausführbaren Dateien mit langer Laufzeit befinden müssen und keinerlei Benutzeroberfläche anzeigen.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="ddaa9-104">Die Prozesslebensdauer einer Windows-Dienstanwendung wird vom Dienststeuerungs-Manager (Service Control Manager, SCM) verwaltet, mit dem Sie Windows-Dienstanwendungen starten, beenden und anhalten können.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="ddaa9-105">Sie können ein Windows-Dienstprozess für den automatischen start beim Starten des Computers somit eine angemessene Hostingumgebung für "immer aktiviert" Anwendungen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="ddaa9-106">Windows-dienstanwendungen finden Sie unter [Windows-Dienstanwendungen](http://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="ddaa9-106"> Windows service applications, see [Windows Service Applications](http://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="ddaa9-107">Anwendungen, die [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]-Dienste mit langer Laufzeit hosten, haben viele Gemeinsamkeiten mit Windows-Diensten.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-107">Applications that host long-running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services share many characteristics with Windows services.</span></span> <span data-ttu-id="ddaa9-108">Dies gilt insbesondere für [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienste, die ausführbare Serverdateien mit langer Laufzeit sind, nicht direkt mit dem Benutzer interagieren und deswegen keinerlei Benutzeroberfläche implementieren.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-108">In particular, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="ddaa9-109">Damit ist das Hosten von [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Diensten innerhalb einer Windows-Dienstanwendung eine gute Möglichkeit für die Erstellung robuster [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Anwendungen mit langer Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-109">As such, hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services inside of a Windows service application is one option for building robust, long-running, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
 <span data-ttu-id="ddaa9-110">Oft müssen sich [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Entwickler entscheiden, ob sie ihre [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Anwendung in einer Windows-Dienstanwendung oder in der Hostingumgebung von Internetinformationsdiensten (IIS) oder Windows Process Activation Service (WAS) hosten sollen.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-110">Often, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] developers must decide whether to host their [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="ddaa9-111">Unter folgenden Bedingungen sollen Sie die Verwendung von Windows-Dienstanwendungen in Erwägung ziehen:</span><span class="sxs-lookup"><span data-stu-id="ddaa9-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="ddaa9-112">Die Anwendung erfordert explizite Aktivierung.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-112">Your application requires explicit activation.</span></span> <span data-ttu-id="ddaa9-113">Beispielsweise sollten Sie Windows-Dienste verwenden, wenn die Anwendung automatisch beim Serverstart gestartet werden soll, statt dynamisch als Antwort auf die erste eingehende Nachricht.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="ddaa9-114">Der Prozess, der die Anwendung hostet, muss nach dem Start weiterhin ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="ddaa9-115">Nach dem Start wird ein Windows-Dienstprozess solange ausgeführt, bis er explizit von einem Serveradministrator über den Dienststeuerungs-Manager beendet wird.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="ddaa9-116">In IIS oder WAS gehostete Anwendungen können dynamisch gestartet und beendet werden, um die Systemressourcen optimal zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="ddaa9-117">Anwendungen, die explizite Steuerung während der gesamten Lebensdauer ihres Hostingprozesses erfordern, sollten Windows-Dienste anstelle von IIS oder WAS verwenden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="ddaa9-118">Der [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienst muss auf Windows&#160;Server&#160;2003 ausgeführt werden und andere Transportoptionen als HTTP verwenden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-118">Your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="ddaa9-119">Auf Windows&#160;Server&#160;2003 ist die [!INCLUDE[iis601](../../../../includes/iis601-md.md)]-Hostumgebung auf HTTP-Kommunikation beschränkt.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="ddaa9-120">Windows-Dienstanwendungen fallen nicht unter diese Beschränkung und können jede von [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] unterstützte Transportart verwenden, darunter net.tcp, net.pipe und net.msmq.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-120">Windows service applications are not subject to this restriction and can use any transport [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="ddaa9-121">So hosten Sie WCF innerhalb einer Windows-Dienstanwendung</span><span class="sxs-lookup"><span data-stu-id="ddaa9-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="ddaa9-122">Erstellen Sie eine Windows-Dienstanwendung.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-122">Create a Windows service application.</span></span> <span data-ttu-id="ddaa9-123">Mit den Klassen im <xref:System.ServiceProcess>-Namespace können Sie Windows-Dienstanwendungen in verwaltetem Code schreiben.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="ddaa9-124">Diese Anwendung muss eine Klasse einschließen, die von <xref:System.ServiceProcess.ServiceBase> erbt.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="ddaa9-125">Verknüpfen Sie die Lebensdauer des [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Diensts mit der Lebensdauer der Windows-Dienstanwendung.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-125">Link the lifetime of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="ddaa9-126">In der Regel möchten Sie, dass in einer Windows-Dienstanwendung gehostete [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienste beim Starten des Hostingdienst aktiviert werden, beim Beenden des Hostingdiensts mit dem Warten auf Nachrichten aufhören und den Hostingprozess beenden, wenn der [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienst einen Fehler erkennt.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-126">Typically, you want [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service encounters an error.</span></span> <span data-ttu-id="ddaa9-127">Dies kann folgendermaßen erfüllt werden:</span><span class="sxs-lookup"><span data-stu-id="ddaa9-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="ddaa9-128">Überschreiben Sie <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>, um eine oder mehrere Instanzen von <xref:System.ServiceModel.ServiceHost> zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="ddaa9-129">Eine einzelne Windows-Dienstanwendung kann mehrere [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienste hosten, die als Gruppe gestartet und beendet werden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-129">A single Windows service application can host multiple [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="ddaa9-130">Überschreiben Sie <xref:System.ServiceProcess.ServiceBase.OnStop%2A> um <xref:System.ServiceModel.Channels.CommunicationObject.Closed> auf dem <xref:System.ServiceModel.ServiceHost> aller ausgeführten [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienste aufzurufen, die während <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> gestartet wurden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="ddaa9-131">Abonnieren Sie das <xref:System.ServiceModel.Channels.CommunicationObject.Faulted>-Ereignis von <xref:System.ServiceModel.ServiceHost>, und verwenden Sie die <xref:System.ServiceProcess.ServiceController>-Klasse, um die Windows-Dienstanwendung im Fehlerfall zu beenden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="ddaa9-132">Windows-Dienstanwendungen, die [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Dienste hosten, werden auf die gleiche Weise bereitgestellt und verwaltet wie Windows-Dienstanwendungen, die [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] nicht verwenden.</span><span class="sxs-lookup"><span data-stu-id="ddaa9-132">Windows service applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are deployed and managed in the same way as Windows service applications that do not make use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ddaa9-133">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="ddaa9-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="ddaa9-134">Exemplarische Vorgehensweise: Erstellen einer Windows-Dienstanwendung im Komponenten-Designer</span><span class="sxs-lookup"><span data-stu-id="ddaa9-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](http://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="ddaa9-135">Vorgehensweise: Hosten eines WCF-Diensts in einem verwalteten Windows-Dienst</span><span class="sxs-lookup"><span data-stu-id="ddaa9-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="ddaa9-136">Windows-Diensthost</span><span class="sxs-lookup"><span data-stu-id="ddaa9-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="ddaa9-137">Programmierarchitektur für Dienstanwendungen</span><span class="sxs-lookup"><span data-stu-id="ddaa9-137">Service Application Programming Architecture</span></span>](http://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="ddaa9-138">Windows Server AppFabric-Hostingfunktionen</span><span class="sxs-lookup"><span data-stu-id="ddaa9-138">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
