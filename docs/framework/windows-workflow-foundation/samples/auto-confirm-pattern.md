---
title: Muster der automatischen Bestätigung
ms.date: 03/30/2017
ms.assetid: 668aec65-78d3-4636-9c7b-deed643a18f9
ms.openlocfilehash: a032c05743b64fe58b0b187328b5216080ba6e19
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/06/2018
ms.locfileid: "43864054"
---
# <a name="auto-confirm-pattern"></a><span data-ttu-id="5579a-102">Muster der automatischen Bestätigung</span><span class="sxs-lookup"><span data-stu-id="5579a-102">Auto-Confirm Pattern</span></span>
<span data-ttu-id="5579a-103">Dieses Beispiel besteht aus drei Szenarien, die zur Veranschaulichung eine benutzerdefinierte `AutoConfirmScope`-Aktivität ausführen.</span><span class="sxs-lookup"><span data-stu-id="5579a-103">This sample consists of three scenarios that run illustrating a custom `AutoConfirmScope` activity.</span></span> <span data-ttu-id="5579a-104">Im ersten Beispiel wird die erfolgreiche Ausführung einer Sequenz von vier kompensierbaren Aktivitäten veranschaulicht, bei denen die zweite und dritte in `AutoConfirmScope` geschachtelt sind.</span><span class="sxs-lookup"><span data-stu-id="5579a-104">The first sample shows the successful execution of a sequence of four compensable activities where the second and third are nested in an `AutoConfirmScope`.</span></span> <span data-ttu-id="5579a-105">Im zweiten Beispiel wird die gleiche Sequenz mit einer Ausnahme veranschaulicht, die nach der Ausführung der vierten <xref:System.Activities.Statements.CompensableActivity> auftritt.</span><span class="sxs-lookup"><span data-stu-id="5579a-105">The second sample shows the same sequence with an exception occurring after the execution of the fourth <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="5579a-106">Das dritte Szenario zeigt die gleiche Sequenz mit einer Ausnahme, die in `AutoConfirmScope` auftritt, nachdem die zweite <xref:System.Activities.Statements.CompensableActivity> abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="5579a-106">The third scenario shows the same sequence with an exception occurring in the `AutoConfirmScope` after the second <xref:System.Activities.Statements.CompensableActivity> completes.</span></span>  
  
 <span data-ttu-id="5579a-107">Im Beispiel wird das Muster der automatischen Bestätigung veranschaulicht, bei dem alle untergeordneten kompensierbaren Aktivitäten nach dem erfolgreichen Abschluss des Bereichs bestätigt werden.</span><span class="sxs-lookup"><span data-stu-id="5579a-107">The sample demonstrates the auto-confirm pattern where all child compensable activities are confirmed upon successful completion of the scope.</span></span> <span data-ttu-id="5579a-108">Dieses Muster definiert die Lebensdauer aller untergeordneten kompensierbaren Aktivitäten, da sie nicht mehr kompensiert oder bestätigt werden können.</span><span class="sxs-lookup"><span data-stu-id="5579a-108">This pattern defines the lifetime of all child compensable activities, as they can no longer be compensated or confirmed.</span></span>  
  
 <span data-ttu-id="5579a-109">Der Bereich besteht aus <xref:System.Activities.Statements.TryCatch>, wobei <xref:System.Activities.Statements.TryCatch.Try%2A> eine interne <xref:System.Activities.Statements.CompensableActivity> ist.</span><span class="sxs-lookup"><span data-stu-id="5579a-109">The scope consists of a <xref:System.Activities.Statements.TryCatch> where the <xref:System.Activities.Statements.TryCatch.Try%2A> is an internal <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="5579a-110">Der vom Benutzer angegebene Text von `AutoConfirmScope` ist der Text der inneren <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="5579a-110">The user-specified body of the `AutoConfirmScope` is the body of the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="5579a-111">Wenn diese interne <xref:System.Activities.Statements.CompensableActivity> abgeschlossen ist, erzeugt sie <xref:System.Activities.Statements.CompensationToken> als out-Argument.</span><span class="sxs-lookup"><span data-stu-id="5579a-111">When this internal <xref:System.Activities.Statements.CompensableActivity> completes, it produces a <xref:System.Activities.Statements.CompensationToken> as an out-argument.</span></span> <span data-ttu-id="5579a-112">`AutoConfirmScope` verwendet <xref:System.Activities.Statements.TryCatch.Finally%2A>, um zu überprüfen, ob das Token erzeugt wurde. Ist dies der Fall, wird die innere <xref:System.Activities.Statements.CompensableActivity> bestätigt.</span><span class="sxs-lookup"><span data-stu-id="5579a-112">The `AutoConfirmScope` uses a <xref:System.Activities.Statements.TryCatch.Finally%2A> to check whether the token has been produced and if it has then it confirms the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="5579a-113">Die innere <xref:System.Activities.Statements.CompensableActivity> ruft die Standardkompensierung für kompensierbare Aktivitäten auf, die möglicherweise im Text vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="5579a-113">The inner <xref:System.Activities.Statements.CompensableActivity> invokes the default compensation for any compensable activities that may exist in its body.</span></span>  
  
 <span data-ttu-id="5579a-114">Das erste Szenario zeigt die erfolgreiche Ausführung des Workflows und veranschaulicht, dass die zweite und dritte kompensierbare Aktivität bereits bestätigt sind, wenn der Workflow abgeschlossen wird, und die erste und vierte werden bestätigt.</span><span class="sxs-lookup"><span data-stu-id="5579a-114">The first scenario shows successful execution of the workflow and demonstrates that the second and third compensable activities are already confirmed when the workflow completes and the first and fourth are confirmed.</span></span> <span data-ttu-id="5579a-115">Dies erzeugt die Bestätigungsreihenfolge drei, zwei, vier und eins.</span><span class="sxs-lookup"><span data-stu-id="5579a-115">This produces a confirmation order of three, two, four, and one.</span></span>  
  
 <span data-ttu-id="5579a-116">Das zweite Szenario zeigt eine Ausnahme, nachdem die vier kompensierbaren Aktivitäten abgeschlossen wurden.</span><span class="sxs-lookup"><span data-stu-id="5579a-116">The second scenario shows an exception after the four compensable activities have completed.</span></span> <span data-ttu-id="5579a-117">Da die kompensierbaren Aktivitäten zwei und drei bereits bestätigt wurden, bleiben sie unbeeinflusst, aber eins und vier werden kompensiert.</span><span class="sxs-lookup"><span data-stu-id="5579a-117">Because compensable activities two and three are already confirmed they are unaffected but one and four are compensated.</span></span> <span data-ttu-id="5579a-118">Dies erzeugt die Bestätigung von drei und zwei und die Kompensierung von vier und eins.</span><span class="sxs-lookup"><span data-stu-id="5579a-118">This produces confirm three, confirm two, compensate four and compensate one.</span></span>  
  
 <span data-ttu-id="5579a-119">Das abschließende Szenario zeigt die fehlgeschlagene Ausführung von `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="5579a-119">The final scenario shows unsuccessful execution of the `AutoConfirmScope`.</span></span> <span data-ttu-id="5579a-120">In diesem Szenario tritt eine Ausnahme nach Abschluss der zweiten <xref:System.Activities.Statements.CompensableActivity> auf.</span><span class="sxs-lookup"><span data-stu-id="5579a-120">In this scenario, an exception occurs after the completion of the second <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="5579a-121">Da die dritte und vierte kompensierbare Aktivität nicht ausgeführt wurden, bleiben sie unbeeinflusst.</span><span class="sxs-lookup"><span data-stu-id="5579a-121">Because the third and fourth compensable activities have not executed, they are unaffected.</span></span> <span data-ttu-id="5579a-122">Da der Bereich nicht erfolgreich abgeschlossen wurde, wird die zweite <xref:System.Activities.Statements.CompensableActivity> nicht bestätigt.</span><span class="sxs-lookup"><span data-stu-id="5579a-122">Because the scope did not complete successfully, the second <xref:System.Activities.Statements.CompensableActivity> does not get confirmed.</span></span> <span data-ttu-id="5579a-123">Dies erzeugt die Kompensierungsreihenfolge zwei dann eins.</span><span class="sxs-lookup"><span data-stu-id="5579a-123">This produces and compensation order of two then one.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="5579a-124">So verwenden Sie dieses Beispiel</span><span class="sxs-lookup"><span data-stu-id="5579a-124">To use this sample</span></span>  
  
1.  <span data-ttu-id="5579a-125">Öffnen Sie mit [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] die Projektmappendatei "AutoConfirmSample.sln".</span><span class="sxs-lookup"><span data-stu-id="5579a-125">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the AutoConfirmSample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="5579a-126">Drücken Sie STRG+UMSCHALT+B, um die Projektmappe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5579a-126">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="5579a-127">Drücken Sie STRG+F5, um die Projektmappe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="5579a-127">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="5579a-128">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="5579a-128">The samples may already be installed on your machine.</span></span> <span data-ttu-id="5579a-129">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="5579a-129">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="5579a-130">Wenn dieses Verzeichnis nicht vorhanden ist, fahren Sie mit [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF) Samples für .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) alle Windows Communication Foundation (WCF) herunterladen und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele.</span><span class="sxs-lookup"><span data-stu-id="5579a-130">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="5579a-131">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="5579a-131">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\Compensation\AutoConfirm`