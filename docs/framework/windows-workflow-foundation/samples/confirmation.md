---
title: Bestätigung
ms.date: 03/30/2017
ms.assetid: 8637aeaf-ac9e-49b8-93f4-da15dee45277
ms.openlocfilehash: caa712aa52da01ce44335a361fd6c9f5215316bf
ms.sourcegitcommit: ba5c189bf44d44204a3e8838e59ec378a62d82f3
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 09/13/2018
ms.locfileid: "44757236"
---
# <a name="confirmation"></a><span data-ttu-id="98595-102">Bestätigung</span><span class="sxs-lookup"><span data-stu-id="98595-102">Confirmation</span></span>
<span data-ttu-id="98595-103">In diesem Beispiel werden vier allgemeine Szenarien im Zusammenhang mit der Verwendung von <xref:System.Activities.Statements.CompensableActivity> und der Bestätigung veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="98595-103">This sample shows four common scenarios surrounding the use of <xref:System.Activities.Statements.CompensableActivity> and confirmation.</span></span> <span data-ttu-id="98595-104">Im Beispiel werden vier Workflows ausgeführt, um die Bestätigung zu veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="98595-104">The sample runs four workflows to show confirmation.</span></span> <span data-ttu-id="98595-105">Dieses Beispiel ist in deklarativen und imperativen Versionen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="98595-105">This sample is available in declarative and imperative versions.</span></span>  
  
## <a name="confirm-a-compensable-activity"></a><span data-ttu-id="98595-106">Bestätigen einer kompensierbaren Aktivität</span><span class="sxs-lookup"><span data-stu-id="98595-106">Confirm a Compensable Activity</span></span>  
 <span data-ttu-id="98595-107">Der erste Workflow veranschaulicht, wie eine kompensierbare Aktivität bestätigt wird, und besteht aus einer Sequenz von zwei <xref:System.Activities.Statements.CompensableActivity>-Instanzen.</span><span class="sxs-lookup"><span data-stu-id="98595-107">The first workflow demonstrates how to confirm a compensable activity and consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> instances.</span></span> <span data-ttu-id="98595-108">Nach Abschluss der zweiten <xref:System.Activities.Statements.CompensableActivity> bestätigt eine Confirm-Aktivität die erste Aktivität.</span><span class="sxs-lookup"><span data-stu-id="98595-108">After the completion of the second <xref:System.Activities.Statements.CompensableActivity> a confirm activity confirms the first activity.</span></span> <span data-ttu-id="98595-109">Wenn der Workflow erfolgreich abgeschlossen wird, werden alle <xref:System.Activities.Statements.CompensableActivity>-Instanzen, die nicht bestätigt oder kompensiert wurden, automatisch mit der Standardreihenfolge bestätigt.</span><span class="sxs-lookup"><span data-stu-id="98595-109">When the workflow successfully completes, all <xref:System.Activities.Statements.CompensableActivity> instances that have not been confirmed or compensated are automatically confirmed using the default order.</span></span> <span data-ttu-id="98595-110">Ohne die Confirm-Aktivität wäre die zweite <xref:System.Activities.Statements.CompensableActivity> zuerst bestätigt worden.</span><span class="sxs-lookup"><span data-stu-id="98595-110">Without the confirm, the second <xref:System.Activities.Statements.CompensableActivity> would have been confirmed first.</span></span>  
  
## <a name="explicit-compensation"></a><span data-ttu-id="98595-111">Explizite Kompensierung</span><span class="sxs-lookup"><span data-stu-id="98595-111">Explicit Compensation</span></span>  
 <span data-ttu-id="98595-112">Das zweite Szenario zeigt die Auswirkungen auf die Standardbestätigung, wenn eine <xref:System.Activities.Statements.CompensableActivity> explizit kompensiert wird.</span><span class="sxs-lookup"><span data-stu-id="98595-112">The second scenario shows the affect on default confirmation when a <xref:System.Activities.Statements.CompensableActivity> is explicitly compensated.</span></span> <span data-ttu-id="98595-113">Der Workflow besteht aus einer Sequenz von zwei <xref:System.Activities.Statements.CompensableActivity>-Aktivitäten, nachdem die zweite abgeschlossen wurde, wird die erste explizit kompensiert.</span><span class="sxs-lookup"><span data-stu-id="98595-113">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> activities, after the second completes the first is explicitly compensated.</span></span> <span data-ttu-id="98595-114">Wenn der Workflow abgeschlossen wird, wird als Ergebnis nur die zweite <xref:System.Activities.Statements.CompensableActivity> bestätigt.</span><span class="sxs-lookup"><span data-stu-id="98595-114">As a result when the workflow, completes only the second <xref:System.Activities.Statements.CompensableActivity> is confirmed.</span></span>  
  
## <a name="controlling-the-order-of-confirmation-for-nested-compensableactivity-activities"></a><span data-ttu-id="98595-115">Steuern der Bestätigungsreihenfolge für geschachtelte CompensableActivity-Aktivitäten</span><span class="sxs-lookup"><span data-stu-id="98595-115">Controlling the Order of Confirmation for Nested CompensableActivity Activities</span></span>  
 <span data-ttu-id="98595-116">Das dritte Szenario zeigt, wie die Bestätigungsreihenfolge für geschachtelte <xref:System.Activities.Statements.CompensableActivity> gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="98595-116">The third scenario shows how to control the order of confirmation for nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="98595-117">Das Szenario besteht aus einer <xref:System.Activities.Statements.CompensableActivity> als Stamm des Workflows.</span><span class="sxs-lookup"><span data-stu-id="98595-117">The scenario consists of a <xref:System.Activities.Statements.CompensableActivity> as the root of the workflow.</span></span> <span data-ttu-id="98595-118">Der Text der <xref:System.Activities.Statements.CompensableActivity> als Stamm ist eine Sequenz von drei <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="98595-118">The body of the root <xref:System.Activities.Statements.CompensableActivity> is a sequence of three <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="98595-119">Der <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> für die <xref:System.Activities.Statements.CompensableActivity> als Stamm ist eine Sequenz, die angibt, zuerst die erste und dann die zweite geschachtelte <xref:System.Activities.Statements.CompensableActivity> zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="98595-119">The <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> for the root <xref:System.Activities.Statements.CompensableActivity> is a sequence that specifies to confirm the first then the second nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="98595-120">Wenn der Workflow abgeschlossen wird, wird <xref:System.Activities.Statements.CompensableActivity> als Stamm bestätigt, dann wird die erste, die zweite und die dritte geschachtelte <xref:System.Activities.Statements.CompensableActivity> bestätigt, in dieser Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="98595-120">When the workflow completes it confirms the root <xref:System.Activities.Statements.CompensableActivity>, which then confirms the first, second and third nested <xref:System.Activities.Statements.CompensableActivity>, in that order.</span></span> <span data-ttu-id="98595-121">Als Ergebnis wird die standardmäßige Bestätigungsreihenfolge im Grunde umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="98595-121">As a result, the default confirmation order is essentially reversed.</span></span> <span data-ttu-id="98595-122">Da die dritte <xref:System.Activities.Statements.CompensableActivity> nicht explizit als Teil von <xref:System.Activities.Statements.CompensableActivity> als Stamm von <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> bestätigt wurde, wird sie nach der Standardreihenfolge bestätigt.</span><span class="sxs-lookup"><span data-stu-id="98595-122">Because the third <xref:System.Activities.Statements.CompensableActivity> was not explicitly confirmed as part of the root <xref:System.Activities.Statements.CompensableActivity> by the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, it is confirmed according to the default order.</span></span> <span data-ttu-id="98595-123">Da sie jedoch die einzige unbestätigte <xref:System.Activities.Statements.CompensableActivity> ist, bedeutet dies nur, dass sie bestätigt ist.</span><span class="sxs-lookup"><span data-stu-id="98595-123">However, because it is the only unconfirmed <xref:System.Activities.Statements.CompensableActivity> this just means it is confirmed.</span></span>  
  
## <a name="scoping-of-variables"></a><span data-ttu-id="98595-124">Bereiche von Variablen</span><span class="sxs-lookup"><span data-stu-id="98595-124">Scoping of Variables</span></span>  
 <span data-ttu-id="98595-125">Das vierte Szenario zeigt, wie die Lebensdauer von Variablen, die für eine <xref:System.Activities.Statements.CompensableActivity> oder eine der übergeordneten Aktivitäten definiert sind, noch im Gültigkeitsbereich liegt, wenn die Handler <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> oder <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> ausgeführt werden, auch wenn die Aktivität oder der Workflow abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="98595-125">The fourth scenario shows how the lifetime of variables defined for a <xref:System.Activities.Statements.CompensableActivity> or one of their parents are still in scope when the <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> or <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> handlers are executed even if the activity has completed or the workflow has completed.</span></span> <span data-ttu-id="98595-126">Der Workflow besteht aus einer Sequenz von zwei <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="98595-126">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="98595-127">Im Text der ersten wird die Variable `mySum` auf die Summe von 5 und 10 festgelegt, und das Ergebnis wird ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="98595-127">In the body of the first, the variable `mySum` is set to the sum of 5 and 10 and the result printed.</span></span> <span data-ttu-id="98595-128">Im Text der zweiten <xref:System.Activities.Statements.CompensableActivity> wird die Summe auf die Summe der vorhandenen Summe und 7 festgelegt, und das Ergebnis wird ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="98595-128">In the body of the second <xref:System.Activities.Statements.CompensableActivity>, the sum is set to the sum of the existing sum and 7 and the result printed.</span></span> <span data-ttu-id="98595-129">Ein benutzerdefinierter Bestätigungshandler wird für die erste <xref:System.Activities.Statements.CompensableActivity> definiert, die die Summe ausgibt, 7 subtrahiert und die Summe wieder ausgibt.</span><span class="sxs-lookup"><span data-stu-id="98595-129">A custom confirmation handler is defined for the first <xref:System.Activities.Statements.CompensableActivity>, which prints the sum, subtracts 7 and prints the sum again.</span></span> <span data-ttu-id="98595-130">Durch Überprüfung der ausgegebenen Summen wird deutlich, dass die Variable nicht nur für die Texte der beiden <xref:System.Activities.Statements.CompensableActivity>, sondern auch für den <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> im Bereich liegt.</span><span class="sxs-lookup"><span data-stu-id="98595-130">It is clear by inspecting the printed sums that the variable is in scope not only for the bodies of both <xref:System.Activities.Statements.CompensableActivity> but the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> as well.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="98595-131">So führen Sie das Beispiel aus</span><span class="sxs-lookup"><span data-stu-id="98595-131">To run the sample</span></span>  
  
1.  <span data-ttu-id="98595-132">Laden Sie die Projektmappe in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="98595-132">Load the solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="98595-133">Führen Sie die Anwendung "ConfirmationSample.exe" aus.</span><span class="sxs-lookup"><span data-stu-id="98595-133">Run the ConfirmationSample.exe application.</span></span>  
  
3.  <span data-ttu-id="98595-134">Achten Sie auf die folgende Ausgabe:</span><span class="sxs-lookup"><span data-stu-id="98595-134">Observe the following output:</span></span>  
  
 <span data-ttu-id="98595-135">**Explizite Bestätigung: Anfang workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Bestätigung HandlerEnd von workflowCompensableActivity2: Bestätigung HandlerExplicit Kompensierung: Anfang workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Kompensierung HandlerEnd von workflowCompensableActivity2: Bestätigung HandlerCustom Bestätigung Handler: Anfang workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd von workflowCompensableActivity1: Bestätigung HandlerCompensableActivity2: Bestätigung HandlerCompensableActivity3: Bestätigung HandlerVariable Zugriff in einem Ereignishandler für die Bestätigung: Anfang workflowCompensableActivity1: BodyCompensableActivity1: die Summe: 15CompensableActivity2: BodyCompensableActivity2: Hinzufügen von 7 ausführen, um die sumCompensableActivity2: die Summe ist jetzt: 22End von workflowCompensableActivity2: Bestätigung HandlerCompensableActivity1: Bestätigung HandlerCompensableActivity2: die Summe: 22CompensableActivity2: nach Abzug von 12 ist die Summe jetzt: 10Press EINGABETASTE zum Beenden.**</span><span class="sxs-lookup"><span data-stu-id="98595-135">**Explicit confirmation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Confirmation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerExplicit compensation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Compensation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerCustom confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd of workflowCompensableActivity1: Confirmation HandlerCompensableActivity2: Confirmation HandlerCompensableActivity3: Confirmation HandlerVariable access in a confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity1: The sum is: 15CompensableActivity2: BodyCompensableActivity2: Adding 7 to the sumCompensableActivity2: The sum is now: 22End of workflowCompensableActivity2: Confirmation HandlerCompensableActivity1: Confirmation HandlerCompensableActivity2: The sum is: 22CompensableActivity2: After subtracting 12 the sum is now: 10Press ENTER to exit.**</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="98595-136">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="98595-136">The samples may already be installed on your machine.</span></span> <span data-ttu-id="98595-137">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="98595-137">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="98595-138">Wenn dieses Verzeichnis nicht vorhanden ist, fahren Sie mit [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF) Samples für .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) alle Windows Communication Foundation (WCF) herunterladen und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele.</span><span class="sxs-lookup"><span data-stu-id="98595-138">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="98595-139">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="98595-139">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Compensation\Confirmation`