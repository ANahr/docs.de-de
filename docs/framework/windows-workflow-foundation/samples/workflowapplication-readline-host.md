---
title: WorkflowApplication-ReadLine-Host
ms.date: 03/30/2017
ms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b
ms.openlocfilehash: 8da8a5bb4c80a86fe5ae9e133ea545c00ee17fba
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33518537"
---
# <a name="workflowapplication-readline-host"></a><span data-ttu-id="d97eb-102">WorkflowApplication-ReadLine-Host</span><span class="sxs-lookup"><span data-stu-id="d97eb-102">WorkflowApplication ReadLine Host</span></span>
<span data-ttu-id="d97eb-103">Dieses Beispiel stellt einen generischen ReadLine-Host dar.</span><span class="sxs-lookup"><span data-stu-id="d97eb-103">This sample is a generic ReadLine host.</span></span> <span data-ttu-id="d97eb-104">Sie können einen beliebigen Workflow mithilfe der eingeschlossenen `ReadLine`-Aktivität (oder anderen ähnlichen Aktivitäten, die Daten aus Lesezeichen abrufen, die mit Zeichenfolgen wieder aufgenommen werden) laden und ausführen.</span><span class="sxs-lookup"><span data-stu-id="d97eb-104">You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings).</span></span> <span data-ttu-id="d97eb-105">Ausgaben von der `WriteLine`-Aktivität oder Ausgaben, die in die <xref:System.Activities.Statements.WriteLine.TextWriter%2A>-Erweiterung schreiben, werden an das Hostfenster weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="d97eb-105">Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window.</span></span> <span data-ttu-id="d97eb-106">Wenn sich eine Instanz im Leerlauf befindet, werden die verfügbaren Lesezeichen für diese Instanz in einem Kombinationsfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d97eb-106">When an instance is idle, the available bookmarks for that instance appear in a combo box.</span></span> <span data-ttu-id="d97eb-107">Durch Auswählen eines Lesezeichens, Eingeben von Text und Drücken der Schaltfläche zum Wiederaufnehmen von Lesezeichen wird die Ausführung des Workflows fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="d97eb-107">Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.</span></span> <span data-ttu-id="d97eb-108">Sie können einen ausgewählten Workflow auch abbrechen oder beenden.</span><span class="sxs-lookup"><span data-stu-id="d97eb-108">You can also cancel, abort, or terminate a selected workflow.</span></span> <span data-ttu-id="d97eb-109">Persistenz ist standardmäßig aktiviert. Sie können den Host herunterfahren und neu starten; die Instanzliste wird daraufhin mit den in der Datenbank gespeicherten Instanzen aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="d97eb-109">Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.</span></span> <span data-ttu-id="d97eb-110">Die Nachverfolgung wird verwendet, um Ereignisse auf <xref:System.Activities.WorkflowApplication>-Ebene an den Host auszugeben, mit der Option, eine ausführliche Nachverfolgung auf Aktivitätsebene hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="d97eb-110">Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="d97eb-111">Beispieldetails</span><span class="sxs-lookup"><span data-stu-id="d97eb-111">Sample Details</span></span>  
 <span data-ttu-id="d97eb-112">Es gibt zwei Ebenen für diesen Host: die Ansicht und den Instanz-Manager.</span><span class="sxs-lookup"><span data-stu-id="d97eb-112">There are two layers to this host: the view and the instance manager.</span></span> <span data-ttu-id="d97eb-113">Die Ansicht besteht aus der `HostView`-Klasse und der `WorkflowApplicationInfo`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="d97eb-113">The view consists of the `HostView` and `WorkflowApplicationInfo` classes.</span></span> <span data-ttu-id="d97eb-114">Das allgemeine Muster für diesen Host besteht darin, dass die `HostView`-Klasse dem Benutzer basierend auf `WorkflowApplicationInfo`-Objekten, die mit den Instanzen, die sie darstellen, in angemessener Weise synchron sind, verfügbare Optionen anzeigt.</span><span class="sxs-lookup"><span data-stu-id="d97eb-114">The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent.</span></span> <span data-ttu-id="d97eb-115">Die Instanz-Manager-Ebene besteht aus der `WorkflowApplicationManager`-Klasse, die den Kern der gesamten Hostkommunikation bildet, und der `WorkflowDefinitionExtension`-Klasse, die die Beziehung zwischen einer Instanz und der Programmdefinition, mit der diese gestartet wurde, sowie einigen anderen Klassen beibehält.</span><span class="sxs-lookup"><span data-stu-id="d97eb-115">The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes.</span></span> <span data-ttu-id="d97eb-116">Die `HostView` ruft Steuerungsvorgänge im `WorkflowApplicationManager` auf.</span><span class="sxs-lookup"><span data-stu-id="d97eb-116">The `HostView` calls control operations on the `WorkflowApplicationManager`.</span></span> <span data-ttu-id="d97eb-117">Diese Aufrufe sind in der Regel asynchron, um eine reaktionsfreudige Benutzeroberfläche aufrechtzuerhalten.</span><span class="sxs-lookup"><span data-stu-id="d97eb-117">These calls are typically asynchronous to maintain a responsive user interface.</span></span> <span data-ttu-id="d97eb-118">Wenn die asynchronen Aufrufe abgeschlossen sind, führt der `WorkflowApplicationManager` Aufrufe an die Ansichtsebene über eine ordnungsgemäß definierte Schnittstelle (`IHostView`) durch.</span><span class="sxs-lookup"><span data-stu-id="d97eb-118">When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`).</span></span> <span data-ttu-id="d97eb-119">Die `HostView`-Klasse leitet diese Aufrufe in den meisten Fällen von der `WorkflowApplicationManager`-Klasse an den Benutzeroberflächenthread weiter.</span><span class="sxs-lookup"><span data-stu-id="d97eb-119">The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread.</span></span> <span data-ttu-id="d97eb-120">Das Schreiben von Text erfolgt mit threadsicheren <xref:System.Activities.Statements.WriteLine.TextWriter%2A>-Objekten, die von der `HostView`-Klasse bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="d97eb-120">Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class.</span></span> <span data-ttu-id="d97eb-121">Die Benutzeroberfläche ist nicht der einzige Ort, an dem Ereignisse generiert werden.</span><span class="sxs-lookup"><span data-stu-id="d97eb-121">The user interface is not the only thing generating events.</span></span> <span data-ttu-id="d97eb-122">Die <xref:System.Activities.WorkflowApplication>-Objekte signalisieren dem `WorkflowApplicationManager` beispielsweise, wann sie in den Zustand `Idle` oder `Complete` übergehen oder `Aborted` werden.</span><span class="sxs-lookup"><span data-stu-id="d97eb-122">The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example.</span></span> <span data-ttu-id="d97eb-123">Die `WorkflowApplicationManager`-Klasse verlässt den Ereignisthread, indem sie Bereinigungs- oder Aktualisierungsaufgaben an den Host weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="d97eb-123">The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.</span></span>  
  
 <span data-ttu-id="d97eb-124">Die Aufzeichnung der Datei, die zum Starten einer <xref:System.Activities.WorkflowApplication> verwendet wird, wird von der`WorkflowDefinitionExtension`-Klasse bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="d97eb-124">The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class.</span></span> <span data-ttu-id="d97eb-125">Diese implementiert die <xref:System.Activities.Persistence.PersistenceIOParticipant>-Schnittstelle, um an der Persistenz teilzunehmen und den Pfad an die Workflowdefinition weiterzugeben.</span><span class="sxs-lookup"><span data-stu-id="d97eb-125">It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.</span></span>  
  
 <span data-ttu-id="d97eb-126">Die `WorkflowApplicationManager.Load`-Methode verwendet den gespeicherten Pfad zur Instanziierung der Workflowprogramme, die zum Laden von nicht abgeschlossenen <xref:System.Activities.WorkflowApplication>-Objekten erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="d97eb-126">The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="d97eb-127">So können Sie das Beispiel einrichten, erstellen und ausführen</span><span class="sxs-lookup"><span data-stu-id="d97eb-127">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="d97eb-128">Für dieses Beispiel muss SQL Express installiert sein.</span><span class="sxs-lookup"><span data-stu-id="d97eb-128">This sample requires SQL Express to be installed.</span></span> <span data-ttu-id="d97eb-129">SQL Express wird mit [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] ausgeliefert.</span><span class="sxs-lookup"><span data-stu-id="d97eb-129">SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="d97eb-130">Öffnen Sie eine Visual Studio 2010-Eingabeaufforderung.</span><span class="sxs-lookup"><span data-stu-id="d97eb-130">Open a Visual Studio 2010 command prompt.</span></span>  
  
3.  <span data-ttu-id="d97eb-131">Navigieren Sie zum Beispielverzeichnis (\WF\Basic\Execution\ControllingWorkflowApplications), und führen Sie "CreateInstanceStore.cmd" aus.</span><span class="sxs-lookup"><span data-stu-id="d97eb-131">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.</span></span>  
  
4.  <span data-ttu-id="d97eb-132">Das Skript "CreateInstanceStore.cmd" versucht, die Datenbank auf der Standardinstanz von SQL Server 2008 Express zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="d97eb-132">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="d97eb-133">Wenn Sie die Datenbank auf einer anderen Instanz installieren möchten, ändern Sie hierfür das Skript.</span><span class="sxs-lookup"><span data-stu-id="d97eb-133">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
5.  <span data-ttu-id="d97eb-134">Kompilieren Sie das WorkflowApplicationReadLineHost-Projekt, und führen Sie es in der Befehlszeile aus.</span><span class="sxs-lookup"><span data-stu-id="d97eb-134">Compile the WorkflowApplicationReadLineHost project and run it from the command line.</span></span>  
  
6.  <span data-ttu-id="d97eb-135">Sobald es ausgeführt wird, können Sie die Persistenz optional aktivieren oder deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="d97eb-135">Once running, you can optionally turn persistence off or on.</span></span> <span data-ttu-id="d97eb-136">Außerdem können Sie optional die ausführliche Aktivitätsnachverfolgung aktivieren oder deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="d97eb-136">Further, you can optionally turn detailed activity tracking on or off.</span></span>  
  
7.  <span data-ttu-id="d97eb-137">Drücken Sie die Schaltfläche mit den Auslassungspunkten neben der **ausführen** Schaltfläche, um einen Workflow in einer XAML-Datei definierten navigieren</span><span class="sxs-lookup"><span data-stu-id="d97eb-137">Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file</span></span>  
  
     <span data-ttu-id="d97eb-138">Im Ordner "SampleWorkflows" finden Sie zwei Beispiele.</span><span class="sxs-lookup"><span data-stu-id="d97eb-138">Two samples can be found under the SampleWorkflows folder.</span></span> <span data-ttu-id="d97eb-139">Das Beispiel "parallel1.xaml" tritt in den Leerlauf ein.</span><span class="sxs-lookup"><span data-stu-id="d97eb-139">The parallel1.xaml example goes idle.</span></span>  
  
8.  <span data-ttu-id="d97eb-140">Nachdem ein Beispiel ausgewählt ist, drücken Sie die **ausführen** Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="d97eb-140">Once an example is selected, press the **Run** button.</span></span>  
  
9. <span data-ttu-id="d97eb-141">Wenn, oder wenn der Workflow im Leerlauf ist, geht die **Lesezeichen** Kombinationsfeld mit verfügbaren Lesezeichen aufgefüllt wird.</span><span class="sxs-lookup"><span data-stu-id="d97eb-141">If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.</span></span>  
  
10. <span data-ttu-id="d97eb-142">Sie können nun entweder ein Lesezeichen wiederaufnehmen oder den Workflow abbrechen bzw. beenden.</span><span class="sxs-lookup"><span data-stu-id="d97eb-142">The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.</span></span> <span data-ttu-id="d97eb-143">Sie können auch den Host herunterfahren und ihn neu starten.</span><span class="sxs-lookup"><span data-stu-id="d97eb-143">You can also shut down the host and restart it.</span></span> <span data-ttu-id="d97eb-144">Wenn die Persistenz aktiviert bleibt, werden die Instanzen beim Herunterfahren entladen und beim Starten erneut geladen.</span><span class="sxs-lookup"><span data-stu-id="d97eb-144">If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.</span></span>  
  
     <span data-ttu-id="d97eb-145">Zur Wiederaufnahme eines Lesezeichens, das gewünschte Lesezeichen auswählen, geben Sie einen Wert in das Textfeld neben dem Kombinationsfeld ", und drücken Sie **Lesezeichen wiederaufnehmen**.</span><span class="sxs-lookup"><span data-stu-id="d97eb-145">To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.</span></span>  
  
#### <a name="to-remove-the-instance-store-database"></a><span data-ttu-id="d97eb-146">So entfernen Sie die Instanzspeicherdatenbank</span><span class="sxs-lookup"><span data-stu-id="d97eb-146">To remove the instance store database</span></span>  
  
1.  <span data-ttu-id="d97eb-147">Öffnen Sie eine Visual Studio 2010-Eingabeaufforderung.</span><span class="sxs-lookup"><span data-stu-id="d97eb-147">Open a Visual Studio 2010 command prompt.</span></span>  
  
2.  <span data-ttu-id="d97eb-148">Navigieren Sie zum Beispielverzeichnis (\WF\Basic\Execution\ControllingWorkflowApplications), und führen Sie "RemoveInstanceStore.cmd" aus.</span><span class="sxs-lookup"><span data-stu-id="d97eb-148">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d97eb-149">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="d97eb-149">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d97eb-150">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="d97eb-150">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="d97eb-151">Wenn dieses Verzeichnis nicht vorhanden ist, fahren Sie mit [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) aller Windows Communication Foundation (WCF) herunterladen und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele.</span><span class="sxs-lookup"><span data-stu-id="d97eb-151">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d97eb-152">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="d97eb-152">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Execution\ControllingWorkflowApplications`