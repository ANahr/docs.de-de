---
title: Verwenden von CancellationScope
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 39c5c338-b316-43d6-b7fe-a543281dd1ec
caps.latest.revision: "10"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 6f8fcd972b31490142f94581c664ca2988237684
ms.sourcegitcommit: 5177d6ae2e9baf026f07ee0631556700a5a193f7
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2017
---
# <a name="using-cancellationscope"></a><span data-ttu-id="2600a-102">Verwenden von CancellationScope</span><span class="sxs-lookup"><span data-stu-id="2600a-102">Using CancellationScope</span></span>
<span data-ttu-id="2600a-103">Mit diesem Beispiel wird veranschaulicht, wie die <xref:System.Activities.Statements.CancellationScope>-Aktivität verwendet wird, um die Arbeit in einer Anwendung abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="2600a-103">This sample demonstrates how to use the <xref:System.Activities.Statements.CancellationScope> activity to cancel work in an application.</span></span>  
  
 <span data-ttu-id="2600a-104">Viele Komponenten und Dienste der mittleren Ebene nutzen das bekannte Programmiermodell der Transaktionen zur Durchführung von Abbruchvorgängen.</span><span class="sxs-lookup"><span data-stu-id="2600a-104">Many middle tier components and services rely on the well-known programming construct of transactions to handle cancellation for them.</span></span>  <span data-ttu-id="2600a-105">Es gibt jedoch viele Situationen, in denen Transaktionen nicht verwendet werden können und die Arbeit manuell abgebrochen werden muss.</span><span class="sxs-lookup"><span data-stu-id="2600a-105">However, there are many situations in which work that cannot be done in a transaction must be canceled.</span></span>  <span data-ttu-id="2600a-106">Ein Abbruch ist schwieriger als das Verwenden von Transaktionen, da die abzubrechende Arbeit zunächst nachverfolgt werden muss.</span><span class="sxs-lookup"><span data-stu-id="2600a-106">Using cancellation is more difficult than using transactions, because work that must be canceled must first be tracked.</span></span> [!INCLUDE[netfx_current_short](../../../../includes/netfx-current-short-md.md)]<span data-ttu-id="2600a-107"> unterstützt Sie dabei durch Bereitstellen einer <xref:System.Activities.Statements.CancellationScope>-Aktivität.</span><span class="sxs-lookup"><span data-stu-id="2600a-107"> helps you with this by providing a <xref:System.Activities.Statements.CancellationScope> activity.</span></span>  
  
 <span data-ttu-id="2600a-108">Der Abbruch kann innerhalb einer Aktivität oder über das übergeordnete Element einer Aktivität ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="2600a-108">Cancellation can be triggered either from within an activity or from the activity's parent.</span></span>  <span data-ttu-id="2600a-109">Untergeordnete Aktivitäten werden von der zugehörigen übergeordneten Aktivität (z. B. <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart> oder eine benutzerdefinierte zusammengesetzte Aktivität) geplant.</span><span class="sxs-lookup"><span data-stu-id="2600a-109">Child activities are scheduled by their parent activity (such as a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart>, or a custom composite activity).</span></span>  <span data-ttu-id="2600a-110">Die übergeordnete Aktivität kann untergeordnete Aktivitäten aus jedem beliebigen Grund abbrechen.</span><span class="sxs-lookup"><span data-stu-id="2600a-110">The parent activity can cancel child activities for any reason.</span></span>  <span data-ttu-id="2600a-111">Beispiel: Eine <xref:System.Activities.Statements.Parallel>-Aktivität mit drei untergeordneten Aktivitäten (Verzweigungen) bricht die verbleibenden Verzweigungen ab, wenn eine Verzweigung abgeschlossen wird und die Auswertung des <xref:System.Activities.Statements.Parallel.CompletionCondition%2A>-Ausdrucks `true` ergibt.</span><span class="sxs-lookup"><span data-stu-id="2600a-111">For example, a <xref:System.Activities.Statements.Parallel> activity with three child branches will cancel the remaining child branches whenever it completes a branch and the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> expression evaluates to `true`.</span></span> <span data-ttu-id="2600a-112">Der Workflow kann auch extern von der Hostanwendung durch Aufrufen von <xref:System.Activities.WorkflowApplication.Cancel%2A> abgebrochen werden.</span><span class="sxs-lookup"><span data-stu-id="2600a-112">The workflow can also be canceled externally by the host application by calling <xref:System.Activities.WorkflowApplication.Cancel%2A>.</span></span>  
  
 <span data-ttu-id="2600a-113">Zur Verwendung der <xref:System.Activities.Statements.CancellationScope>-Aktivität fügen Sie die abzubrechende Arbeit in eine <xref:System.Activities.Statements.CancellationScope.Body%2A>-Eigenschaft und die nach dem Abbruchvorgang auszuführende Arbeit in eine <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A>-Eigenschaft ein.</span><span class="sxs-lookup"><span data-stu-id="2600a-113">To use the <xref:System.Activities.Statements.CancellationScope> activity, put the work that needs to be canceled into the <xref:System.Activities.Statements.CancellationScope.Body%2A> property, and put the work that is performed after cancellation into the <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A> property.</span></span>  
  
 <span data-ttu-id="2600a-114">In diesem Beispiel wird das Abbrechen einer Aktivität innerhalb der Aktivität selbst veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="2600a-114">This sample demonstrates cancelling an activity from within the activity itself.</span></span>  
  
 <span data-ttu-id="2600a-115">Das im Beispiel zur Veranschaulichung der <xref:System.Activities.Statements.CancellationScope>-Aktivität verwendete Szenario ist ein Kunde, der so schnell wie möglich ein Ticket nach Miami kaufen möchte.</span><span class="sxs-lookup"><span data-stu-id="2600a-115">The scenario that the sample uses to demonstrate the <xref:System.Activities.Statements.CancellationScope> activity is a client wanting to buy a ticket to Miami as soon as possible.</span></span> <span data-ttu-id="2600a-116">Es gibt zwei Reiseagenturen, die das Geschäft abschließen möchten.</span><span class="sxs-lookup"><span data-stu-id="2600a-116">There are two travel agencies that want the business.</span></span> <span data-ttu-id="2600a-117">Für diese Geschäftslogik werden im Beispiel zwei <xref:System.Activities.Statements.CancellationScope>-Elemente innerhalb einer <xref:System.Activities.Statements.Parallel>-Aktivität verwendet.</span><span class="sxs-lookup"><span data-stu-id="2600a-117">The sample uses two <xref:System.Activities.Statements.CancellationScope> within a <xref:System.Activities.Statements.Parallel> activity to model this business logic.</span></span> <span data-ttu-id="2600a-118">Die <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> der <xref:System.Activities.Statements.Parallel>-Aktivität wird auf `true` festgelegt. Da die <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> nach Abschluss jeder der Verzweigungen geprüft wird, wird nach Abschluss einer Verzweigung die verbleibende Verzweigung abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="2600a-118">The <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> of the <xref:System.Activities.Statements.Parallel> activity is set to `true`; since the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> is checked after any branch completes, this will cause the remaining branch to be canceled after the first branch completes.</span></span> <span data-ttu-id="2600a-119">Die Clientanwendung fordert beide Agenturen auf, das Ticket zu kaufen. Sobald eine Agentur den Kauf des Tickets bestätigt, bricht die Anwendung den Auftrag bei der anderen Agentur ab.</span><span class="sxs-lookup"><span data-stu-id="2600a-119">The client application asks both agencies to buy the ticket, and when the first one confirms that the ticket has been bought, the application cancels the order at the other agency.</span></span>  
  
## <a name="to-use-this-sample"></a><span data-ttu-id="2600a-120">So verwenden Sie dieses Beispiel</span><span class="sxs-lookup"><span data-stu-id="2600a-120">To use this sample</span></span>  
  
1.  <span data-ttu-id="2600a-121">Öffnen Sie in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] die Projektmappendatei "CancelationScopeXAML.sln".</span><span class="sxs-lookup"><span data-stu-id="2600a-121">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CancelationScopeXAML.sln solution file.</span></span>  
  
2.  <span data-ttu-id="2600a-122">Drücken Sie STRG+UMSCHALT+B, um die Projektmappe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2600a-122">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="2600a-123">Drücken Sie STRG+F5, um die Projektmappe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2600a-123">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="2600a-124">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="2600a-124">The samples may already be installed on your machine.</span></span> <span data-ttu-id="2600a-125">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="2600a-125">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="2600a-126">Wenn dieses Verzeichnis nicht vorhanden ist, rufen Sie [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) auf, um alle [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] - und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] -Beispiele herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="2600a-126">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="2600a-127">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="2600a-127">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Built-InActivities\CancellationScope`