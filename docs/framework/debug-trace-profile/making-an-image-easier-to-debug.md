---
title: "Erleichtern des Debuggens für ein Abbild"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- images [.NET Framework], debugging
- executable image for debugging
- debugging [.NET Framework], executable images for
ms.assetid: 7d90ea7a-150f-4f97-98a7-f9c26541b9a3
caps.latest.revision: "13"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: e05af51010e92586a9f1de423f6304ea8db78168
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/19/2018
---
# <a name="making-an-image-easier-to-debug"></a><span data-ttu-id="f48b5-102">Erleichtern des Debuggens für ein Abbild</span><span class="sxs-lookup"><span data-stu-id="f48b5-102">Making an Image Easier to Debug</span></span>
<span data-ttu-id="f48b5-103">Beim Kompilieren von nicht verwaltetem Code können Sie durch das Festlegen von IDE-Schaltern oder Befehlszeilenoptionen ein ausführbares Image zum Debuggen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-103">When compiling unmanaged code, you can configure an executable image for debugging by setting IDE switches or command-line options.</span></span> <span data-ttu-id="f48b5-104">Sie können beispielsweise die Befehlszeilenoption /**Zi** in Visual C++ verwenden, um zur Ausgabe von Debugsymboldateien aufzufordern (Dateierweiterung „.pdb“).</span><span class="sxs-lookup"><span data-stu-id="f48b5-104">For example, you can use the /**Zi** command-line option in Visual C++ to ask it to emit debug symbol files (file extension .pdb).</span></span> <span data-ttu-id="f48b5-105">Dementsprechend weist die Befehlszeilenoption /**Od** den Compiler an, die Optimierung zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-105">Similarly, the /**Od** command-line option tells the compiler to disable optimization.</span></span> <span data-ttu-id="f48b5-106">Der erzeugte Code wird langsamer ausgeführt, lässt sich jedoch gegebenenfalls einfacher debuggen.</span><span class="sxs-lookup"><span data-stu-id="f48b5-106">The resulting code runs more slowly, but is easier to debug, should this be necessary.</span></span>  
  
 <span data-ttu-id="f48b5-107">Beim Kompilieren von verwaltetem Code in .NET Framework kompilieren Compiler (z. B. Visual C++, Visual Basic und C#) ihr Quellprogramm in Microsoft Intermediate Language (MSIL).</span><span class="sxs-lookup"><span data-stu-id="f48b5-107">When compiling .NET Framework managed code, compilers such as Visual C++, Visual Basic, and C# compile their source program into Microsoft Intermediate Language (MSIL).</span></span> <span data-ttu-id="f48b5-108">Anschließend wird MSIL unmittelbar vor der Ausführung mit JIT in systemeigenen Computercode kompiliert.</span><span class="sxs-lookup"><span data-stu-id="f48b5-108">MSIL is subsequently JIT-compiled, just before execution, into native machine code.</span></span> <span data-ttu-id="f48b5-109">Ähnlich wie bei nicht verwaltetem Code können Sie durch das Festlegen von IDE-Schaltern oder Befehlszeilenoptionen ein ausführbares Abbild zum Debuggen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-109">As with unmanaged code, you can configure an executable image for debugging by setting IDE switches or command-line options.</span></span> <span data-ttu-id="f48b5-110">Darüber hinaus können Sie die JIT-Kompilierung zum Debuggen im Großen und Ganzen genauso konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-110">In addition, you can configure the JIT compilation for debugging in much the same way.</span></span>  
  
 <span data-ttu-id="f48b5-111">Diese JIT-Konfiguration hat zwei Aspekte:</span><span class="sxs-lookup"><span data-stu-id="f48b5-111">This JIT configuration has two aspects:</span></span>  
  
-   <span data-ttu-id="f48b5-112">Sie können den JIT-Compiler anweisen, Verfolgungsinformationen zu generieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-112">You can request the JIT-compiler to generate tracking information.</span></span> <span data-ttu-id="f48b5-113">Dadurch kann der Debugger eine Kette von MSIL dem entsprechenden Computercode zuordnen und verfolgen, wo lokale Variablen und Funktionsargumente gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f48b5-113">This makes it possible for the debugger to match up a chain of MSIL with its machine code counterpart, and to track where local variables and function arguments are stored.</span></span>  <span data-ttu-id="f48b5-114">In .NET Framework, Version 2.0, generiert der JIT-Compiler stets Verfolgungsinformationen, d. h., Sie müssen diese nicht anfordern.</span><span class="sxs-lookup"><span data-stu-id="f48b5-114">In the .NET Framework version 2.0, the JIT compiler will always generate tracking information, so there is no need to request it.</span></span>  
  
-   <span data-ttu-id="f48b5-115">Sie können den JIT-Compiler anweisen, den erzeugten Computercode nicht zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-115">You can request the JIT-compiler to not optimize the resulting machine code.</span></span>  
  
 <span data-ttu-id="f48b5-116">Normalerweise legt der Compiler, der die MSIL generiert, diese JIT-Compileroptionen entsprechend fest. Sie basieren auf den angegebenen IDE-Schaltern oder Befehlszeilenoptionen, die Sie angeben (z.B. /**Od**).</span><span class="sxs-lookup"><span data-stu-id="f48b5-116">Normally, the compiler that generates the MSIL sets these JIT-compiler options appropriately, based upon the IDE switches or command-line options you specify, for example, /**Od**.</span></span>  
  
 <span data-ttu-id="f48b5-117">Mitunter kann es erforderlich sein, das Verhalten des JIT-Compilers zu ändern, sodass der generierte Computercode einfacher zu debuggen ist.</span><span class="sxs-lookup"><span data-stu-id="f48b5-117">In some cases, you might want to change the behavior of the JIT compiler so that the machine code it generates is easier to debug.</span></span> <span data-ttu-id="f48b5-118">So können Sie z. B. JIT-Verfolgungsinformationen für eine Verkaufsversion generieren oder die Optimierung steuern.</span><span class="sxs-lookup"><span data-stu-id="f48b5-118">For example, you might want to generate JIT tracking information for a retail build or control optimization.</span></span> <span data-ttu-id="f48b5-119">Dazu können Sie eine Initialisierungsdatei (INI) verwenden.</span><span class="sxs-lookup"><span data-stu-id="f48b5-119">You can do so with an initialization (.ini) file.</span></span>  
  
 <span data-ttu-id="f48b5-120">Beispiel: Wenn die zu debuggende Assembly MyApp.exe heißt, erstellen Sie in dem Ordner, in dem MyApp.exe gespeichert ist, eine Textdatei mit dem Namen MyApp.ini, die die folgenden drei Zeilen enthält:</span><span class="sxs-lookup"><span data-stu-id="f48b5-120">For example, if the assembly you want to debug is called MyApp.exe, then you can create a text file named MyApp.ini, in the same folder as MyApp.exe, which contains these three lines:</span></span>  
  
```  
[.NET Framework Debugging Control]  
GenerateTrackingInfo=1  
AllowOptimize=0  
```  
  
 <span data-ttu-id="f48b5-121">Sie können für die Optionen jeweils den Wert 0 oder 1 einstellen. Nicht vorhandene Optionen haben standardmäßig den Wert 0.</span><span class="sxs-lookup"><span data-stu-id="f48b5-121">You can set the value of each option to 0 or 1, and any absent option defaults to 0.</span></span> <span data-ttu-id="f48b5-122">Am einfachsten lässt sich die Assembly debuggen, wenn Sie für `GenerateTrackingInfo` 1 und für `AllowOptimize` 0 festlegen.</span><span class="sxs-lookup"><span data-stu-id="f48b5-122">Setting `GenerateTrackingInfo` to 1 and `AllowOptimize` to 0 provides the easiest debugging.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f48b5-123">In .NET Framework Version 2.0 generiert der JIT-Compiler unabhängig vom Wert für `GenerateTrackingInfo` immer Verfolgungsinformationen. Der `AllowOptimize`-Wert hat jedoch weiterhin Auswirkungen.</span><span class="sxs-lookup"><span data-stu-id="f48b5-123">In the .NET Framework version 2.0, the JIT compiler always generates tracking information regardless of the value for `GenerateTrackingInfo`; however, the `AllowOptimize` value still has an effect.</span></span> <span data-ttu-id="f48b5-124">Wenn Sie das native Image mithilfe von [Ngen.exe (Native Image Generator)](../../../docs/framework/tools/ngen-exe-native-image-generator.md) ohne Optimierung vorkompilieren, muss bei der Ausführung von „Ngen.exe“ die INI-Datei im Zielordner mit der Einstellung `AllowOptimize=0` vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="f48b5-124">When using the [Ngen.exe (Native Image Generator)](../../../docs/framework/tools/ngen-exe-native-image-generator.md) to precompile the native image without optimization, the .ini file must be present in the target folder with `AllowOptimize=0` when Ngen.exe executes.</span></span> <span data-ttu-id="f48b5-125">Falls Sie eine Assembly ohne Optimierung vorkompiliert haben, müssen Sie den vorkompilierten Code mit der **/uninstall**-Option von „Ngen.exe“ entfernen, bevor Sie „Ngen.exe“ erneut ausführen, um den Code in optimierter Form vorzukompilieren.</span><span class="sxs-lookup"><span data-stu-id="f48b5-125">If you have precompiled an assembly without optimization, you must remove the precompiled code using the NGen.exe **/uninstall** option before rerunning Ngen.exe to precompile the code as optimized.</span></span> <span data-ttu-id="f48b5-126">Wenn die INI-Datei nicht im Ordner vorhanden ist, kompiliert Ngen.exe den Code standardmäßig optimiert vor.</span><span class="sxs-lookup"><span data-stu-id="f48b5-126">If the .ini file is not present in the folder, by default Ngen.exe precompiles the code as optimized.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f48b5-127"><xref:System.Diagnostics.DebuggableAttribute?displayProperty=nameWithType> kontrolliert die Einstellungen für eine Assembly.</span><span class="sxs-lookup"><span data-stu-id="f48b5-127">The <xref:System.Diagnostics.DebuggableAttribute?displayProperty=nameWithType> controls the settings for an assembly.</span></span> <span data-ttu-id="f48b5-128">**DebuggableAttribute** enthält zwei Felder, in denen festgelegt wird, ob der JIT-Compiler eine Optimierung durchführen und/oder Verfolgungsinformationen generieren soll.</span><span class="sxs-lookup"><span data-stu-id="f48b5-128">**DebuggableAttribute** includes two fields that record the settings for whether the JIT compiler should optimize, and/or generate tracking information.</span></span> <span data-ttu-id="f48b5-129">In .NET Framework, Version 2.0, generiert der JIT-Compiler immer Verfolgungsinformationen.</span><span class="sxs-lookup"><span data-stu-id="f48b5-129">In the .NET Framework version 2.0, the JIT compiler will always generate tracking information.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f48b5-130">Bei Verkaufsversionen legen Compiler das Attribut **DebuggableAttribute** nicht fest.</span><span class="sxs-lookup"><span data-stu-id="f48b5-130">For a retail build, compilers do not set any **DebuggableAttribute**.</span></span> <span data-ttu-id="f48b5-131">Der JIT-Compiler generiert standardmäßig Computercode, der eine optimale Leistungsfähigkeit bietet und höchst schwierig zu debuggen ist.</span><span class="sxs-lookup"><span data-stu-id="f48b5-131">The JIT-compiler default behavior is to generate the highest performance, hardest to debug machine code.</span></span> <span data-ttu-id="f48b5-132">Durch Aktivieren der JIT-Verfolgung wird die Leistung geringfügig, durch Deaktivieren der Optimierung erheblich verschlechtert.</span><span class="sxs-lookup"><span data-stu-id="f48b5-132">Enabling JIT tracking lowers performance a little, and disabling optimization lowers performance a lot.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f48b5-133">**DebuggableAttribute** gilt immer für die gesamte Assembly, nicht für einzelne Module innerhalb der Assembly.</span><span class="sxs-lookup"><span data-stu-id="f48b5-133">The **DebuggableAttribute** applies to a whole assembly at a time, not to individual modules within the assembly.</span></span> <span data-ttu-id="f48b5-134">Aus diesem Grund müssen Entwicklungstools benutzerdefinierte Attribute an das Metadatentoken der Assembly anfügen, sofern bereits eine Assembly erstellt wurde oder aber an die **System.Runtime.CompilerServices.AssemblyAttributesGoHere**-Klasse.</span><span class="sxs-lookup"><span data-stu-id="f48b5-134">Development tools must therefore attach custom attributes to the assembly metadata token, if an assembly has already been created, or to the class called **System.Runtime.CompilerServices.AssemblyAttributesGoHere**.</span></span> <span data-ttu-id="f48b5-135">Das ALink-Tool gibt diese **DebuggableAttribute**-Attribute von den einzelnen Modulen an die Assembly weiter, deren Bestandteil sie werden.</span><span class="sxs-lookup"><span data-stu-id="f48b5-135">The ALink tool will then promote these **DebuggableAttribute** attributes from each module to the assembly they become a part of.</span></span> <span data-ttu-id="f48b5-136">Wenn hierbei ein Konflikt auftritt, schlägt der ALink-Vorgang fehl.</span><span class="sxs-lookup"><span data-stu-id="f48b5-136">If there is a conflict, the ALink operation will fail.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f48b5-137">In Version 1.0 von .NET Framework fügt der Microsoft Visual C++-Compiler das **DebuggableAttribute** hinzu, wenn die Compileroptionen **/clr** und **/Zi** angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f48b5-137">In version 1.0 of the .NET Framework, the Microsoft Visual C++ compiler adds the **DebuggableAttribute** when the **/clr** and **/Zi** compiler options are specified.</span></span> <span data-ttu-id="f48b5-138">In Version 1.1 von .NET Framework müssen Sie entweder das **DebugabbleAttribute** manuell im Code hinzufügen oder die Linkeroption **/ASSEMBLYDEBUG** verwenden.</span><span class="sxs-lookup"><span data-stu-id="f48b5-138">In version 1.1 of the .NET Framework, you must either add the **DebugabbleAttribute** manually in your code or use the **/ASSEMBLYDEBUG** linker option.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f48b5-139">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="f48b5-139">See Also</span></span>  
 [<span data-ttu-id="f48b5-140">Debuggen, Ablaufverfolgung und Profilerstellung</span><span class="sxs-lookup"><span data-stu-id="f48b5-140">Debugging, Tracing, and Profiling</span></span>](../../../docs/framework/debug-trace-profile/index.md)  
 [<span data-ttu-id="f48b5-141">Aktivieren von JIT-attach Debugging</span><span class="sxs-lookup"><span data-stu-id="f48b5-141">Enabling JIT-Attach Debugging</span></span>](../../../docs/framework/debug-trace-profile/enabling-jit-attach-debugging.md)  
 [<span data-ttu-id="f48b5-142">Aktivieren der Profilerstellung</span><span class="sxs-lookup"><span data-stu-id="f48b5-142">Enabling Profiling</span></span>](http://msdn.microsoft.com/library/3b669676-f0e0-4ebf-8674-68986dd2020d)
