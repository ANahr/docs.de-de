---
title: "Entwerfen ein Domänenmodell microservice"
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Entwerfen ein Domänenmodell microservice"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 455a2c5a39fb9b765b557610ab108f8c75882dbd
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/18/2017
---
# <a name="designing-a-microservice-domain-model"></a><span data-ttu-id="af297-104">Entwerfen ein Domänenmodell microservice</span><span class="sxs-lookup"><span data-stu-id="af297-104">Designing a microservice domain model</span></span>

<span data-ttu-id="af297-105">*Definieren Sie eine umfangreiche Domänenmodell für jeden Business Microservice oder begrenzt, die den Kontext*</span><span class="sxs-lookup"><span data-stu-id="af297-105">*Define one rich domain model for each business microservice or Bounded Context*</span></span>

<span data-ttu-id="af297-106">Ziel ist es zum Erstellen eines Modells Einzeldomäne kann für jede Business Microservice oder begrenzt, die den Kontext (BC).</span><span class="sxs-lookup"><span data-stu-id="af297-106">Your goal is to create a single cohesive domain model for each business microservice or Bounded Context (BC).</span></span> <span data-ttu-id="af297-107">Bedenken Sie jedoch, die eine BC oder Business Microservice konnte in einigen Fällen bestehen mehrere physische Dienste, die eine Einzeldomänenmodell gemeinsam nutzen.</span><span class="sxs-lookup"><span data-stu-id="af297-107">Keep in mind, however, that a BC or business microservice could sometimes be composed of several physical services that share a single domain model.</span></span> <span data-ttu-id="af297-108">Das Domänenmodell muss erfassen, Regeln, Verhalten, Business-Sprache und die Einschränkungen der einzelnen begrenzt, die den Kontext oder Business-Microservice, die es darstellt.</span><span class="sxs-lookup"><span data-stu-id="af297-108">The domain model must capture the rules, behavior, business language, and constraints of the single Bounded Context or business microservice that it represents.</span></span>

## <a name="the-domain-entity-pattern"></a><span data-ttu-id="af297-109">Die Entität "Domain"-Muster</span><span class="sxs-lookup"><span data-stu-id="af297-109">The Domain Entity pattern</span></span>

<span data-ttu-id="af297-110">Entitäten Domänenobjekte darstellen und werden in erster Linie definiert, anhand ihrer Identität, die Geschäftskontinuität und die Persistenz mit der Zeit und nicht nur durch die Attribute, die sie zu bilden.</span><span class="sxs-lookup"><span data-stu-id="af297-110">Entities represent domain objects and are primarily defined by their identity, continuity, and persistence over time, and not only by the attributes that comprise them.</span></span> <span data-ttu-id="af297-111">Wie Eric Evans sagt dazu dass, ist "ein Objekt, das durch seine Identität in erster Linie definiert eine Entität aufgerufen."</span><span class="sxs-lookup"><span data-stu-id="af297-111">As Eric Evans says, “an object primarily defined by its identity is called an Entity.”</span></span> <span data-ttu-id="af297-112">Entitäten sind im Domänenmodell, sehr wichtig, da es sich um die Basis für ein Modell sind.</span><span class="sxs-lookup"><span data-stu-id="af297-112">Entities are very important in the domain model, since they are the base for a model.</span></span> <span data-ttu-id="af297-113">Aus diesem Grund sollten Sie identifizieren und sorgfältig zu entwerfen.</span><span class="sxs-lookup"><span data-stu-id="af297-113">Therefore, you should identify and design them carefully.</span></span>

<span data-ttu-id="af297-114">*Identität einer Entität kann mehrere Microservices oder begrenzter Kontexten überqueren.*</span><span class="sxs-lookup"><span data-stu-id="af297-114">*An entity’s identity can cross multiple microservices or Bounded Contexts.*</span></span>

<span data-ttu-id="af297-115">Die gleiche Identität (jedoch nicht die gleiche Entität) in mehreren Kontexten begrenzt oder Microservices modelliert werden kann.</span><span class="sxs-lookup"><span data-stu-id="af297-115">The same identity (though not the same entity) can be modeled across multiple Bounded Contexts or microservices.</span></span> <span data-ttu-id="af297-116">Allerdings, das bedeutet nicht, dass in mehreren Kontexten der begrenzt, die dieselbe Entität mit den gleichen Attributen und Logik implementiert würde.</span><span class="sxs-lookup"><span data-stu-id="af297-116">However, that does not imply that the same entity, with the same attributes and logic would be implemented in multiple Bounded Contexts.</span></span> <span data-ttu-id="af297-117">Stattdessen begrenzen Entitäten in unterschiedlichen Kontexten begrenzt, die ihre Attribute und Verhalten auf die erforderlichen in diesem begrenzt, die den Kontext Domäne.</span><span class="sxs-lookup"><span data-stu-id="af297-117">Instead, entities in each Bounded Context limit their attributes and behaviors to those required in that Bounded Context’s domain.</span></span>

<span data-ttu-id="af297-118">Z. B. möglicherweise die Käuferentität die meisten der Attribute für eine Person, die in der Benutzerentität "in das Profil oder die Identität Microservice, einschließlich der Identität definiert sind.</span><span class="sxs-lookup"><span data-stu-id="af297-118">For instance, the buyer entity might have most of a person’s attributes that are defined in the user entity in the profile or identity microservice, including the identity.</span></span> <span data-ttu-id="af297-119">Aber Käuferentität in der Reihenfolge Microservice ggf. weniger Attribute, weil nur bestimmte Käufer-Daten mit den Bestellprozess verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="af297-119">But the buyer entity in the ordering microservice might have fewer attributes, because only certain buyer data is related to the order process.</span></span> <span data-ttu-id="af297-120">Der Kontext der einzelnen Microservice oder begrenzt, die den Kontext wirkt sich auf die Domänenmodell.</span><span class="sxs-lookup"><span data-stu-id="af297-120">The context of each microservice or Bounded Context impacts its domain model.</span></span>

<span data-ttu-id="af297-121">*Domänenentitäten müssen zusätzlich zur Implementierung von Datenattributen Verhalten implementieren.*</span><span class="sxs-lookup"><span data-stu-id="af297-121">*Domain entities must implement behavior in addition to implementing data attributes*</span></span>

<span data-ttu-id="af297-122">Eine Entität "Domain" DDD muss die Domänenlogik oder das Verhalten im Zusammenhang mit der Entity Data (das Objekt im Arbeitsspeicher zugegriffen) implementieren.</span><span class="sxs-lookup"><span data-stu-id="af297-122">A domain entity in DDD must implement the domain logic or behavior related to the entity data (the object accessed in memory).</span></span> <span data-ttu-id="af297-123">Z. B. als Teil einer Order-Entitätsklasse muss Geschäftslogik und Vorgänge, die als Methoden für Aufgaben wie das Hinzufügen von ein Bestellartikel, die datenvalidierung und die gesamte Berechnung implementiert haben.</span><span class="sxs-lookup"><span data-stu-id="af297-123">For example, as part of an order entity class you must have business logic and operations implemented as methods for tasks such as adding an order item, data validation, and total calculation.</span></span> <span data-ttu-id="af297-124">Die Entität Methoden übernehmen die Invarianten und den Regeln der Entität anstatt diese Regeln auf die Anwendungsschicht verteilt.</span><span class="sxs-lookup"><span data-stu-id="af297-124">The entity’s methods take care of the invariants and rules of the entity instead of having those rules spread across the application layer.</span></span>

<span data-ttu-id="af297-125">Abbildung 9 – 8 zeigt eine Entität "Domain", die nicht nur Datenattribute aber Vorgänge oder Methoden mit verwandten Domänenlogik implementiert.</span><span class="sxs-lookup"><span data-stu-id="af297-125">Figure 9-8 shows a domain entity that implements not only data attributes but operations or methods with related domain logic.</span></span>

![](./media/image9.png)

<span data-ttu-id="af297-126">**Abbildung 9 – 8**.</span><span class="sxs-lookup"><span data-stu-id="af297-126">**Figure 9-8**.</span></span> <span data-ttu-id="af297-127">Beispiel für eine Entität "Domain" Entwerfen, implementieren Daten plus Verhalten</span><span class="sxs-lookup"><span data-stu-id="af297-127">Example of a domain entity design implementing data plus behavior</span></span>

<span data-ttu-id="af297-128">In einigen Fällen können Sie natürlich Entitäten haben, die als Teil der Entitätsklasse keine Logik implementieren.</span><span class="sxs-lookup"><span data-stu-id="af297-128">Of course, sometimes you can have entities that do not implement any logic as part of the entity class.</span></span> <span data-ttu-id="af297-129">Dies kann auf untergeordneten Entitäten innerhalb eines Aggregats vorkommen, wenn die untergeordneten Entität keine besondere Logik nicht verfügt, da der Großteil der Logik in den aggregierten Stamm definiert ist.</span><span class="sxs-lookup"><span data-stu-id="af297-129">This can happen in child entities within an aggregate if the child entity does not have any special logic because most of the logic is defined in the aggregate root.</span></span> <span data-ttu-id="af297-130">Wenn Sie eine komplexe Microservice, die einen Großteil der Logik in die Dienstklassen statt in der Domänenentitäten implementiert wurde verfügen, konnte Sie in der anemic Domänenmodell, die im folgenden Abschnitt erläutert fallen.</span><span class="sxs-lookup"><span data-stu-id="af297-130">If you have a complex microservice that has a lot of logic implemented in the service classes instead of in the domain entities, you could be falling into the anemic domain model, explained in the following section.</span></span>

### <a name="rich-domain-model-versus-anemic-domain-model"></a><span data-ttu-id="af297-131">Rich-Domänenmodell im Vergleich zu anemic Domänenmodell</span><span class="sxs-lookup"><span data-stu-id="af297-131">Rich domain model versus anemic domain model</span></span>

<span data-ttu-id="af297-132">In seinen Beitrag [AnemicDomainModel](https://martinfowler.com/bliki/AnemicDomainModel.html), Smell beschreibt ein anemic Domänenmodell auf diese Weise:</span><span class="sxs-lookup"><span data-stu-id="af297-132">In his post [AnemicDomainModel](https://martinfowler.com/bliki/AnemicDomainModel.html), Martin Fowler describes an anemic domain model this way:</span></span>

<span data-ttu-id="af297-133">Die grundlegende Symptom für ein Anemic Domänenmodell ist, dass auf den ersten Blick es reale Sache aussieht.</span><span class="sxs-lookup"><span data-stu-id="af297-133">The basic symptom of an Anemic Domain Model is that at first blush it looks like the real thing.</span></span> <span data-ttu-id="af297-134">Objekte vorhanden sind, viele nach der Nomen in den Domänenbereich benannt wird und diese Objekte mit dem rich Beziehungen und die Struktur, die "true" Domänenmodelle haben verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="af297-134">There are objects, many named after the nouns in the domain space, and these objects are connected with the rich relationships and structure that true domain models have.</span></span> <span data-ttu-id="af297-135">Der Catch angezeigt wird, wenn Sie sehen Sie sich das Verhalten, und Sie feststellen, dass es kaum trifft auf diese Objekte etwas mehr als dienen der Getter und Setter somit.</span><span class="sxs-lookup"><span data-stu-id="af297-135">The catch comes when you look at the behavior, and you realize that there is hardly any behavior on these objects, making them little more than bags of getters and setters.</span></span>

<span data-ttu-id="af297-136">Natürlich, wenn Sie ein Domänenmodell anemic verwenden, diese Datenmodellen verwendet werden aus einer Gruppe von Dienstobjekten (bisher benannte der *Geschäftsebene*) die gesamte Domäne oder Business-Logik erfassen.</span><span class="sxs-lookup"><span data-stu-id="af297-136">Of course, when you use an anemic domain model, those data models will be used from a set of service objects (traditionally named the *business layer*) which capture all the domain or business logic.</span></span> <span data-ttu-id="af297-137">Der Geschäftsebene befindet sich auf das Datenmodell und des Datenmodells nur als Daten verwendet.</span><span class="sxs-lookup"><span data-stu-id="af297-137">The business layer sits on top of the data model and uses the data model just as data.</span></span>

<span data-ttu-id="af297-138">Die anemic Domänenmodell ist nur ein prozeduralen Stil Design.</span><span class="sxs-lookup"><span data-stu-id="af297-138">The anemic domain model is just a procedural style design.</span></span> <span data-ttu-id="af297-139">Anemic Entitätsobjekten sind echte Objekte nicht, weil sie Verhalten (Methoden) fehlt.</span><span class="sxs-lookup"><span data-stu-id="af297-139">Anemic entity objects are not real objects because they lack behavior (methods).</span></span> <span data-ttu-id="af297-140">Sie enthalten nur Dateneigenschaften, und es handelt sich daher nicht eines objektorientierten Entwurfs.</span><span class="sxs-lookup"><span data-stu-id="af297-140">They only hold data properties and thus it is not object-oriented design.</span></span> <span data-ttu-id="af297-141">Verlegen Sie alle Verhalten out in Service-Objekten (der Geschäftsebene) Sie im Wesentlichen zum Schluss [Spaghetti Code](https://en.wikipedia.org/wiki/Spaghetti_code) oder [Transaktion Skripts](https://martinfowler.com/eaaCatalog/transactionScript.html), und daher verlieren Sie die Vorteile, die einem Domänenmodell bietet.</span><span class="sxs-lookup"><span data-stu-id="af297-141">By putting all the behavior out into service objects (the business layer) you essentially end up with [spaghetti code](https://en.wikipedia.org/wiki/Spaghetti_code) or [transaction scripts](https://martinfowler.com/eaaCatalog/transactionScript.html), and therefore you lose the advantages that a domain model provides.</span></span>

<span data-ttu-id="af297-142">Unabhängig davon, wenn Ihre Microservice oder begrenzt, die den Kontext sehr einfach ist (ein CRUD-Dienst) der anemic Domänenmodell in Form von Entitätsobjekten mit nur Dateneigenschaften möglicherweise ausreichend und möglicherweise nicht zu komplexeren DDD-Muster implementieren.</span><span class="sxs-lookup"><span data-stu-id="af297-142">Regardless, if your microservice or Bounded Context is very simple (a CRUD service), the anemic domain model in the form of entity objects with just data properties might be good enough, and it might not be worth implementing more complex DDD patterns.</span></span> <span data-ttu-id="af297-143">In diesem Fall werden einfach persistenzspeicherungsmodell, da Sie nur Daten für CRUD-Zwecke absichtlich eine Entität erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="af297-143">In that case, it will be simply a persistence model, because you have intentionally created an entity with only data for CRUD purposes.</span></span>

<span data-ttu-id="af297-144">Aus diesem Grund Microservices Architekturen perfekt für ein mit mehreren architektonische Ansatz je nach jedem begrenzt, die den Kontext werden ist.</span><span class="sxs-lookup"><span data-stu-id="af297-144">That is why microservices architectures are perfect for a multi-architectural approach depending on each Bounded Context.</span></span> <span data-ttu-id="af297-145">Z. B. in eShopOnContainers, Sortierung Microservice implementiert DDD-Muster, jedoch die Katalog-Microservice, also eine einfache CRUD-Dienst nicht.</span><span class="sxs-lookup"><span data-stu-id="af297-145">For instance, in eShopOnContainers, the ordering microservice implements DDD patterns, but the catalog microservice, which is a simple CRUD service, does not.</span></span>

<span data-ttu-id="af297-146">Einige Personen sagen, dass die anemic Domänenmodell ein Antimuster ist.</span><span class="sxs-lookup"><span data-stu-id="af297-146">Some people say that the anemic domain model is an anti-pattern.</span></span> <span data-ttu-id="af297-147">Dies hängt was Sie implementieren.</span><span class="sxs-lookup"><span data-stu-id="af297-147">It really depends on what you are implementing.</span></span> <span data-ttu-id="af297-148">Ist die Microservice, die Sie erstellen einfach genug (z. B. ein CRUD-Dienst), befolgen die anemic Domänenmodell ein Antimuster ist nicht.</span><span class="sxs-lookup"><span data-stu-id="af297-148">If the microservice you are creating is simple enough (for example, a CRUD service), following the anemic domain model it is not an anti-pattern.</span></span> <span data-ttu-id="af297-149">Wenn Sie müssen die Komplexität einer Microservice Domäne konfigurieren, die zahlreiche sich stetig ändernden Geschäftsregeln enthält, möglicherweise die anemic Domänenmodell ein Antimuster für diesen Microservice oder begrenzt, die den Kontext sein.</span><span class="sxs-lookup"><span data-stu-id="af297-149">However, if you need to tackle the complexity of a microservice’s domain that has a lot of ever-changing business rules, the anemic domain model might be an anti-pattern for that microservice or Bounded Context.</span></span> <span data-ttu-id="af297-150">Entwerfen sie in diesem Fall als eine umfangreiche Modell mit Entitäten enthält, die Daten plus Verhalten als auch zusätzliche DDD-Muster (Aggregate, rückgabewertobjekte usw.) implementieren möglicherweise große Vorteile für den langfristigen Erfolg eine solche Microservice.</span><span class="sxs-lookup"><span data-stu-id="af297-150">In that case, designing it as a rich model with entities containing data plus behavior as well as implementing additional DDD patterns (aggregates, value objects, etc.) might have huge benefits for the long-term success of such a microservice.</span></span>

#### <a name="additional-resources"></a><span data-ttu-id="af297-151">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="af297-151">Additional resources</span></span>

-   <span data-ttu-id="af297-152">**DevIQ. Entität "Domain"**
    [*http://deviq.com/entity/*](http://deviq.com/entity/)</span><span class="sxs-lookup"><span data-stu-id="af297-152">**DevIQ. Domain Entity**
[*http://deviq.com/entity/*](http://deviq.com/entity/)</span></span>

-   <span data-ttu-id="af297-153">**Martin Fowler. Das Domänenmodell**
    [*https://martinfowler.com/eaaCatalog/domainModel.html*](https://martinfowler.com/eaaCatalog/domainModel.html)</span><span class="sxs-lookup"><span data-stu-id="af297-153">**Martin Fowler. The Domain Model**
[*https://martinfowler.com/eaaCatalog/domainModel.html*](https://martinfowler.com/eaaCatalog/domainModel.html)</span></span>

-   <span data-ttu-id="af297-154">**Martin Fowler. Die Anemic Domänenmodell**</span><span class="sxs-lookup"><span data-stu-id="af297-154">**Martin Fowler. The Anemic Domain Model**</span></span>

    <span data-ttu-id="af297-155"><https://martinfowler.com/bliki/AnemicDomainModel.HTML></span><span class="sxs-lookup"><span data-stu-id="af297-155"><https://martinfowler.com/bliki/AnemicDomainModel.html></span></span>

### <a name="the-value-object-pattern"></a><span data-ttu-id="af297-156">Das Wertobjekt-Muster</span><span class="sxs-lookup"><span data-stu-id="af297-156">The Value Object pattern</span></span>

<span data-ttu-id="af297-157">Wie Eric Evans erwähnt wurde, verfügen"viele Objekte nicht konzeptionelle Identität.</span><span class="sxs-lookup"><span data-stu-id="af297-157">As Eric Evans has noted, “Many objects do not have conceptual identity.</span></span> <span data-ttu-id="af297-158">Diese Objekte beschreiben bestimmte Merkmale von etwas."</span><span class="sxs-lookup"><span data-stu-id="af297-158">These objects describe certain characteristics of a thing.”</span></span>

<span data-ttu-id="af297-159">Eine Entität erfordert eine Identität, aber es gibt viele Objekte in einem System, die keine wie das Wertobjekt-Muster.</span><span class="sxs-lookup"><span data-stu-id="af297-159">An entity requires an identity, but there are many objects in a system that do not, like the Value Object pattern.</span></span> <span data-ttu-id="af297-160">Ein Wertobjekt ist ein Objekt mit keine konzeptionelle Identität, die einer Domäne Aspekte beschreiben.</span><span class="sxs-lookup"><span data-stu-id="af297-160">A value object is an object with no conceptual identity that describes a domain aspect.</span></span> <span data-ttu-id="af297-161">Hierbei handelt es sich um Objekte, die Sie instanziieren, um Entwurfselemente darzustellen, die nur vorübergehend betreffen.</span><span class="sxs-lookup"><span data-stu-id="af297-161">These are objects that you instantiate to represent design elements that only concern you temporarily.</span></span> <span data-ttu-id="af297-162">Sie übertragbaren *was* sind, nicht *,* werden.</span><span class="sxs-lookup"><span data-stu-id="af297-162">You care about *what* they are, not *who* they are.</span></span> <span data-ttu-id="af297-163">Beispiele für können Zahlen und Zeichenfolgen enthalten, jedoch auch auf höherer Ebene Konzepten wie Gruppen von Attributen.</span><span class="sxs-lookup"><span data-stu-id="af297-163">Examples include numbers and strings, but can also be higher-level concepts like groups of attributes.</span></span>

<span data-ttu-id="af297-164">Etwas, das eine Entität in einer Microservice ist möglicherweise keiner Entität in einer anderen Microservice, da im zweiten Fall möglicherweise begrenzt, die den Kontext eine andere Bedeutung haben.</span><span class="sxs-lookup"><span data-stu-id="af297-164">Something that is an entity in a microservice might not be an entity in another microservice, because in the second case, the Bounded Context might have a different meaning.</span></span> <span data-ttu-id="af297-165">Z. B. eine Adresse in einer e-Commerce-Anwendung eine Identität, möglicherweise nicht, da es nur eine Gruppe von Attributen des Kunden-Profils für eine Person oder Firma darstellen kann.</span><span class="sxs-lookup"><span data-stu-id="af297-165">For example, an address in an e-commerce application might not have an identity at all, since it might only represent a group of attributes of the customer’s profile for a person or company.</span></span> <span data-ttu-id="af297-166">In diesem Fall sollte die Adresse als ein Wertobjekt klassifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="af297-166">In this case, the address should be classified as a value object.</span></span> <span data-ttu-id="af297-167">In einer Anwendung für Unternehmen ein Strom-Hilfsprogramm konnte die Kundenadresse jedoch wichtig für die Business-Domäne sein.</span><span class="sxs-lookup"><span data-stu-id="af297-167">However, in an application for an electric power utility company, the customer address could be important for the business domain.</span></span> <span data-ttu-id="af297-168">Daher muss die Adresse eine Identität verfügen, damit das Abrechnungssystem direkt mit der Adresse verknüpft werden kann.</span><span class="sxs-lookup"><span data-stu-id="af297-168">Therefore, the address must have an identity so the billing system can be directly linked to the address.</span></span> <span data-ttu-id="af297-169">In diesem Fall muss eine Adresse als eine Entität "Domain" klassifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="af297-169">In that case, an address should be classified as a domain entity.</span></span>

<span data-ttu-id="af297-170">Eine Person mit einem Namen und den Nachnamen in der Regel ist eine Entität, da eine Person Identität verfügt, selbst wenn Sie den Namen und den Nachnamen in der Regel mit einem anderen Satz von Werten, z. B. wenn diese Namen bezieht sich auch auf einer anderen Person.</span><span class="sxs-lookup"><span data-stu-id="af297-170">A person with a name and surname is usually an entity because a person has identity, even if the name and surname coincide with another set of values, such as if those names also refers to a different person.</span></span>

<span data-ttu-id="af297-171">Value-Objekte sind in relationalen Datenbanken ORMs wie EF, Verwaltung schwierig, während im Dokument dienstorientierten Datenbanken, die sie einfacher zu implementieren und zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="af297-171">Value objects are hard to manage in relational databases and ORMs like EF, whereas in document oriented databases they are easier to implement and use.</span></span>

#### <a name="additional-resources"></a><span data-ttu-id="af297-172">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="af297-172">Additional resources</span></span>

-   <span data-ttu-id="af297-173">**Martin Fowler. Wert Objektmuster**
    [*https://martinfowler.com/bliki/ValueObject.html*](https://martinfowler.com/bliki/ValueObject.html)</span><span class="sxs-lookup"><span data-stu-id="af297-173">**Martin Fowler. Value Object pattern**
[*https://martinfowler.com/bliki/ValueObject.html*](https://martinfowler.com/bliki/ValueObject.html)</span></span>

-   <span data-ttu-id="af297-174">**Wert des Objekts**
    [*http://deviq.com/value-object/*](http://deviq.com/value-object/)</span><span class="sxs-lookup"><span data-stu-id="af297-174">**Value Object**
[*http://deviq.com/value-object/*](http://deviq.com/value-object/)</span></span>

-   <span data-ttu-id="af297-175">**Wert von Objekten im Test-Driven Development**
    [*https://leanpub.com/tdd-ebook/read\#Leanpub-Auto-Wert-Objekte*](https://leanpub.com/tdd-ebook/read#leanpub-auto-value-objects)</span><span class="sxs-lookup"><span data-stu-id="af297-175">**Value Objects in Test-Driven Development**
[*https://leanpub.com/tdd-ebook/read\#leanpub-auto-value-objects*](https://leanpub.com/tdd-ebook/read#leanpub-auto-value-objects)</span></span>

-   <span data-ttu-id="af297-176">**Eric Evans. Domain Driven Design: Tackling, Complexity in the Heart of Software wird.**</span><span class="sxs-lookup"><span data-stu-id="af297-176">**Eric Evans. Domain-Driven Design: Tackling Complexity in the Heart of Software.**</span></span> <span data-ttu-id="af297-177">(Book; enthält eine Erläuterung der Value-Objekte) [ *https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/*](https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/)</span><span class="sxs-lookup"><span data-stu-id="af297-177">(Book; includes a discussion of value objects) [*https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/*](https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/)</span></span>

### <a name="the-aggregate-pattern"></a><span data-ttu-id="af297-178">Die Aggregate-Muster</span><span class="sxs-lookup"><span data-stu-id="af297-178">The Aggregate pattern</span></span>

<span data-ttu-id="af297-179">Ein Domänenmodell enthält Cluster von verschiedenen Datenentitäten und Prozesse, die einen signifikanten Bereich von Funktionen, z. B. Reihenfolge vertragserfüllung oder Inventur steuern können.</span><span class="sxs-lookup"><span data-stu-id="af297-179">A domain model contains clusters of different data entities and processes that can control a significant area of functionality, such as order fulfilment or inventory.</span></span> <span data-ttu-id="af297-180">Eine differenziertere DDD Einheit ist das Aggregat, das beschreibt einen Cluster oder eine Gruppe von Entitäten und Verhaltensweisen, die als eine zusammenhängende Einheit behandelt werden können.</span><span class="sxs-lookup"><span data-stu-id="af297-180">A more fine-grained DDD unit is the aggregate, which describes a cluster or group of entities and behaviors that can be treated as a cohesive unit.</span></span>

<span data-ttu-id="af297-181">Sie definieren in der Regel ein Aggregat basierend auf der Transaktionen, die Sie benötigen.</span><span class="sxs-lookup"><span data-stu-id="af297-181">You usually define an aggregate based on the transactions that you need.</span></span> <span data-ttu-id="af297-182">Ein klassisches Beispiel ist eine Bestellung, die auch eine Liste der Bestellartikel enthält.</span><span class="sxs-lookup"><span data-stu-id="af297-182">A classic example is an order that also contains a list of order items.</span></span> <span data-ttu-id="af297-183">Ein Bestellartikel werden in der Regel eine Entität.</span><span class="sxs-lookup"><span data-stu-id="af297-183">An order item will usually be an entity.</span></span> <span data-ttu-id="af297-184">Es ist aber eine untergeordnete Entität innerhalb der Reihenfolge Aggregat, das auch die Order-Entität als seine Stammentität, in der Regel mit dem Namen eines aggregierten Stammverzeichnis enthält.</span><span class="sxs-lookup"><span data-stu-id="af297-184">But it will be a child entity within the order aggregate, which will also contain the order entity as its root entity, typically called an aggregate root.</span></span>

<span data-ttu-id="af297-185">Identifizieren von Aggregaten kann schwierig sein.</span><span class="sxs-lookup"><span data-stu-id="af297-185">Identifying aggregates can be hard.</span></span> <span data-ttu-id="af297-186">Ein Aggregat ist eine Gruppe von Objekten, die zusammen konsistent sein muss, aber einfach nicht möglich, wählen Sie eine Gruppe von Objekten und beschriften Sie sie ein Aggregat.</span><span class="sxs-lookup"><span data-stu-id="af297-186">An aggregate is a group of objects that must be consistent together, but you cannot just pick a group of objects and label them an aggregate.</span></span> <span data-ttu-id="af297-187">Sie müssen mit einer Domäne Konzept beginnen und überlegen Sie sich die Entitäten, die in den am häufigsten verwendeten Transaktionen im Zusammenhang mit diesem Konzept verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="af297-187">You must start with a domain concept and think about the entities that are used in the most common transactions related to that concept.</span></span> <span data-ttu-id="af297-188">Diese Entitäten, die im Hinblick auf Transaktionen konsistent sein müssen sind, was ein Aggregat bildet.</span><span class="sxs-lookup"><span data-stu-id="af297-188">Those entities that need to be transactionally consistent are what forms an aggregate.</span></span> <span data-ttu-id="af297-189">Darum geht, Transaktionsvorgänge ist wahrscheinlich die beste Möglichkeit, Aggregate zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="af297-189">Thinking about transaction operations is probably the best way to identify aggregates.</span></span>

### <a name="the-aggregate-root-or-root-entity-pattern"></a><span data-ttu-id="af297-190">Das Aggregieren Stamm- oder Stammentität-Muster</span><span class="sxs-lookup"><span data-stu-id="af297-190">The Aggregate Root or Root Entity pattern</span></span>

<span data-ttu-id="af297-191">Ein Aggregat ist mindestens eine Entität besteht: aggregieren Stamm, auch als Stammentität oder primäre Ientity bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="af297-191">An aggregate is composed of at least one entity: the aggregate root, also called root entity or primary ientity.</span></span> <span data-ttu-id="af297-192">Es kann darüber hinaus mehrere untergeordnete Entitäten und rückgabewertobjekte mit allen Entitäten und Objekte, die zusammenarbeiten, um das erforderliche Verhalten und Transaktionen implementiert haben.</span><span class="sxs-lookup"><span data-stu-id="af297-192">Additionally, it can have multiple child entities and value objects, with all entities and objects working together to implement required behavior and transactions.</span></span>

<span data-ttu-id="af297-193">Eine aggregierte Stamm dient zum Sicherstellen der Konsistenz des Aggregats; Es sollte der einzige Einstiegspunkt für Updates des Aggregats über Methoden oder Vorgänge im aggregatfunktionsaufruf Stammklasse.</span><span class="sxs-lookup"><span data-stu-id="af297-193">The purpose of an aggregate root is to ensure the consistency of the aggregate; it should be the only entry point for updates to the aggregate through methods or operations in the aggregate root class.</span></span> <span data-ttu-id="af297-194">Sie sollten Änderungen an Entitäten innerhalb des Aggregats nur über den aggregierten Stamm vornehmen.</span><span class="sxs-lookup"><span data-stu-id="af297-194">You should make changes to entities within the aggregate only via the aggregate root.</span></span> <span data-ttu-id="af297-195">Es ist das Aggregat Konsistenz Guardian, und berücksichtigt alle Invarianten und Konsistenzregeln, die Sie möglicherweise zur Einhaltung in Ihrer Aggregat.</span><span class="sxs-lookup"><span data-stu-id="af297-195">It is the aggregate’s consistency guardian, taking into account all the invariants and consistency rules you might need to comply with in your aggregate.</span></span> <span data-ttu-id="af297-196">Wenn Sie eine untergeordnete Entität oder Wert Objekt unabhängig ändern, kann nicht aggregierte Stamm stellen Sie sicher, dass das Aggregat in einem gültigen Zustand befindet.</span><span class="sxs-lookup"><span data-stu-id="af297-196">If you change a child entity or value object independently, the aggregate root cannot ensure that the aggregate is in a valid state.</span></span> <span data-ttu-id="af297-197">Es wäre z. B. eine Tabelle mit einer losen bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="af297-197">It would be like a table with a loose leg.</span></span> <span data-ttu-id="af297-198">Verwalten von Konsistenz ist die Hauptaufgabe des Stamms aggregieren.</span><span class="sxs-lookup"><span data-stu-id="af297-198">Maintaining consistency is the main purpose of the aggregate root.</span></span>

<span data-ttu-id="af297-199">In Abbildung 9 – 9, sehen Sie Beispiel-Aggregate, wie der Käufer aggregate, enthält eine einzelne Entität (Käufer über die aggregierten Root).</span><span class="sxs-lookup"><span data-stu-id="af297-199">In Figure 9-9, you can see sample aggregates like the buyer aggregate, which contains a single entity (the aggregate root Buyer).</span></span> <span data-ttu-id="af297-200">Das Order-Aggregat enthält mehrere Entitäten und ein Wertobjekt.</span><span class="sxs-lookup"><span data-stu-id="af297-200">The order aggregate contains multiple entities and a value object.</span></span>

![](./media/image10.png)

<span data-ttu-id="af297-201">**Abbildung 9 – 9**.</span><span class="sxs-lookup"><span data-stu-id="af297-201">**Figure 9-9**.</span></span> <span data-ttu-id="af297-202">Beispiel für Aggregate mit mehrere oder einzelne Entitäten</span><span class="sxs-lookup"><span data-stu-id="af297-202">Example of aggregates with multiple or single entities</span></span>

<span data-ttu-id="af297-203">Beachten Sie, dass der Käufer Aggregat zusätzliche untergeordnete-Entitäten, abhängig von Ihrer Problemdomäne sein kann, wie in der Reihenfolge Microservice in der Anwendung der eShopOnContainers-Verweis.</span><span class="sxs-lookup"><span data-stu-id="af297-203">Note that the Buyer aggregate could have additional child entities, depending on your domain, as it does in the ordering microservice in the eShopOnContainers reference application.</span></span> <span data-ttu-id="af297-204">Abbildung 9-9 zeigt nur einen Fall, in dem der Käufer eine einzelne Entität als ein Beispiel für ein Aggregat verfügt, nur einen aggregierten Stamm enthält.</span><span class="sxs-lookup"><span data-stu-id="af297-204">Figure 9-9 just illustrates a case in which the buyer has a single entity, as an example of an aggregate that contains only an aggregate root.</span></span>

<span data-ttu-id="af297-205">Zum Verwalten der Trennung von Aggregaten und eindeutige Grenzen zwischen ihnen beibehalten, es empfiehlt sich in einem Domänenmodell DDD, direkte Navigation zwischen Aggregate und nur mit dem das Feld Fremdschlüssel (FS) zu unterbinden, wie im implementiert ist die [ Sortierung Microservice Domänenmodell](https://github.com/dotnet-architecture/eShopOnContainers/blob/master/src/Services/Ordering/Ordering.Domain/AggregatesModel/OrderAggregate/Order.cs) in eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="af297-205">In order to maintain separation of aggregates and keep clear boundaries between them, it is a good practice in a DDD domain model to disallow direct navigation between aggregates and only having the foreign key (FK) field, as implemented in the [Ordering microservice domain model](https://github.com/dotnet-architecture/eShopOnContainers/blob/master/src/Services/Ordering/Ordering.Domain/AggregatesModel/OrderAggregate/Order.cs) in eShopOnContainers.</span></span> <span data-ttu-id="af297-206">Die Order-Entität verfügt über nur ein FK Feld für den Käufer, aber keine EF Core Navigationseigenschaft, wie im folgenden Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="af297-206">The Order entity only has a FK field for the buyer, but not an EF Core navigation property, as shown in the following code:</span></span>

```csharp
public class Order : Entity, IAggregateRoot
{
    private DateTime _orderDate;
    public Address Address { get; private set; }
    private int? _buyerId; //FK pointing to a different aggregate root
    public OrderStatus OrderStatus { get; private set; }
}
```

<span data-ttu-id="af297-207">Identifizieren von und Arbeiten mit Aggregaten erfordert Forschung und benutzerfreundlichkeit.</span><span class="sxs-lookup"><span data-stu-id="af297-207">Identifying and working with aggregates requires research and experience.</span></span> <span data-ttu-id="af297-208">Weitere Informationen finden Sie die folgenden zusätzlichen Ressourcenliste.</span><span class="sxs-lookup"><span data-stu-id="af297-208">For more information, see the following Additional resources list.</span></span>

#### <a name="additional-resources"></a><span data-ttu-id="af297-209">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="af297-209">Additional resources</span></span>

-   <span data-ttu-id="af297-210">**Vaughn Vernon. Effektive aggregieren Design - Teil I: Modellieren einer einzelnen Gesamtverstärkung**
    [*https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD\_COMMUNITY\_ABHANDLUNG\_ Aggregate\_Teil\_1. Pdf*](https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_1.pdf)</span><span class="sxs-lookup"><span data-stu-id="af297-210">**Vaughn Vernon. Effective Aggregate Design - Part I: Modeling a Single Aggregate**
[*https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD\_COMMUNITY\_ESSAY\_AGGREGATES\_PART\_1.pdf*](https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_1.pdf)</span></span>

-   <span data-ttu-id="af297-211">**Vaughn Vernon. Effektive aggregieren Design - Teil II: Festlegen, dass Aggregate zusammenarbeiten**
    *<https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_2.pdf>*</span><span class="sxs-lookup"><span data-stu-id="af297-211">**Vaughn Vernon. Effective Aggregate Design - Part II: Making Aggregates Work Together**
*<https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_2.pdf> *</span></span>

-   <span data-ttu-id="af297-212">**Vaughn Vernon. Effektive aggregieren Design - Teil III: Erhalten von Einblicken, durch die Ermittlung**
    *<https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_3.pdf>*</span><span class="sxs-lookup"><span data-stu-id="af297-212">**Vaughn Vernon. Effective Aggregate Design - Part III: Gaining Insight Through Discovery**
*<https://vaughnvernon.co/wordpress/wp-content/uploads/2014/10/DDD_COMMUNITY_ESSAY_AGGREGATES_PART_3.pdf> *</span></span>

-   <span data-ttu-id="af297-213">**Sergey Grybniak. Taktisch Entwurfsmuster DDD**
    [*https://www.codeproject.com/Articles/1164363/Domain-Driven-Design-Tactical-Design-Patterns-Part*](https://www.codeproject.com/Articles/1164363/Domain-Driven-Design-Tactical-Design-Patterns-Part)</span><span class="sxs-lookup"><span data-stu-id="af297-213">**Sergey Grybniak. DDD Tactical Design Patterns**
[*https://www.codeproject.com/Articles/1164363/Domain-Driven-Design-Tactical-Design-Patterns-Part*](https://www.codeproject.com/Articles/1164363/Domain-Driven-Design-Tactical-Design-Patterns-Part)</span></span>

-   <span data-ttu-id="af297-214">**Chris Rißling. Entwickeln von transaktionalen Microservices Aggregate**
    [*https://www.infoq.com/articles/microservices-aggregates-events-cqrs-part-1-richardson*](https://www.infoq.com/articles/microservices-aggregates-events-cqrs-part-1-richardson)</span><span class="sxs-lookup"><span data-stu-id="af297-214">**Chris Richardson. Developing Transactional Microservices Using Aggregates**
[*https://www.infoq.com/articles/microservices-aggregates-events-cqrs-part-1-richardson*](https://www.infoq.com/articles/microservices-aggregates-events-cqrs-part-1-richardson)</span></span>

-   <span data-ttu-id="af297-215">**DevIQ. Das Aggregieren Muster**
    [*http://deviq.com/aggregate-pattern/*](http://deviq.com/aggregate-pattern/)</span><span class="sxs-lookup"><span data-stu-id="af297-215">**DevIQ. The Aggregate pattern**
[*http://deviq.com/aggregate-pattern/*](http://deviq.com/aggregate-pattern/)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="af297-216">[Vorherigen] (Ddd-orientierte-microservice.md) [weiter] (Net-Core-Microservice-Domain-model.md)</span><span class="sxs-lookup"><span data-stu-id="af297-216">[Previous] (ddd-oriented-microservice.md) [Next] (net-core-microservice-domain-model.md)</span></span>
