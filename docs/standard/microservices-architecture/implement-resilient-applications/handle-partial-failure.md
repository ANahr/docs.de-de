---
title: Behandlung von teilweise fehlerhaft.
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Behandlung von teilweise fehlerhaft."
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: b7d16acf3de2d395da70e8f46e59c129dec24f71
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/18/2017
---
# <a name="handling-partial-failure"></a><span data-ttu-id="ad438-104">Behandlung von teilweise fehlerhaft.</span><span class="sxs-lookup"><span data-stu-id="ad438-104">Handling partial failure</span></span>

<span data-ttu-id="ad438-105">Verteilter Systeme wie Microservices-basierte Anwendungen ist eine partielle allgegenwärtigen Ausfallrisiko.</span><span class="sxs-lookup"><span data-stu-id="ad438-105">In distributed systems like microservices-based applications, there is an ever-present risk of partial failure.</span></span> <span data-ttu-id="ad438-106">Z. B. ein einzelnen Microservice-Container kann fehlschlagen, möglicherweise nicht verfügbar für kurze Zeit reagieren bzw. einen einzelnen virtuellen Computer oder Server kann abstürzen.</span><span class="sxs-lookup"><span data-stu-id="ad438-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="ad438-107">Da Clients und Dienste separate Vorgänge dar, ein Dienst zeitnah auf einem Client-Anforderung reagiert möglicherweise nicht.</span><span class="sxs-lookup"><span data-stu-id="ad438-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="ad438-108">Der Dienst möglicherweise überladene ist und antwortet extrem langsam, Anforderungen oder einfach möglicherweise nicht verfügbar für kurze Zeit aufgrund von Netzwerkproblemen.</span><span class="sxs-lookup"><span data-stu-id="ad438-108">The service might be overloaded and responding extremely slowly to requests, or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="ad438-109">Angenommen Sie, die Detailseite Reihenfolge aus der eShopOnContainers beispielanwendung.</span><span class="sxs-lookup"><span data-stu-id="ad438-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="ad438-110">Wenn die Sortierung Microservice nicht reagiert bei der Benutzer versucht, einen Auftrag, eine fehlerhafte Implementierung des Clientprozesses (MVC-Web-Anwendung) zu senden – Wenn der Clientcode synchrone RPCs mit kein Timeout verwendet würde beispielsweise – Threads für unbegrenzte Zeit blockiert würde eine Antwort warten.</span><span class="sxs-lookup"><span data-stu-id="ad438-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="ad438-111">Zusätzlich zur Erstellung von einem Benutzer negatives Erlebnis, alle nicht reagierenden Wait belegt oder blockiert einen Thread, und Threads sind äußerst sinnvoll sein, in hoch skalierbare Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="ad438-111">In addition to creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="ad438-112">Wenn viele blockierte Threads vorhanden sind, kann schließlich der Laufzeit der Anwendung nicht mehr genügend Threads ausführen.</span><span class="sxs-lookup"><span data-stu-id="ad438-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="ad438-113">In diesem Fall die Anwendung kann reagiert Global anstelle von nur teilweise nicht mehr reagiert, wie in Abbildung 10 – 1.</span><span class="sxs-lookup"><span data-stu-id="ad438-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as show in Figure 10-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="ad438-114">**Abbildung 10 – 1**.</span><span class="sxs-lookup"><span data-stu-id="ad438-114">**Figure 10-1**.</span></span> <span data-ttu-id="ad438-115">Teilweise Ausfälle aufgrund von Abhängigkeiten, die auf Thread-dienstverfügbarkeit auswirkt</span><span class="sxs-lookup"><span data-stu-id="ad438-115">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="ad438-116">In einer großen Microservices-basierte Anwendung kann jeder partiellen Fehler verstärkt werden, insbesondere dann, wenn die meisten der internen Microservices Interaktion basiert auf synchrone HTTP-Aufrufe (das eine Antimuster gilt).</span><span class="sxs-lookup"><span data-stu-id="ad438-116">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="ad438-117">Überlegen Sie sich ein System, das der eingehenden Aufrufe pro Tag Millionen empfängt.</span><span class="sxs-lookup"><span data-stu-id="ad438-117">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="ad438-118">Wenn Ihr System ein schlechtes Design, das lange statusketten synchronen HTTP-Aufrufen basiert aufweist, können diese eingehende Aufrufe führen viele weitere Millionen von ausgehenden aufrufen (angenommen, ein Verhältnis von 1:4) zu zahlreichen internen Microservices als synchrone Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="ad438-118">If your system has a bad design that is based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="ad438-119">Diese Situation ist in Abbildung 10-2, insbesondere Abhängigkeit gezeigt \#3.</span><span class="sxs-lookup"><span data-stu-id="ad438-119">This situation is shown in Figure 10-2, especially dependency \#3.</span></span>

![](./media/image2.png)

<span data-ttu-id="ad438-120">**Abbildung 10 – 2**.</span><span class="sxs-lookup"><span data-stu-id="ad438-120">**Figure 10-2**.</span></span> <span data-ttu-id="ad438-121">Die Auswirkungen einen falschen Entwurf mit lange statusketten HTTP-Anforderungen</span><span class="sxs-lookup"><span data-stu-id="ad438-121">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="ad438-122">Gelegentliche Fehler praktisch ist sichergestellt, dass in einer verteilten und cloud-basierten System, auch wenn jede Abhängigkeit selbst exzellenten Verfügbarkeit hat.</span><span class="sxs-lookup"><span data-stu-id="ad438-122">Intermittent failure is virtually guaranteed in a distributed and cloud based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="ad438-123">Dies sollte ein Fakt sein, den Sie berücksichtigen müssen.</span><span class="sxs-lookup"><span data-stu-id="ad438-123">This should be a fact you need to consider.</span></span>

<span data-ttu-id="ad438-124">Wenn Sie keine entwerfen und Implementieren von Techniken, um die Fehlertoleranz zu gewährleisten, können selbst kleine Ausfallzeiten verstärkt werden.</span><span class="sxs-lookup"><span data-stu-id="ad438-124">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="ad438-125">Beispielsweise würde 50 Abhängigkeiten mit 99,99 % Verfügbarkeit in mehreren Stunden Ausfallzeiten monatlich aufgrund dieser sich allmählich ausbreitenden Wirkung.</span><span class="sxs-lookup"><span data-stu-id="ad438-125">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="ad438-126">Fällt eine Abhängigkeit Microservice Führungen eine große Anzahl von Anforderungen, Fehler schnell stark beanspruchen alle verfügbare Anforderung Threads in jedem Dienst und kann die gesamte Anwendung, stürzt ab.</span><span class="sxs-lookup"><span data-stu-id="ad438-126">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![](./media/image3.png)

<span data-ttu-id="ad438-127">**Abbildung 10 – 3**.</span><span class="sxs-lookup"><span data-stu-id="ad438-127">**Figure 10-3**.</span></span> <span data-ttu-id="ad438-128">Teilweise verstärkt von Microservices mit lange statusketten synchronen Aufrufen von HTTP-Fehler</span><span class="sxs-lookup"><span data-stu-id="ad438-128">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="ad438-129">Zur Minimierung dieses Problems im Abschnitt "*asynchrone Microservice Integration Erzwingen des Microservice Autonomie*" (in der Architektur Kapitel) gefördert asynchronen Kommunikation über die interne Verwendung Microservices.</span><span class="sxs-lookup"><span data-stu-id="ad438-129">To minimize this problem, in the section "*Asynchronous microservice integration enforce microservice’s autonomy*” (in the architecture chapter), we encouraged you to use asynchronous communication across the internal microservices.</span></span> <span data-ttu-id="ad438-130">Wir erläutern kurz mehr im nächsten Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="ad438-130">We briefly explain more in the next section.</span></span>

<span data-ttu-id="ad438-131">Darüber hinaus ist es wichtig, dass Sie Ihre Microservices und Clientanwendungen teilfehler behandeln entwerfen – d. h. robusten Microservices und Client Anwendungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="ad438-131">In addition, it is essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="ad438-132">[Vorherigen] (index.md) [weiter] (teilweise Fehler strategies.md)</span><span class="sxs-lookup"><span data-stu-id="ad438-132">[Previous] (index.md) [Next] (partial-failure-strategies.md)</span></span>
