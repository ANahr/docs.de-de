---
title: Implementieren des ereignisbasierten Kommunikation zwischen Microservices (integrationsereignisse)
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Implementieren des ereignisbasierten Kommunikation zwischen Microservices (integrationsereignisse)"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: e438607ab3549d63b89bef6af64c6723a4cac950
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/18/2017
---
# <a name="implementing-event-based-communication-between-microservices-integration-events"></a><span data-ttu-id="d5bdd-104">Implementieren des ereignisbasierten Kommunikation zwischen Microservices (integrationsereignisse)</span><span class="sxs-lookup"><span data-stu-id="d5bdd-104">Implementing event-based communication between microservices (integration events)</span></span>

<span data-ttu-id="d5bdd-105">Wie oben beschrieben, bei der Verwendung des ereignisbasierten Kommunikation, veröffentlicht ein Microservice ein Ereignis, wenn etwas relevante Fall z. B. wenn es sich um eine Geschäftseinheit aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-105">As described earlier, when you use event-based communication, a microservice publishes an event when something notable happens, such as when it updates a business entity.</span></span> <span data-ttu-id="d5bdd-106">Diese Ereignisse abonnieren, andere Microservices.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-106">Other microservices subscribe to those events.</span></span> <span data-ttu-id="d5bdd-107">Wenn ein Microservice ein Ereignis empfängt, können sie eigene Geschäftseinheiten aktualisieren, die weitere Ereignisse, die zu veröffentlichenden verursachen könnten.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-107">When a microservice receives an event, it can update its own business entities, which might lead to more events being published.</span></span> <span data-ttu-id="d5bdd-108">Dieses Veröffentlichen/Abonnieren-Systems erfolgt in der Regel über eine Implementierung von einem Ereignisbus.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-108">This publish/subscribe system is usually performed by using an implementation of an event bus.</span></span> <span data-ttu-id="d5bdd-109">Die Ereignisbus kann als eine Schnittstelle mit der-API benötigt, um Ihr Abonnement auf Ereignisse und zum Veröffentlichen von Ereignissen entworfen werden.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-109">The event bus can be designed as an interface with the API needed to subscribe and unsubscribe to events and to publish events.</span></span> <span data-ttu-id="d5bdd-110">Sie können auch veranlassen, dass eine oder mehrere Implementierungen basierend auf einer Inter-process oder messaging-Kommunikation, z. B. eine Nachrichtenwarteschlange oder einen Servicebus, der asynchrone Kommunikation und ein Veröffentlichen/Abonnieren-Modell unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-110">It can also have one or more implementations based on any inter-process or messaging communication, such as a messaging queue or a service bus that supports asynchronous communication and a publish/subscribe model.</span></span>

<span data-ttu-id="d5bdd-111">Ereignisse können Geschäftstransaktionen implementieren, die mehrere Dienste umfassen die letztliche Konsistenz zwischen diesen Diensten enthält.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-111">You can use events to implement business transactions that span multiple services, which gives you eventual consistency between those services.</span></span> <span data-ttu-id="d5bdd-112">Eine letztendlich konsistente Transaktion besteht aus einer Reihe von verteilten Aktionen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-112">An eventually consistent transaction consists of a series of distributed actions.</span></span> <span data-ttu-id="d5bdd-113">Bei jeder Aktion die Microservice eine Geschäftseinheit aktualisiert und veröffentlicht ein Ereignis, das die nächste Aktion ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-113">At each action, the microservice updates a business entity and publishes an event that triggers the next action.</span></span>

![](./media/image19.PNG)

<span data-ttu-id="d5bdd-114">**Abbildung 8 – 18**.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-114">**Figure 8-18**.</span></span> <span data-ttu-id="d5bdd-115">Ereignisgesteuerte Kommunikation basierend auf einer-Ereignisbus</span><span class="sxs-lookup"><span data-stu-id="d5bdd-115">Event-driven communication based on an event bus</span></span>

<span data-ttu-id="d5bdd-116">In diesem Abschnitt wird beschrieben, wie Sie diese Art von Kommunikation mit .NET implementieren können, mithilfe einer generischen Bus Ereignisschnittstelle, wie in Abbildung 8-18 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-116">This section describes how you can implement this type of communication with .NET by using a generic event bus interface, as shown in Figure 8-18.</span></span> <span data-ttu-id="d5bdd-117">Es gibt mehrere mögliche Implementierungen, jeweils eine andere Technologie oder ein z. B. RabbitMQ, Azure Service Bus, oder eine beliebige andere open Source-Drittanbieter- oder kommerziellen Servicebus-Infrastruktur verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-117">There are multiple potential implementations, each using a different technology or infrastructure such as RabbitMQ, Azure Service Bus, or any other third-party open source or commercial service bus.</span></span>

## <a name="using-message-brokers-and-services-buses-for-production-systems"></a><span data-ttu-id="d5bdd-118">Mithilfe der Nachricht Brokern und Dienste Bussen für Produktionssysteme</span><span class="sxs-lookup"><span data-stu-id="d5bdd-118">Using message brokers and services buses for production systems</span></span>

<span data-ttu-id="d5bdd-119">Wie in der Architektur Abschnitt erwähnt, können Sie mehrere Messagingtechnologien für die Implementierung Ihrer abstrakte Ereignisbus auswählen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-119">As noted in the architecture section, you can choose from multiple messaging technologies for implementing your abstract event bus.</span></span> <span data-ttu-id="d5bdd-120">Aber diese Technologien sind auf unterschiedlichen Ebenen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-120">But these technologies are at different levels.</span></span> <span data-ttu-id="d5bdd-121">Beispielsweise ist RabbitMQ ein Broker Messagingtransport auf einer niedrigeren Ebene als kommerziellen Produkten, wie etwa Azure Service Bus, NServiceBus, MassTransit oder Brighter.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-121">For instance, RabbitMQ, a messaging broker transport, is at a lower level than commercial products like Azure Service Bus, NServiceBus, MassTransit, or Brighter.</span></span> <span data-ttu-id="d5bdd-122">Die meisten dieser Produkte können zusätzlich RabbitMQ oder Azure Service Bus arbeiten.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-122">Most of these products can work on top of either RabbitMQ or Azure Service Bus.</span></span> <span data-ttu-id="d5bdd-123">Die Auswahl des Produkts, hängt davon ab, wie viele Funktionen und wie viel Out-of-the-Box-Skalierbarkeit, die Sie für Ihre Anwendung benötigen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-123">Your choice of product depends on how many features and how much out-of-the-box scalability you need for your application.</span></span>

<span data-ttu-id="d5bdd-124">Für die Implementierung nur ein Ereignis Bus Proof-of-Concept für Ihre Entwicklungsumgebung, wie im Beispiel eShopOnContainers kann eine einfache Implementierung oberhalb RabbitMQ ausgeführt, die als Container ausreichend sein.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-124">For implementing just an event bus proof-of-concept for your development environment, as in the eShopOnContainers sample, a simple implementation on top of RabbitMQ running as a container might be enough.</span></span> <span data-ttu-id="d5bdd-125">Aber für unternehmenswichtige und Produktionssysteme, die hohe Skalierbarkeit benötigen, empfiehlt zum Auswerten und Azure Service Fabric verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-125">But for mission-critical and production systems that need high scalability, you might want to evaluate and use Azure Service Fabric.</span></span> <span data-ttu-id="d5bdd-126">Wenn Sie die allgemeine Abstraktionen benötigen und umfangreichere Funktionen wie [Sagas](https://docs.particular.net/nservicebus/sagas/) für lang andauernde Prozesse, die verteilte Entwicklung einfacher, andere kommerzielle und Open-Source-Dienst-Bussen wie NServiceBus MassTransit, stellen und Helleren werden ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-126">If you require high-level abstractions and richer features like [sagas](https://docs.particular.net/nservicebus/sagas/) for long-running processes that make distributed development easier, other commercial and open-source service buses like NServiceBus, MassTransit, and Brighter are worth evaluating.</span></span> <span data-ttu-id="d5bdd-127">Natürlich Sie immer eigene Servicebus-Features auf unterer Betriebsebene Technologien wie RabbitMQ und Docker erstellen, aber die Arbeit erforderlich, um das Rad neu zu erfinden ist möglicherweise für eine benutzerdefinierte Enterprise-Anwendung zu kostenintensiv.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-127">Of course, you could always build your own service bus features on top of lower-level technologies like RabbitMQ and Docker, but the work needed to reinvent the wheel might be too costly for a custom enterprise application.</span></span>

<span data-ttu-id="d5bdd-128">Wie bereits erwähnt wurde: die Beispiel-Ereignis Bus Speicherabstraktionen und die Implementierung, die in der Stichprobe eShopOnContainers präsentiert dienen nur als ein Proof of Concept verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-128">To reiterate: the sample event bus abstractions and implementation showcased in the eShopOnContainers sample are intended to be used only as a proof of concept.</span></span> <span data-ttu-id="d5bdd-129">Nachdem Sie entschieden haben, dass Sie asynchrone und ereignisgesteuerte Kommunikation verfügen, wie im aktuellen Abschnitt erläutert möchten, sollten Sie das Servicebus-Produkt auswählen, das Ihren Anforderungen am besten entspricht.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-129">Once you have decided that you want to have asynchronous and event-driven communication, as explained in the current section, you should choose the service bus product that best fits your needs.</span></span>

## <a name="integration-events"></a><span data-ttu-id="d5bdd-130">-Integrationsereignisse</span><span class="sxs-lookup"><span data-stu-id="d5bdd-130">Integration events</span></span>

<span data-ttu-id="d5bdd-131">Integrationsereignisse dienen zum Domänenstatus synchron über mehrere Microservices oder externen Systemen zu schalten.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-131">Integration events are used for bringing domain state in sync across multiple microservices or external systems.</span></span> <span data-ttu-id="d5bdd-132">Dies erfolgt durch integrationsereignisse außerhalb der Microservice veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-132">This is done by publishing integration events outside the microservice.</span></span> <span data-ttu-id="d5bdd-133">Wenn ein Ereignis an mehrere Empfänger Microservices (um so viele Microservices wie das Integration Ereignis abonniert werden) veröffentlicht wird, behandelt in jeder Empfänger Microservice der passenden Ereignishandler das Ereignis an.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-133">When an event is published to multiple receiver microservices (to as many microservices as are subscribed to the integration event), the appropriate event handler in each receiver microservice handles the event.</span></span>

<span data-ttu-id="d5bdd-134">Ein Ereignis für die Integration ist im Grunde eine Daten-Betrieb-Klasse, wie im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="d5bdd-134">An integration event is basically a data-holding class, as in the following example:</span></span>

```csharp
public class ProductPriceChangedIntegrationEvent : IntegrationEvent
{
    public int ProductId { get; private set; }
    public decimal NewPrice { get; private set; }
    public decimal OldPrice { get; private set; }

    public ProductPriceChangedIntegrationEvent(int productId, decimal newPrice,
        decimal oldPrice)
    {
        ProductId = productId;
        NewPrice = newPrice;
        OldPrice = oldPrice;
    }
}
```

<span data-ttu-id="d5bdd-135">Die Integration-Ereignisklasse kann einfach sein; Beispielsweise kann es eine GUID für ihre-ID enthalten.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-135">The integration event class can be simple; for example, it might contain a GUID for its ID.</span></span>

<span data-ttu-id="d5bdd-136">Die integrationsereignisse können auf der Ebene des einzelnen Microservice definiert werden, damit sie von anderen Microservices, auf eine Weise vergleichbar sein, um wie ViewModels, auf dem Server und Client definiert werden entkoppelt werden.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-136">The integration events can be defined at the application level of each microservice, so they are decoupled from other microservices, in a way comparable to how ViewModels are defined in the server and client.</span></span> <span data-ttu-id="d5bdd-137">Was wird nicht empfohlen wird eine allgemeine Integration Ereignisse über mehrere Microservices bibliothekfreigabe; auf diese Weise würde diese Microservices mit einer einzelnen Definition Daten ereignisbibliothek Kopplung.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-137">What is not recommended is sharing a common integration events library across multiple microservices; doing that would be coupling those microservices with a single event definition data library.</span></span> <span data-ttu-id="d5bdd-138">Sie sollten keine nachholen, dem Grund, dass Sie keine allgemeine Domänenmodell für mehrere Microservices gemeinsam verwenden möchten: Microservices muss vollständig autonome sein.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-138">You do not want to do that for the same reasons that you do not want to share a common domain model across multiple microservices: microservices must be completely autonomous.</span></span>

<span data-ttu-id="d5bdd-139">Es sind nur einige Arten von Bibliotheken, die Sie für Microservices freigeben sollte.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-139">There are only a few kinds of libraries you should share across microservices.</span></span> <span data-ttu-id="d5bdd-140">Eine der Bibliotheken, die endgültige Anwendungsblöcke, z. B. sind ist die [-Ereignisbus-Client-API](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus), wie im eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-140">One is libraries that are final application blocks, like the [Event Bus client API](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus), as in eShopOnContainers.</span></span> <span data-ttu-id="d5bdd-141">Ein weiterer Vorteil ist die Bibliotheken, die Tools zu bilden, die auch als NuGet-Komponenten, wie JSON-Serialisierungsprogramme freigegeben werden konnte.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-141">Another is libraries that constitute tools that could also be shared as NuGet components, like JSON serializers.</span></span>

## <a name="the-event-bus"></a><span data-ttu-id="d5bdd-142">Den-Ereignisbus</span><span class="sxs-lookup"><span data-stu-id="d5bdd-142">The event bus</span></span>

<span data-ttu-id="d5bdd-143">Ein Ereignisbus ermöglicht Veröffentlichen/Abonnieren-Stil Kommunikation zwischen Microservices, ohne dass die Komponenten explizit voneinander, bekannt sein, wie in Abbildung 8-19 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-143">An event bus allows publish/subscribe-style communication between microservices without requiring the components to explicitly be aware of each other, as shown in Figure 8-19.</span></span>

![](./media/image20.png)

<span data-ttu-id="d5bdd-144">**Abbildung 8-19**.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-144">**Figure 8-19**.</span></span> <span data-ttu-id="d5bdd-145">Grundlagen der mit einem Ereignisbus veröffentlichen/abonnieren</span><span class="sxs-lookup"><span data-stu-id="d5bdd-145">Publish/subscribe basics with an event bus</span></span>

<span data-ttu-id="d5bdd-146">Die Ereignisbus bezieht sich auf das Muster "Beobachter" und das Veröffentlichen-Abonnieren-Muster.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-146">The event bus is related to the Observer pattern and the publish-subscribe pattern.</span></span>

### <a name="observer-pattern"></a><span data-ttu-id="d5bdd-147">Muster "Beobachter"</span><span class="sxs-lookup"><span data-stu-id="d5bdd-147">Observer pattern</span></span>

<span data-ttu-id="d5bdd-148">In der ["Beobachter" Muster](https://en.wikipedia.org/wiki/Observer_pattern), Ihr primäre Objekt (bekannt als die Observable-Objekt) benachrichtigt anderen betroffenen Objekten (bekannt als Beobachter) mit relevanten Informationen (Ereignisse).</span><span class="sxs-lookup"><span data-stu-id="d5bdd-148">In the [Observer pattern](https://en.wikipedia.org/wiki/Observer_pattern), your primary object (known as the Observable) notifies other interested objects (known as Observers) with relevant information (events).</span></span>

### <a name="publish-subscribe-pubsub-pattern"></a><span data-ttu-id="d5bdd-149">(Pub/Sub) veröffentlichen-abonnieren-Muster</span><span class="sxs-lookup"><span data-stu-id="d5bdd-149">Publish-subscribe (Pub/Sub) pattern</span></span> 

<span data-ttu-id="d5bdd-150">Der Zweck der [Pub/Sub-Muster](https://msdn.microsoft.com/en-us/library/ff649664.aspx) ist identisch mit dem Muster "Beobachter": andere Dienste zu benachrichtigen, wenn bestimmte Ereignisse stattfinden soll.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-150">The purpose of the [Pub/Sub pattern](https://msdn.microsoft.com/en-us/library/ff649664.aspx) is the same as the Observer pattern: you want to notify other services when certain events take place.</span></span> <span data-ttu-id="d5bdd-151">Es gibt jedoch ein wichtiger semantische Unterschied zwischen der "Beobachter" und Pub/Sub-Muster.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-151">But there is an important semantic difference between the Observer and Pub/Sub patterns.</span></span> <span data-ttu-id="d5bdd-152">In das Muster für Pub/Sub befindet sich der Fokus auf Übertragen von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-152">In the Pub/Sub pattern, the focus is on broadcasting messages.</span></span> <span data-ttu-id="d5bdd-153">Im Gegensatz dazu in das Muster "Beobachter" kennt die Observable-Objekt nicht, genau das, die sie nicht erhalten hat, die Ereignisse erstellt werden. Das heißt, weiß die Observable-Objekt (dem Herausgeber) nicht, sind die Observer-Objekte (Abonnenten).</span><span class="sxs-lookup"><span data-stu-id="d5bdd-153">In contrast, in the Observer pattern, the Observable does not know who the events are going to, just that they have gone out. In other words, the Observable (the publisher) does not know who the Observers (the subscribers) are.</span></span>

### <a name="the-middleman-or-event-bus"></a><span data-ttu-id="d5bdd-154">Der Bus Zwischenhandel oder Ereignis</span><span class="sxs-lookup"><span data-stu-id="d5bdd-154">The middleman or event bus</span></span> 

<span data-ttu-id="d5bdd-155">Wie erzielen Sie Anonymität zwischen Verleger und Abonnent?</span><span class="sxs-lookup"><span data-stu-id="d5bdd-155">How do you achieve anonymity between publisher and subscriber?</span></span> <span data-ttu-id="d5bdd-156">Eine einfache Möglichkeit darin, eine Zwischenhandel, die gesamte Kommunikation erledigen können.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-156">An easy way is let a middleman take care of all the communication.</span></span> <span data-ttu-id="d5bdd-157">Ein-Ereignisbus ist eine solche Zwischenhandel.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-157">An event bus is one such middleman.</span></span>

<span data-ttu-id="d5bdd-158">Ein-Ereignisbus besteht in der Regel zwei Teilen:</span><span class="sxs-lookup"><span data-stu-id="d5bdd-158">An event bus is typically composed of two parts:</span></span>

-   <span data-ttu-id="d5bdd-159">Die Abstraktion oder Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-159">The abstraction or interface.</span></span>

-   <span data-ttu-id="d5bdd-160">Eine oder mehrere Implementierungen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-160">One or more implementations.</span></span>

<span data-ttu-id="d5bdd-161">In Abbildung 8-19 können Sie sehen, wie aus einer Anwendung der Sicht, die Ereignisbus keine Daten mehr als ein Pub/Sub-Kanal ist.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-161">In Figure 8-19 you can see how, from an application point of view, the event bus is nothing more than a Pub/Sub channel.</span></span> <span data-ttu-id="d5bdd-162">Die Möglichkeit, die Sie implementieren, diese asynchrone Kommunikation kann variieren.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-162">The way you implement this asynchronous communication can vary.</span></span> <span data-ttu-id="d5bdd-163">Es kann mehrere Implementierungen verfügen, sodass Sie zwischen ihnen, je nach den umgebungsanforderungen (z. B. Produktion im Vergleich zu entwicklungsumgebungen) austauschen können.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-163">It can have multiple implementations so that you can swap between them, depending on the environment requirements (for example, production versus development environments).</span></span>

<span data-ttu-id="d5bdd-164">In Abbildung 8 – 20 können Sie eine Abstraktion einer Ereignisbus mit mehrere Implementierungen basierend auf Infrastruktur messaging Technologien wie RabbitMQ, Azure Service Bus oder andere Service Bus: NServiceBus, MassTransit usw. anzeigen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-164">In Figure 8-20 you can see an abstraction of an event bus with multiple implementations based on infrastructure messaging technologies like RabbitMQ, Azure Service Bus, or other service buses like NServiceBus, MassTransit, etc.</span></span>

![](./media/image21.png)

<span data-ttu-id="d5bdd-165">**Abbildung 8: 20.**</span><span class="sxs-lookup"><span data-stu-id="d5bdd-165">**Figure 8- 20.**</span></span> <span data-ttu-id="d5bdd-166">Mehrere Implementierungen einer-Ereignisbus</span><span class="sxs-lookup"><span data-stu-id="d5bdd-166">Multiple implementations of an event bus</span></span>

<span data-ttu-id="d5bdd-167">Allerdings ist hervorgehoben zuvor Abstraktionen (Bus Ereignisschnittstelle) mit nur möglich, wenn Sie grundlegende Ereignis Bus Funktionen durch Ihre Abstraktionen unterstützt benötigen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-167">However, as highlighted previously, using abstractions (the event bus interface) is possible only if you need basic event bus features supported by your abstractions.</span></span> <span data-ttu-id="d5bdd-168">Wenn Sie umfangreichere Servicebus-Features benötigen, sollten Sie wahrscheinlich die API von bevorzugten Servicebus-statt eigene Abstraktionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-168">If you need richer service bus features, you should probably use the API provided by your preferred service bus instead of your own abstractions.</span></span>

### <a name="defining-an-event-bus-interface"></a><span data-ttu-id="d5bdd-169">Definieren eine Ereignis-Bus-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="d5bdd-169">Defining an event bus interface</span></span>

<span data-ttu-id="d5bdd-170">Beginnen wir mit einigen Implementierungscode für Bus Ereignisschnittstelle und mögliche Implementierungen zu durchsuchen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-170">Let’s start with some implementation code for the event bus interface and possible implementations for exploration purposes.</span></span> <span data-ttu-id="d5bdd-171">Die Schnittstelle sollte generischen und unkompliziert, wie die folgende Schnittstelle sein.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-171">The interface should be generic and straightforward, as in the following interface.</span></span>

```csharp
public interface IEventBus
{
    void Publish(IntegrationEvent @event);
    void Subscribe<T>(IIntegrationEventHandler<T> handler)
        where T: IntegrationEvent;

    void Unsubscribe<T>(IIntegrationEventHandler<T> handler)
        where T : IntegrationEvent;
}
```

<span data-ttu-id="d5bdd-172">Die Veröffentlichungsmethode ist einfach.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-172">The Publish method is straightforward.</span></span> <span data-ttu-id="d5bdd-173">Die Ereignisbus wird das an sie übergebene werden, um alle auf das Ereignis abonniert Microservice Integration-Ereignis übermittelt.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-173">The event bus will broadcast the integration event passed to it to any microservice subscribed to that event.</span></span> <span data-ttu-id="d5bdd-174">Diese Methode wird von der Microservice verwendet, der das Ereignis veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-174">This method is used by the microservice that is publishing the event.</span></span>

<span data-ttu-id="d5bdd-175">Subscribe-Methode wird von der Microservices verwendet, die Ereignisse empfangen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-175">The Subscribe method is used by the microservices that want to receive events.</span></span> <span data-ttu-id="d5bdd-176">Diese Methode besteht aus zwei Teilen.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-176">This method has two parts.</span></span> <span data-ttu-id="d5bdd-177">Das erste ist die Integration-Ereignis (IntegrationEvent) abonnieren.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-177">The first is the integration event to subscribe to (IntegrationEvent).</span></span> <span data-ttu-id="d5bdd-178">Der zweite Teil ist die Integration Ereignishandler (oder eine Rückrufmethode) aufgerufen werden (IIntegrationEventHandler&lt;T&gt;) Wenn die Microservice empfängt diese ereignismeldung Integration.</span><span class="sxs-lookup"><span data-stu-id="d5bdd-178">The second part is the integration event handler (or callback method) to be called (IIntegrationEventHandler&lt;T&gt;) when the microservice receives that integration event message.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="d5bdd-179">[Vorherigen] (Datenbank-Server-container.md) [weiter] (Rabbitmq-event-bus-development-test-environment.md)</span><span class="sxs-lookup"><span data-stu-id="d5bdd-179">[Previous] (database-server-container.md) [Next] (rabbitmq-event-bus-development-test-environment.md)</span></span>
