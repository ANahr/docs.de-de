---
title: Status und die Daten in Docker-Anwendungen
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Status und die Daten in Docker-Anwendungen"
keywords: Docker, Microservices "," ASP.NET "," Container "," SQL "," CosmosDB "," Docker
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 36d0fb9f27ef56b36c380e2fc972c79cff77003e
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/22/2017
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="f945a-104">Status und die Daten in Docker-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="f945a-104">State and data in Docker applications</span></span>

<span data-ttu-id="f945a-105">In den meisten Fällen können Sie einen Container als eine Instanz eines Prozesses vorstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-105">In most cases, you can think of a container as an instance of a process.</span></span> <span data-ttu-id="f945a-106">Ein Prozess behält nicht persistenten Status bei.</span><span class="sxs-lookup"><span data-stu-id="f945a-106">A process does not maintain persistent state.</span></span> <span data-ttu-id="f945a-107">Während ein Containers in den lokalen Speicher schreiben kann, wäre vorausgesetzt, dass eine Instanz auf unbestimmte Zeit kann z. B. vorausgesetzt, dass eine einzelne Position im Arbeitsspeicher dauerhaft ist.</span><span class="sxs-lookup"><span data-stu-id="f945a-107">While a container can write to its local storage, assuming that an instance will be around indefinitely would be like assuming that a single location in memory will be durable.</span></span> <span data-ttu-id="f945a-108">Containerimages, z. B. Prozesse, sollte als gegeben angenommen, mehrere Instanzen oder, die sie werden schließlich abgebrochen; Wenn sie mit einem Container Orchestrator verwaltet werden, sollte davon ausgegangen, dass sie von einem Knoten oder virtuellen Computer in eine andere verschoben werden können.</span><span class="sxs-lookup"><span data-stu-id="f945a-108">Container images, like processes, should be assumed to have multiple instances or that they will eventually be killed; if they’re managed with a container orchestrator, it should be assumed that they might get moved from one node or VM to another.</span></span>

<span data-ttu-id="f945a-109">Docker bietet eine Funktion mit dem Namen der *overlay Dateisystem*.</span><span class="sxs-lookup"><span data-stu-id="f945a-109">Docker provides a feature named the *overlay file system*.</span></span> <span data-ttu-id="f945a-110">Dadurch wird eine Kopie-bei-Schreibvorgang-Aufgabe, die speichert Informationen in das Stammverzeichnis Dateisystem des Containers aktualisiert implementiert.</span><span class="sxs-lookup"><span data-stu-id="f945a-110">This implements a copy-on-write task that stores updated information to the root file system of the container.</span></span> <span data-ttu-id="f945a-111">Diese Informationen werden darüber hinaus das ursprüngliche Bild auf dem der Container basiert.</span><span class="sxs-lookup"><span data-stu-id="f945a-111">That information is in addition to the original image on which the container is based.</span></span> <span data-ttu-id="f945a-112">Wenn der Container aus dem System gelöscht wird, werden diese Änderungen verloren.</span><span class="sxs-lookup"><span data-stu-id="f945a-112">If the container is deleted from the system, those changes are lost.</span></span> <span data-ttu-id="f945a-113">Aus diesem Grund es zwar möglich, den Status eines Containers in den lokalen Speicher zu speichern, würde Entwerfen eines Systems umgehen dieses die Prämisse eines Container-Entwurf Konflikt mit dem standardmäßigen zustandslos ist.</span><span class="sxs-lookup"><span data-stu-id="f945a-113">Therefore, while it is possible to save the state of a container within its local storage, designing a system around this would conflict with the premise of container design, which by default is stateless.</span></span>

<span data-ttu-id="f945a-114">Die folgenden Lösungen werden verwendet, um persistenter Daten in Docker-Anwendungen zu verwalten:</span><span class="sxs-lookup"><span data-stu-id="f945a-114">The following solutions are used to manage persistent data in Docker applications:</span></span>

-   <span data-ttu-id="f945a-115">[Datenvolumes](https://docs.docker.com/engine/tutorials/dockervolumes/) , die an den Host bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-115">[Data volumes](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount to the host.</span></span>

-   <span data-ttu-id="f945a-116">[Datenvolumecontainer](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) , freigegebenen Speicher in Containern, die mit einer externen Container bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-116">[Data volume containers](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) that provide shared storage across containers using an external container.</span></span>

-   <span data-ttu-id="f945a-117">[Volume-Plug-Ins](https://docs.docker.com/engine/tutorials/dockervolumes/) , die Volumes auf remote-Dienste bereitstellen langfristige Dauerhaftigkeit bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-117">[Volume plugins](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount volumes to remote services, providing long-term persistence.</span></span>

-   <span data-ttu-id="f945a-118">[Azure-Speicher](https://docs.microsoft.com/azure/storage/), stellt geografische verteilbarer Speicher, eine geeignete Lösung für langfristige Dauerhaftigkeit für Container bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-118">[Azure Storage](https://docs.microsoft.com/azure/storage/), which provides geo-distributable storage, providing a good long-term persistence solution for containers.</span></span>

-   <span data-ttu-id="f945a-119">Relationale Remotedatenbanken wie [Azure SQL-Datenbank](https://azure.microsoft.com/services/sql-database/) oder NoSQL-Datenbanken wie [Azure Cosmos-DB](https://docs.microsoft.com/azure/cosmos-db/introduction), oder -Dienste wie zwischenspeichern [Redis](https://redis.io/).</span><span class="sxs-lookup"><span data-stu-id="f945a-119">Remote relational databases like [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) or NoSQL databases like [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), or cache services like [Redis](https://redis.io/).</span></span>

<span data-ttu-id="f945a-120">Nachfolgend erhalten Sie weitere Details zu diesen Optionen.</span><span class="sxs-lookup"><span data-stu-id="f945a-120">The following provides more detail about these options.</span></span>

<span data-ttu-id="f945a-121">**Datenvolumes** Verzeichnisse aus dem Hostbetriebssystem Verzeichnisse in Containern zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="f945a-121">**Data volumes** are directories mapped from the host OS to directories in containers.</span></span> <span data-ttu-id="f945a-122">Wenn Code im Container Zugriff auf das Verzeichnis hat, Zugriff tatsächlich ein Verzeichnis auf dem Host-Betriebssystem ist.</span><span class="sxs-lookup"><span data-stu-id="f945a-122">When code in the container has access to the directory, that access is actually to a directory on the host OS.</span></span> <span data-ttu-id="f945a-123">Dieses Verzeichnis ist nicht an die Lebensdauer des Containers selbst gebunden, oder und das Verzeichnis zugegriffen werden kann, aus Code direkt auf das Hostbetriebssystem ausgeführt wird, um durch einen anderen Container zugeordnet, die den gleichen Hostverzeichnis auf sich selbst.</span><span class="sxs-lookup"><span data-stu-id="f945a-123">This directory is not tied to the lifetime of the container itself, and the directory can be accessed from code running directly on the host OS or by another container that maps the same host directory to itself.</span></span> <span data-ttu-id="f945a-124">Deshalb dienen Datenvolumes Daten unabhängig von der Lebensdauer des Containers beibehalten.</span><span class="sxs-lookup"><span data-stu-id="f945a-124">Thus, data volumes are designed to persist data independently of the life of the container.</span></span> <span data-ttu-id="f945a-125">Wenn Sie einen Container löschen oder ein Bild aus dem Docker-Host, die Daten in persistent wird die Datenmenge nicht gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="f945a-125">If you delete a container or an image from the Docker host, the data persisted in the data volume is not deleted.</span></span> <span data-ttu-id="f945a-126">Die Daten in ein Volume können vom Hostbetriebssystem sowie zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="f945a-126">The data in a volume can be accessed from the host OS as well.</span></span>

<span data-ttu-id="f945a-127">**Datenvolumecontainer** eine Weiterentwicklung der regulären Datenvolumes sind.</span><span class="sxs-lookup"><span data-stu-id="f945a-127">**Data volume containers** are an evolution of regular data volumes.</span></span> <span data-ttu-id="f945a-128">Ein Daten-Volume-Container ist eine einfache Container, der eine oder mehrere Datenvolumes darin enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="f945a-128">A data volume container is a simple container that has one or more data volumes within it.</span></span> <span data-ttu-id="f945a-129">Die Data-Volume-Container bietet Zugriff auf Container, von einem zentralen Bereitstellungspunkt.</span><span class="sxs-lookup"><span data-stu-id="f945a-129">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="f945a-130">Diese Methode des Datenzugriffs liegt daran, dass es sich um den Speicherort der ursprünglichen Daten abstrahiert.</span><span class="sxs-lookup"><span data-stu-id="f945a-130">This method of data access is convenient because it abstracts the location of the original data.</span></span> <span data-ttu-id="f945a-131">Als dem ist das Verhalten ähnlich dem von einem regulären Datenvolume, damit Daten in diesem dedizierten Container unabhängig von den Lebenszyklus von Containern der Anwendung beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="f945a-131">Other than that, its behavior is similar to that of a regular data volume, so data is persisted in this dedicated container independently of the lifecycle of the application’s containers.</span></span>

<span data-ttu-id="f945a-132">Wie in Abbildung 4-5 gezeigt, können reguläre Docker Volumes außerhalb der Container selbst aber innerhalb der physischen Grenzen des dem Hostserver oder einen virtuellen Computer gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f945a-132">As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves but within the physical boundaries of the host server or VM.</span></span> <span data-ttu-id="f945a-133">Jedoch zugreifen nicht Docker-Containern zu einem anderen ein Volume aus einem Host-Server oder virtuellen Computer.</span><span class="sxs-lookup"><span data-stu-id="f945a-133">However, Docker containers cannot access a volume from one host server or VM to another.</span></span> <span data-ttu-id="f945a-134">Das heißt, ist mit diesen Volumes es nicht möglich zum Verwalten von Daten, die gemeinsam von Containern, die auf verschiedenen Docker-Hosts ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="f945a-134">In other words, with these volumes, it is not possible to manage data shared between containers that run on different Docker hosts</span></span>

![](./media/image5.png)

<span data-ttu-id="f945a-135">**Abbildung 4-5**.</span><span class="sxs-lookup"><span data-stu-id="f945a-135">**Figure 4-5**.</span></span> <span data-ttu-id="f945a-136">Datenvolumes und externe Datenquellen für Container-basierte Anwendungen</span><span class="sxs-lookup"><span data-stu-id="f945a-136">Data volumes and external data sources for container-based applications</span></span>

<span data-ttu-id="f945a-137">Darüber hinaus, wenn Docker-Containern durch ein Orchestrator verwaltet werden, möglicherweise Container "zwischen Hosts, je nach den vom Cluster durchgeführten Optimierungen, verschieben".</span><span class="sxs-lookup"><span data-stu-id="f945a-137">In addition, when Docker containers are managed by an orchestrator, containers might “move” between hosts, depending on the optimizations performed by the cluster.</span></span> <span data-ttu-id="f945a-138">Aus diesem Grund wird nicht empfohlen, Daten-Volumes für Geschäftsdaten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="f945a-138">Therefore, it is not recommended that you use data volumes for business data.</span></span> <span data-ttu-id="f945a-139">Aber sie sind ein Mechanismus zur Bearbeitung von Ablaufverfolgungsdateien, die temporären Dateien oder vergleichbar, die hat keine Auswirkung auf Datenkonsistenz Business.</span><span class="sxs-lookup"><span data-stu-id="f945a-139">But they are a good mechanism to work with trace files, temporal files, or similar that will not impact business data consistency.</span></span>

<span data-ttu-id="f945a-140">**Volume-Plug-Ins** wie [Flocker](https://clusterhq.com/flocker/) Datenzugriff auf allen Hosts in einem Cluster bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="f945a-140">**Volume plugins** like [Flocker](https://clusterhq.com/flocker/) provide data access across all hosts in a cluster.</span></span> <span data-ttu-id="f945a-141">Während nicht alle Volume-Plug-Ins gleichermaßen erstellt werden, bieten Volume-Plug-Ins in der Regel externalisierte zuverlässige Speicherung von Containern unveränderlich.</span><span class="sxs-lookup"><span data-stu-id="f945a-141">While not all volume plugins are created equally, volume plugins typically provide externalized persistent reliable storage from immutable containers.</span></span>

<span data-ttu-id="f945a-142">**Remotedatenquellen und Cache** Tools wie Azure SQL-Datenbank, Azure-Cosmos-Datenbank oder eine remote-Cache, wie in Redis verwendet werden kann Anwendungen Container verwendet die gleiche Weise, sie werden bei der Entwicklung ohne Container verwendet.</span><span class="sxs-lookup"><span data-stu-id="f945a-142">**Remote data sources and cache** tools like Azure SQL Database, Azure Cosmos DB, or a remote cache like Redis can be used in containerized applications the same way they are used when developing without containers.</span></span> <span data-ttu-id="f945a-143">Dies ist eine bewährte Möglichkeit zum Speichern von Geschäftsdaten-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="f945a-143">This is a proven way to store business application data.</span></span>

<span data-ttu-id="f945a-144">**Azure-Speicher.**</span><span class="sxs-lookup"><span data-stu-id="f945a-144">**Azure Storage.**</span></span> <span data-ttu-id="f945a-145">Geschäftsdaten müssen in der Regel in externe Ressourcen oder Datenbanken, wie Azure-Speicher abgelegt werden soll.</span><span class="sxs-lookup"><span data-stu-id="f945a-145">Business data usually will need to be placed in external resources or databases, like Azure Storage.</span></span> <span data-ttu-id="f945a-146">Azure-Speicher in konkret, bietet die folgenden Dienste in der Cloud:</span><span class="sxs-lookup"><span data-stu-id="f945a-146">Azure Storage, in concrete, provides the following services in the cloud:</span></span>

-   <span data-ttu-id="f945a-147">BLOB-Speicher speichert unstrukturierte Daten.</span><span class="sxs-lookup"><span data-stu-id="f945a-147">Blob storage stores unstructured object data.</span></span> <span data-ttu-id="f945a-148">Ein Blob kann jeden Datentyp Text- oder Binärdaten, z. B. Dokument oder ein Medium (Bilder, Audio- und Videofunktionen Format)-Dateien sein.</span><span class="sxs-lookup"><span data-stu-id="f945a-148">A blob can be any type of text or binary data, such as document or media files (images, audio, and video files).</span></span> <span data-ttu-id="f945a-149">BLOB-Speicher wird auch als Objektspeicher bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="f945a-149">Blob storage is also referred to as Object storage.</span></span>

-   <span data-ttu-id="f945a-150">Speichern von Dateien bietet freigegebenen Speicher für Legacyanwendungen mithilfe von SMB-Standardprotokolls.</span><span class="sxs-lookup"><span data-stu-id="f945a-150">File storage offers shared storage for legacy applications using standard SMB protocol.</span></span> <span data-ttu-id="f945a-151">Azure Virtual Machines und Cloud-Dienste können Dateidaten mithilfe bereitgestellter Freigaben Anwendungskomponenten freigeben.</span><span class="sxs-lookup"><span data-stu-id="f945a-151">Azure virtual machines and cloud services can share file data across application components via mounted shares.</span></span> <span data-ttu-id="f945a-152">Auf lokale Anwendungen können Dateidaten in einer Freigabe über die Dateidienst-REST-API zugreifen.</span><span class="sxs-lookup"><span data-stu-id="f945a-152">On-premises applications can access file data in a share via the File service REST API.</span></span>

-   <span data-ttu-id="f945a-153">Tabellenspeicher speichert strukturierte Datasets.</span><span class="sxs-lookup"><span data-stu-id="f945a-153">Table storage stores structured datasets.</span></span> <span data-ttu-id="f945a-154">Tabellenspeicher ist ein NoSQL-Schlüsselattribut-Datenspeicher, der schnelle Entwicklung sowie den schnellen Zugriff auf große Mengen von Daten ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="f945a-154">Table storage is a NoSQL key-attribute data store, which allows rapid development and fast access to large quantities of data.</span></span>

<span data-ttu-id="f945a-155">**Relationale Datenbanken und NoSQL-Datenbanken.**</span><span class="sxs-lookup"><span data-stu-id="f945a-155">**Relational databases and NoSQL databases.**</span></span> <span data-ttu-id="f945a-156">Es gibt verschiedene Auswahlmöglichkeiten für externe Datenbanken, angefangen bei relationalen Datenbanken wie SQL Server, PostgreSQL, Oracle oder NoSQL-Datenbanken wie Azure-Cosmos-DB, MongoDB usw. ein. Diese Datenbanken sind nicht weiter als Teil dieses Handbuch erklärt werden, sie in einen Betreff völlig unterschiedlich sind.</span><span class="sxs-lookup"><span data-stu-id="f945a-156">There are many choices for external databases, from relational databases like SQL Server, PostgreSQL, Oracle, or NoSQL databases like Azure Cosmos DB, MongoDB, etc. These databases are not going to be explained as part of this guide since they are in a completely different subject.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="f945a-157">[Vorherigen] (containerize-monolithischen-applications.md) [weiter] (Service-oriented-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="f945a-157">[Previous] (containerize-monolithic-applications.md) [Next] (service-oriented-architecture.md)</span></span>
