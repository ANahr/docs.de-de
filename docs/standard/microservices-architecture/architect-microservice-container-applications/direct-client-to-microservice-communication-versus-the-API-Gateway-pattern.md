---
title: Direkte Kommunikation zwischen Client und Microservice im Vergleich zum API-Gatewaymuster
description: ".NET-Microservicesarchitektur für .NET-Containeranwendungen | Direkte Kommunikation zwischen Client und Microservice im Vergleich zum API-Gatewaymuster"
keywords: Docker, Microservices, ASP.NET, Container, API-Gateway
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 96a02958ef5750aec7a92ff0dd145edc15a5953a
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/23/2017
---
# <a name="direct-client-to-microservice-communication-versus-the-api-gateway-pattern"></a><span data-ttu-id="cbba3-104">Direkte Kommunikation zwischen Client und Microservice im Vergleich zum API-Gatewaymuster</span><span class="sxs-lookup"><span data-stu-id="cbba3-104">Direct client-to-microservice communication versus the API Gateway pattern</span></span>

<span data-ttu-id="cbba3-105">In einer Microservicesarchitektur stellt jeder Microservice (in der Regel) mehrere umfassende Endpunkte zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="cbba3-105">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="cbba3-106">Dies kann wie in diesem Abschnitt beschrieben Auswirkungen auf die Kommunikation zwischen Client und Microservice haben.</span><span class="sxs-lookup"><span data-stu-id="cbba3-106">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="cbba3-107">Direkte Kommunikation zwischen Client und Microservice</span><span class="sxs-lookup"><span data-stu-id="cbba3-107">Direct client-to-microservice communication</span></span>

<span data-ttu-id="cbba3-108">Es ist möglich, eine Architektur zur direkten Kommunikation zwischen Client und Microservice zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-108">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="cbba3-109">Dabei kann eine Client-App, wie in Abbildung 4-12 dargestellt, auf direktem Weg Anforderungen an einige der Microservices senden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-109">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![](./media/image12.png)

<span data-ttu-id="cbba3-110">**Abbildung 4-12.**</span><span class="sxs-lookup"><span data-stu-id="cbba3-110">**Figure 4-12**.</span></span> <span data-ttu-id="cbba3-111">Verwenden einer Architektur zur direkten Kommunikation zwischen Client und Microservice</span><span class="sxs-lookup"><span data-stu-id="cbba3-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="cbba3-112">In diesem Ansatz</span><span class="sxs-lookup"><span data-stu-id="cbba3-112">In this approach.</span></span> <span data-ttu-id="cbba3-113">verfügt jeder Microservice über einen öffentlichen Endpunkt. Dabei kann es sein, dass jeder Microservice auf einem anderen TCP-Port ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="cbba3-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="cbba3-114">In Azure kann die URL eines bestimmten Diensts z.B. wie folgt lauten:</span><span class="sxs-lookup"><span data-stu-id="cbba3-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<span data-ttu-id="cbba3-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span><span class="sxs-lookup"><span data-stu-id="cbba3-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span></span>

<span data-ttu-id="cbba3-116">In einer Produktionsumgebung, die auf einem Cluster basiert, wird diese URL dem im Cluster verwendeten Load Balancer zugeordnet, der dann wiederum die Anforderungen an die Microservices weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="cbba3-116">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="cbba3-117">In Produktionsumgebungen kann es sein, dass zwischen Ihren Microservices und dem Internet ein Application Delivery Controller (ADC) wie [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) steht.</span><span class="sxs-lookup"><span data-stu-id="cbba3-117">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="cbba3-118">Dieser Controller fungiert als transparente Ebene, die nicht nur einen Lastenausgleich ausführt, sondern auch Ihre Dienste sichert, indem sie das Beenden von SSL ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="cbba3-118">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="cbba3-119">Dadurch wird das Laden Ihrer Hosts verbessert, denn das Beenden von SSL, das zu einer hohen CPU-Auslastung führt, und andere Pflichten zur Weiterleitung an das Azure Application Gateway werden abgeladen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-119">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="cbba3-120">In jedem Fall sind Lastenausgleich und ADC im Hinblick auf die logische Anwendungsarchitektur transparent.</span><span class="sxs-lookup"><span data-stu-id="cbba3-120">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="cbba3-121">Eine Architektur zur direkten Kommunikation zwischen Client und Microservice kann sich gut für eine kleine auf einem Microservice basierende Anwendung eignen, insbesondere wenn es sich bei der Client-App um eine Webanwendung auf Serverseite handelt (z.B. eine ASP.NET-MVC-App).</span><span class="sxs-lookup"><span data-stu-id="cbba3-121">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="cbba3-122">Wenn Sie allerdings eine große und komplexe auf einem Microservice basierende Anwendung erstellen (z.B. wenn Sie mit dutzenden Microservicetypen arbeiten), und vor allem wenn es sich bei den Client-Apps um mobile Remote-Apps oder SPA-Webanwendungen handelt, kann dieser Ansatz zu einigen Problemen führen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-122">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="cbba3-123">Beachten Sie die folgenden Fragen, wenn Sie eine große Anwendung erstellen, die auf Microservices basiert:</span><span class="sxs-lookup"><span data-stu-id="cbba3-123">Consider the following questions when developing a large application based on microservices:</span></span>

-   <span data-ttu-id="cbba3-124">*Wie können Client-Apps die Anzahl von Anforderungen an das Back-End übergeben und umfangreiche Kommunikation von mehreren Microservices reduzieren?*</span><span class="sxs-lookup"><span data-stu-id="cbba3-124">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="cbba3-125">Wenn Sie mit mehreren Microservices zum Erstellen einer einzelnen Benutzeroberflächenanzeige interagieren, wird die Anzahl von Roundtrips zum Internet verringert.</span><span class="sxs-lookup"><span data-stu-id="cbba3-125">Interacting with multiple microservices to build a single UI screen increases the number of roundtrips across the Internet.</span></span> <span data-ttu-id="cbba3-126">Dadurch wird die Wartezeit und die Komplexität auf Benutzeroberflächenseite verringert.</span><span class="sxs-lookup"><span data-stu-id="cbba3-126">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="cbba3-127">Idealerweise sollten Antworten auf effiziente Weise auf Serverseite aggregiert werden. Dadurch wird die Wartezeit verringert, da mehrere Daten gleichzeitig zurückgegeben werden und einige Benutzeroberflächen Daten anzeigen, sobald diese verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="cbba3-127">Ideally, responses should be efficiently aggregated in the server side—this reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

-   <span data-ttu-id="cbba3-128">*Wie können übergreifende Aspekte wie die Autorisierung, Datentransformationen und die dynamische Weiterleitung von Anforderungen gehandhabt werden?*</span><span class="sxs-lookup"><span data-stu-id="cbba3-128">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="cbba3-129">Wenn Sie übergreifende Aspekte wie Sicherheit und Autorisierung in jeden Microservice implementieren, ist unter Umständen ein hohes Maß an Entwicklungsarbeit erforderlich.</span><span class="sxs-lookup"><span data-stu-id="cbba3-129">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="cbba3-130">Dies können Sie vermeiden, indem Sie diese Dienste im Docker-Host oder internen Cluster speichern, um den Direktzugriff von außen einzuschränken und diese übergreifenden Aspekte an zentraler Stelle zu implementieren (z.B. in ein API-Gateway).</span><span class="sxs-lookup"><span data-stu-id="cbba3-130">A possible approach is to have those services within the Docker host or internal cluster, in order to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

-   <span data-ttu-id="cbba3-131">*Wie können Client-Apps mit Diensten kommunizieren, die Protokolle verwenden, die nicht für das Internet geeignet sind?*</span><span class="sxs-lookup"><span data-stu-id="cbba3-131">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="cbba3-132">Protokolle, die auf Serverseite verwendet werden (wie AMQP oder Binärprotokolle), werden in der Regel in Client-Apps nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-132">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="cbba3-133">Aus diesem Grund müssen Anforderungen über Protokolle wie HTTP/HTTPS ausgeführt und anschließend in die anderen Protokolle übersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-133">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="cbba3-134">In diesem Fall kann der *Man-in-the-Middle*-Ansatz zur Lösung des Problems verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-134">A *man-in-the-middle* approach can help in this situation.</span></span>

-   <span data-ttu-id="cbba3-135">*Wie kann eine Fassade angepasst werden, die ausschließlich für mobile Apps erstellt wurde?*</span><span class="sxs-lookup"><span data-stu-id="cbba3-135">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="cbba3-136">Es kann sein, dass die API für mehrere Microservices nicht an die Anforderungen verschiedener Client-Anwendungen angepasst wurde.</span><span class="sxs-lookup"><span data-stu-id="cbba3-136">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="cbba3-137">Beispielweise unterscheiden sich die Anforderungen für mobile Apps von denen für Web-Apps.</span><span class="sxs-lookup"><span data-stu-id="cbba3-137">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="cbba3-138">Für mobile Apps müssen Sie möglicherweise weitere Anpassungen zur Optimierung vornehmen, damit Datenantworten effizienter ausfallen können.</span><span class="sxs-lookup"><span data-stu-id="cbba3-138">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="cbba3-139">Diese Anpassungen können Sie vornehmen, indem Sie Daten aus mehreren Microservices aggregieren und einen einzelnen Datensatz zurückgeben, oder indem Sie jegliche Daten aus der Antwort löschen, die für die mobile App nicht benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-139">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="cbba3-140">Außerdem können Sie natürlich die Daten komprimieren.</span><span class="sxs-lookup"><span data-stu-id="cbba3-140">And, of course, you might compress that data.</span></span> <span data-ttu-id="cbba3-141">Auch in diesem Szenario kann eine Fassade oder eine API zwischen der mobilen App und den Microservices hilfreich sein.</span><span class="sxs-lookup"><span data-stu-id="cbba3-141">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="using-an-api-gateway"></a><span data-ttu-id="cbba3-142">Verwenden eines API-Gateways</span><span class="sxs-lookup"><span data-stu-id="cbba3-142">Using an API Gateway</span></span>

<span data-ttu-id="cbba3-143">Wenn Sie große bzw. komplexe auf einem Microservice basierende Anwendungen mit mehreren Client-Apps entwerfen und erstellen, sollten Sie darüber nachdenken, ob ein [API-Gateway](http://microservices.io/patterns/apigateway.html) hilfreich sein kann.</span><span class="sxs-lookup"><span data-stu-id="cbba3-143">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](http://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="cbba3-144">Dabei handelt es sich um einen Dienst, der genau einen Endpunkt für bestimmte Gruppen von Microservices bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-144">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="cbba3-145">Dieser Dienst ähnelt zwar dem [Fassadenmuster](https://en.wikipedia.org/wiki/Facade_pattern) des objektorientierten Designs, jedoch ist er in diesem Fall Teil eines verteilten Systems.</span><span class="sxs-lookup"><span data-stu-id="cbba3-145">It is similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it is part of a distributed system.</span></span> <span data-ttu-id="cbba3-146">Das API-Gatewaymuster ist außerdem unter der Bezeichnung „Backend for Frontend“ [(BFF)](http://samnewman.io/patterns/architectural/bff/) (Back-End für Front-End) bekannt, da Sie es erstellen, während Sie entscheiden, welche Anforderungen Ihre App haben soll.</span><span class="sxs-lookup"><span data-stu-id="cbba3-146">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](http://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="cbba3-147">In Abbildung 4-13 wird dargestellt, wie ein benutzerdefiniertes API-Gateway in eine auf einem Microservice basierende Architektur eingefügt werden kann.</span><span class="sxs-lookup"><span data-stu-id="cbba3-147">Figure 4-13 shows how a custom API Gateway can fit into a microservice-based architecture.</span></span>
<span data-ttu-id="cbba3-148">Es sollte hervorgehoben werden, dass in diesem Diagramm genau ein benutzerdefinierter API-Gatewaydienst verwendet wird, der auf mehrere verschiedene Client-Apps ausgerichtet ist.</span><span class="sxs-lookup"><span data-stu-id="cbba3-148">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="cbba3-149">Dies kann ein wichtiges Risiko darstellen, da ihr API-Gatewaydienst anhand vieler verschiedener Anforderungen aus den Client-Apps größer und weiterentwickelt wird.</span><span class="sxs-lookup"><span data-stu-id="cbba3-149">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="cbba3-150">Aufgrund dieser verschiedenen Anforderungen kann es zu einer Überfrachtung kommen, und letztendlich kann dies einer monolithischen Anwendung oder einem monolithischen Dienst ähneln.</span><span class="sxs-lookup"><span data-stu-id="cbba3-150">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="cbba3-151">Daher wird dringend empfohlen, das API-Gateway in mehrere Dienste oder mehrere kleinere API-Gateways aufzuteilen – z.B. eins pro Formularfaktor.</span><span class="sxs-lookup"><span data-stu-id="cbba3-151">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per form-factor type, for instance.</span></span>

![](./media/image13.png)

<span data-ttu-id="cbba3-152">**Abbildung 4-13.**</span><span class="sxs-lookup"><span data-stu-id="cbba3-152">**Figure 4-13**.</span></span> <span data-ttu-id="cbba3-153">Verwenden eines API-Gateways, das als benutzerdefinierter Web-API-Dienst implementiert ist</span><span class="sxs-lookup"><span data-stu-id="cbba3-153">Using an API Gateway implemented as a custom Web API service</span></span>

<span data-ttu-id="cbba3-154">In diesem Beispiel wird das API-Gateway als benutzerdefinierter Web-API-Dienst implementiert, der als Container ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="cbba3-154">In this example, the API Gateway would be implemented as a custom Web API service running as a container.</span></span>

<span data-ttu-id="cbba3-155">Wie bereits erwähnt, sollten Sie mehrere API-Gateways implementieren, sodass Sie die Fassade an die Anforderungen der einzelnen Client-Apps anpassen können.</span><span class="sxs-lookup"><span data-stu-id="cbba3-155">As mentioned, you should implement several API Gateways so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="cbba3-156">Jedes API-Gateway kann eine andere API bereitstellen, die auf die einzelnen Client-Apps zugeschnitten ist und möglicherweise sogar auf dem Formfaktor des Clients basiert, indem bestimmter Adaptercode implementiert wird, der im Hintergrund mehrere interne Microservices abruft.</span><span class="sxs-lookup"><span data-stu-id="cbba3-156">Each API Gateway can provide a different API tailored for each client app, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices.</span></span>

<span data-ttu-id="cbba3-157">Da es sich bei einem benutzerdefinierten API-Gateway in der Regel um einen Datenaggregator handelt, müssen Sie vorsichtig damit umgehen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-157">Since a custom API Gateway is usually a data aggregator, you need to be careful with it.</span></span> <span data-ttu-id="cbba3-158">In der Regel sollte nicht ein einzelnes API-Gateway alle internen Microservices Ihrer Anwendung aggregieren.</span><span class="sxs-lookup"><span data-stu-id="cbba3-158">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="cbba3-159">Wenn dies trotzdem der Fall ist, agiert dieses als monolithischer Aggregator oder Orchestrator und beeinträchtig die Autonomie des Microservices, indem alle Microservices aneinander gekoppelt werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-159">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span> <span data-ttu-id="cbba3-160">Aus diesem Grund sollten die API-Gateways anhand der Unternehmenseinschränkungen aufgeteilt werden und nicht als Aggregatoren für die gesamte Anwendung agieren.</span><span class="sxs-lookup"><span data-stu-id="cbba3-160">Therefore, the API Gateways should be segregated based on business boundaries and not act as an aggregator for the whole application.</span></span>

<span data-ttu-id="cbba3-161">Manchmal kann es sich bei einem präzisen API-Gateway schon um einen eigenen Microservice handeln, der sogar über eine Domäne, einen Unternehmensnamen oder über zugehörige Dateien verfügt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-161">Sometimes a granular API Gateway can also be a microservice by itself, and even have a domain or business name and related data.</span></span> <span data-ttu-id="cbba3-162">Wenn die Einschränkungen des API-Gateways vom Unternehmen oder von der Domäne vorgegeben sind, können Sie auf einfache Weise ein besseres Design erstellen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-162">Having the API Gateway’s boundaries dictated by the business or domain will help you to get a better design.</span></span>

<span data-ttu-id="cbba3-163">Auf der Ebene des API-Gateways kann Granularität besonders nützlich für erweiterte zusammengesetzte Benutzeroberflächenanwendungen sein, die auf Microservices basieren, da das Konzept eines präzisen API-Gateways einem Dienst zur Benutzeroberflächenkomposition ähnelt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-163">Granularity in the API Gateway tier can be especially useful for more advanced composite UI applications based on microservices, because the concept of a fine-grained API Gateway is similar to a UI composition service.</span></span> <span data-ttu-id="cbba3-164">Dies wird später unter [Erstellen einer zusammengesetzten Benutzeroberfläche anhand von Microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices) erläutert.</span><span class="sxs-lookup"><span data-stu-id="cbba3-164">We discuss this later in the [Creating composite UI based on microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span></span>

<span data-ttu-id="cbba3-165">Aus diesem Grund ist es im Hinblick auf mittelgroße bis große Anwendungen in der Regel hilfreich, ein benutzerdefiniertes API-Gateway zu verwenden. Dieses sollte allerdings nicht als einzelner monolithischer Aggregator oder eindeutiges zentrales benutzerdefiniertes API-Gateway verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-165">Therefore, for many medium- and large-size applications, using a custom-built API Gateway is usually a good approach, but not as a single monolithic aggregator or unique central custom API Gateway.</span></span>

<span data-ttu-id="cbba3-166">Stattdessen kann auch wie in Abbildung 4-14 dargestellt ein Produkt wie [Azure API Management](https://azure.microsoft.com/services/api-management/) verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-166">Another approach is to use a product like [Azure API Management](https://azure.microsoft.com/services/api-management/) as shown in Figure 4-14.</span></span> <span data-ttu-id="cbba3-167">Über diesen Ansatz wird nicht nur dafür gesorgt, dass die Anforderungen an Ihr API-Gateway erfüllt werden, sondern es werden auch Features wie das Sammeln von Eindrücken aus Ihren APIs bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-167">This approach not only solves your API Gateway needs, but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="cbba3-168">Wenn Sie eine API-Verwaltungslösung verwenden, macht das API-Gateway nur einen Teil der gesamten Lösung aus.</span><span class="sxs-lookup"><span data-stu-id="cbba3-168">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![](./media/image14.png)

<span data-ttu-id="cbba3-169">**Abbildung 4-14.**</span><span class="sxs-lookup"><span data-stu-id="cbba3-169">**Figure 4-14**.</span></span> <span data-ttu-id="cbba3-170">Verwenden von Azure API Management für das API-Gateway</span><span class="sxs-lookup"><span data-stu-id="cbba3-170">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="cbba3-171">In diesem Fall ist es nicht so riskant, wenn Sie nur über ein API-Gateway verfügen und Sie ein Produkt wie Azure API Management verwenden, da diese API-Gateway „dünner“ sind. Sie implementieren also keinen benutzerdefinierten C#-Code, der in eine monolithische Komponente umgewandelt werden könnte.</span><span class="sxs-lookup"><span data-stu-id="cbba3-171">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="cbba3-172">Die Vorgehensweise dieses Produkttyps ähnelt einem Reverseproxy für eingehende Kommunikation: Sie können die APIs der internen Microservices ebenfalls filtern und die Autorisierung auf die veröffentlichten APIs auf dieser einzelnen Ebene anwenden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-172">This type of product acts more like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="cbba3-173">Mithilfe der Informationen, die ein API Management-System bereitstellt, erhalten Sie einen Überblick über die Verwendung und die Leistung Ihrer APIs.</span><span class="sxs-lookup"><span data-stu-id="cbba3-173">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="cbba3-174">Sie erhalten nahezu in Echtzeit Analyseberichte, und es werden Trends ermittelt, die Auswirkungen auf Ihr Unternehmen haben könnten.</span><span class="sxs-lookup"><span data-stu-id="cbba3-174">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="cbba3-175">Außerdem erhalten Sie Protokolle zu Anforderungen und zur Antwortaktivität für weitere Online- und Offlineanalysen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-175">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="cbba3-176">Mit Azure API Management können Sie Ihre APIs mit einem Schlüssel, einem Token und mit IP-Filtern sichern.</span><span class="sxs-lookup"><span data-stu-id="cbba3-176">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="cbba3-177">Über dieses Feature können Sie flexible und präzise Kontingente erzwingen und Einschränkungen beurteilen, die Form und das Verhalten Ihrer APIs verändern, die Richtlinien verwenden, und die Leistung über das Speichern von Antworten verbessern.</span><span class="sxs-lookup"><span data-stu-id="cbba3-177">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="cbba3-178">In diesem Handbuch und in der Referenzbeispielanwendung (eShopOnContainers) wird die Architektur auf eine einfachere und benutzerdefinierte Architektur beschränkt, um den Fokus auf einfache Container zu legen, ohne PaaS-Produkte wie Azure API Management zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-178">In this guide and the reference sample application (eShopOnContainers), we are limiting the architecture to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="cbba3-179">Für große, auf einem Microservice basierende Anwendungen, die in Microsoft Azure bereitgestellt werden, wird allerdings empfohlen, Azure API Management zu prüfen und als Grundlage für Ihre API-Gateways zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="cbba3-179">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to review and adopt Azure API Management as the base for your API Gateways.</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="cbba3-180">Nachteile des API-Gatewaymusters</span><span class="sxs-lookup"><span data-stu-id="cbba3-180">Drawbacks of the API Gateway pattern</span></span>

-   <span data-ttu-id="cbba3-181">Der größte Nachteil entsteht, wenn Sie ein API-Gateway implementieren. Dann koppeln Sie diese Ebene an die internen Microservices.</span><span class="sxs-lookup"><span data-stu-id="cbba3-181">The most important drawback is that when you implement an API Gateway, you are coupling that tier with the internal microservices.</span></span> <span data-ttu-id="cbba3-182">Eine solche Kopplung kann schwerwiegende Folgen für Ihre Anwendung haben.</span><span class="sxs-lookup"><span data-stu-id="cbba3-182">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="cbba3-183">Clemens Vaster, Architekt im Azure Service Bus-Team, nennt dies in seinem Vortrag unter dem Titel [Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k) (Messaging und Microservices) auf der Konferenz GOTO 2016 den „neuen ESB“.</span><span class="sxs-lookup"><span data-stu-id="cbba3-183">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in his "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

-   <span data-ttu-id="cbba3-184">Wenn ein Microservices-API-Gateway verwendet wird, wird möglicherweise ein zusätzlicher Single Point of Failure erstellt.</span><span class="sxs-lookup"><span data-stu-id="cbba3-184">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

-   <span data-ttu-id="cbba3-185">Durch ein API-Gateway können aufgrund des zusätzlichen Netzwerkaufrufs längere Antwortzeiten entstehen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-185">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="cbba3-186">Dieser zusätzliche Aufruf hat in der Regel weniger Auswirkungen als die Verwendung einer Clientschnittstelle, die zu ausführlich ist und die internen Microservices direkt aufruft.</span><span class="sxs-lookup"><span data-stu-id="cbba3-186">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

-   <span data-ttu-id="cbba3-187">Wenn das API-Gateway nicht ordnungsgemäß hochskaliert wird, kann das API-Gateway zu Engpässen führen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-187">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

-   <span data-ttu-id="cbba3-188">Durch API-Gateways entstehen zusätzliche Kosten. Außerdem müssen sie verwaltet werden, wenn sie benutzerdefinierte Logik und Datenaggregation enthalten.</span><span class="sxs-lookup"><span data-stu-id="cbba3-188">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="cbba3-189">Entwickler müssen das API-Gateway aktualisieren, um die Endpunkte aller Microservices zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-189">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="cbba3-190">Außerdem kann es zu Codeveränderungen auf der API-Gatewayebene kommen, wenn sich die Implementierung in den internen Microservices ändert.</span><span class="sxs-lookup"><span data-stu-id="cbba3-190">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="cbba3-191">Wenn das API-Gateway allerdings nur die Sicherheit, Protokollierung und Versionsverwaltung anwendet (wie bei der Verwendung von Azure API Management), sollten keine zusätzlichen Kosten entstehen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-191">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

-   <span data-ttu-id="cbba3-192">Wenn das API-Gateway von nur einem Team entwickelt wird, kann es zu Engpässen bei der Entwicklung kommen.</span><span class="sxs-lookup"><span data-stu-id="cbba3-192">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="cbba3-193">Dies stellt einen weiteren Grund dar, warum es besser ist, über mehrere präzise API-Gateways zu verfügen, die auf die verschiedenen Clientanforderungen antworten.</span><span class="sxs-lookup"><span data-stu-id="cbba3-193">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="cbba3-194">Sie können ebenfalls das API-Gateway intern in mehrere Bereiche oder Ebenen aufteilen, die die verschiedenen Teams besitzen, die an den internen Microservices arbeiten.</span><span class="sxs-lookup"><span data-stu-id="cbba3-194">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cbba3-195">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="cbba3-195">Additional resources</span></span>

-   <span data-ttu-id="cbba3-196">**Charles Richardson. Muster: API Gateway / Backend for Front-End (API-Gateway / Back-End für Front-End)**
    [*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="cbba3-196">**Charles Richardson. Pattern: API Gateway / Backend for Front-End**
[*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span></span>

-   <span data-ttu-id="cbba3-197">**Azure API Management**
    [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="cbba3-197">**Azure API Management**
[*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

-   <span data-ttu-id="cbba3-198">**Udi Dahan. Service Oriented Composition (Dienstorientierte Komposition)**\\</span><span class="sxs-lookup"><span data-stu-id="cbba3-198">**Udi Dahan. Service Oriented Composition**\\</span></span>
    [<span data-ttu-id="cbba3-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span><span class="sxs-lookup"><span data-stu-id="cbba3-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span></span>](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

-   <span data-ttu-id="cbba3-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016 (Messaging und Microservices)** (Video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="cbba3-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="cbba3-201">[Zurück] (identify-microservice-domain-model-boundaries.md) [Weiter] (communication-in-microservice-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="cbba3-201">[Previous] (identify-microservice-domain-model-boundaries.md) [Next] (communication-in-microservice-architecture.md)</span></span>
