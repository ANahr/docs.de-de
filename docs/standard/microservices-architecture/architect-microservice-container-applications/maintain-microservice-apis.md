---
title: Erstellen, Weiterentwickeln und Verwalten von Versionen von Microservice-APIs und -verträgen
description: .NET-Microservicesarchitektur für .NET-Containeranwendungen | Erstellen, Weiterentwickeln und Verwalten von Versionen von Microservice-APIs und -verträgen
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: a2ec577a12cf677c2ec5e20a6f3e862911c82fbb
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 06/29/2018
ms.locfileid: "37105692"
---
# <a name="creating-evolving-and-versioning-microservice-apis-and-contracts"></a><span data-ttu-id="b9843-103">Erstellen, Weiterentwickeln und Verwalten von Versionen von Microservice-APIs und -verträgen</span><span class="sxs-lookup"><span data-stu-id="b9843-103">Creating, evolving, and versioning microservice APIs and contracts</span></span>

<span data-ttu-id="b9843-104">Eine Microservice-API stellt einen Vertrag zwischen dem Dienst und dessen Clients dar.</span><span class="sxs-lookup"><span data-stu-id="b9843-104">A microservice API is a contract between the service and its clients.</span></span> <span data-ttu-id="b9843-105">Sie können jetzt einen Microservice unabhängig weiterzuentwickeln, sofern Sie seinen API-Vertrag nicht brechen. Aus diesem Grund ist dieser Vertrag so wichtig ist.</span><span class="sxs-lookup"><span data-stu-id="b9843-105">You will be able to evolve a microservice independently only if you do not break its API contract, which is why the contract is so important.</span></span> <span data-ttu-id="b9843-106">Wenn Sie den Vertrag ändern, wirkt sich dies auf Ihre Clientanwendungen oder Ihr API-Gateway aus.</span><span class="sxs-lookup"><span data-stu-id="b9843-106">If you change the contract, it will impact your client applications or your API Gateway.</span></span>

<span data-ttu-id="b9843-107">Die Art der API-Definition ist von dem Protokoll abhängig, das Sie verwenden.</span><span class="sxs-lookup"><span data-stu-id="b9843-107">The nature of the API definition depends on which protocol you are using.</span></span> <span data-ttu-id="b9843-108">Wenn Sie z.B. Messaging (wie z.B. [AMQP](https://www.amqp.org/)) verwenden, besteht die API aus den Nachrichtentypen.</span><span class="sxs-lookup"><span data-stu-id="b9843-108">For instance, if you are using messaging (like [AMQP](https://www.amqp.org/)), the API consists of the message types.</span></span> <span data-ttu-id="b9843-109">Wenn Sie HTTP- und RESTful-Dienste verwenden, besteht die API aus den URLs und den JSON-Formaten für Anforderungen und Antworten.</span><span class="sxs-lookup"><span data-stu-id="b9843-109">If you are using HTTP and RESTful services, the API consists of the URLs and the request and response JSON formats.</span></span>

<span data-ttu-id="b9843-110">Selbst wenn Sie ihren ersten Vertrag gut durchdacht haben, muss sich die Dienst-API im Laufe der Zeit ändern.</span><span class="sxs-lookup"><span data-stu-id="b9843-110">However, even if you are thoughtful about your initial contract, a service API will need to change over time.</span></span> <span data-ttu-id="b9843-111">Wenn das geschieht – besonders wenn es sich bei Ihrer API um eine öffentliche API handelt, die von mehreren Clientanwendungen verwendet wird – können Sie in der Regel nicht alle Clients dazu zwingen, auf Ihren neuen API-Vertrag upzugraden.</span><span class="sxs-lookup"><span data-stu-id="b9843-111">When that happens—and especially if your API is a public API consumed by multiple client applications—you typically cannot force all clients to upgrade to your new API contract.</span></span> <span data-ttu-id="b9843-112">In der Regel müssen Sie neue Versionen eines Diensts inkrementell auf eine Weise bereitstellen, sodass sowohl die alte als auch die neue Version eines Dienstvertrags gleichzeitig ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="b9843-112">You usually need to incrementally deploy new versions of a service in a way that both old and new versions of a service contract are running simultaneously.</span></span> <span data-ttu-id="b9843-113">Deshalb ist es wichtig, dass Sie eine Strategie für die Versionsverwaltung Ihres Diensts haben.</span><span class="sxs-lookup"><span data-stu-id="b9843-113">Therefore, it is important to have a strategy for your service versioning.</span></span>

<span data-ttu-id="b9843-114">Wenn die Änderungen an der API klein sind, wenn Sie also Ihrer API zum Beispiel Attribute oder Parameter hinzufügen, sollten Clients, die eine ältere API verwenden, umschalten und mit der neueren Version des Diensts arbeiten.</span><span class="sxs-lookup"><span data-stu-id="b9843-114">When the API changes are small, like if you add attributes or parameters to your API, clients that use an older API should switch and work with the new version of the service.</span></span> <span data-ttu-id="b9843-115">Möglicherweise können Sie Standardwerte für fehlende Attribute bereitstellen, die erforderlich sind, und die Clients können überflüssige Antwortattribute ignorieren.</span><span class="sxs-lookup"><span data-stu-id="b9843-115">You might be able to provide default values for any missing attributes that are required, and the clients might be able to ignore any extra response attributes.</span></span>

<span data-ttu-id="b9843-116">Allerdings müssen Sie manchmal größere Änderungen an einer Dienst-API vornehmen und verstoßen dadurch gegen die Kompatibilitätsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="b9843-116">However, sometimes you need to make major and incompatible changes to a service API.</span></span> <span data-ttu-id="b9843-117">Da Sie möglicherweise nicht dazu in der Lage sind, Clientanwendungen oder Dienste zu einem sofortigen Upgrade auf die neue Version zu zwingen, muss ein Dienst ältere Versionen der API für einen gewissen Zeitraum unterstützen.</span><span class="sxs-lookup"><span data-stu-id="b9843-117">Because you might not be able to force client applications or services to upgrade immediately to the new version, a service must support older versions of the API for some period.</span></span> <span data-ttu-id="b9843-118">Wenn Sie einen HTTP-basierten Mechanismus wie REST verwenden, können Sie z.B. die Versionsnummer der API in die URL oder in einen HTTP-Header einbetten.</span><span class="sxs-lookup"><span data-stu-id="b9843-118">If you are using an HTTP-based mechanism such as REST, one approach is to embed the API version number in the URL or into a HTTP header.</span></span> <span data-ttu-id="b9843-119">Dann können Sie sich entscheiden, ob Sie beide Versionen des Diensts gleichzeitig in die gleiche Dienstinstanz implementieren, oder ob Sie verschiedene Instanzen bereitstellen, die jeweils eine Version der API verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="b9843-119">Then you can decide between implementing both versions of the service simultaneously within the same service instance, or deploying different instances that each handle a version of the API.</span></span> <span data-ttu-id="b9843-120">Ein guter Ansatz dafür ist das [Vermittlermuster](https://en.wikipedia.org/wiki/Mediator_pattern) (z.B. die [MediatR-Bibliothek](https://github.com/jbogard/MediatR)) zum Entkoppeln der verschiedenen Implementierungsversionen in unabhängige Handler.</span><span class="sxs-lookup"><span data-stu-id="b9843-120">A good approach for this is the [Mediator pattern](https://en.wikipedia.org/wiki/Mediator_pattern) (for example, [MediatR library](https://github.com/jbogard/MediatR)) to decouple the different implementation versions into independent handlers.</span></span>

<span data-ttu-id="b9843-121">Letztendlich ist [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) die beste Lösung für die Versionsverwaltung Ihrer Dienste und das Erlauben von entwickelbaren APIs, wenn Sie eine REST-Architektur verwenden.</span><span class="sxs-lookup"><span data-stu-id="b9843-121">Finally, if you are using a REST architecture, [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) is the best solution for versioning your services and allowing evolvable APIs.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b9843-122">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="b9843-122">Additional resources</span></span>

-   <span data-ttu-id="b9843-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy (Versionsverwaltung von RESTful-Web-APIs in ASP.NET Core leicht gemacht)**
    <https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx></span><span class="sxs-lookup"><span data-stu-id="b9843-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy**
<https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx></span></span>

-   <span data-ttu-id="b9843-124">**Versionsverwaltung einer RESTful-Web-API**
    [*https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api*](https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api)</span><span class="sxs-lookup"><span data-stu-id="b9843-124">**Versioning a RESTful web API**
[*https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api*](https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api)</span></span>

-   <span data-ttu-id="b9843-125">**Roy Fielding. Versioning, Hypermedia, and REST (Versionsverwaltung, Hypermedia und REST)**
    <https://www.infoq.com/articles/roy-fielding-on-versioning></span><span class="sxs-lookup"><span data-stu-id="b9843-125">**Roy Fielding. Versioning, Hypermedia, and REST**
<https://www.infoq.com/articles/roy-fielding-on-versioning></span></span>


>[!div class="step-by-step"]
<span data-ttu-id="b9843-126">[Zurück](asynchronous-message-based-communication.md)
[Weiter](microservices-addressability-service-registry.md)</span><span class="sxs-lookup"><span data-stu-id="b9843-126">[Previous](asynchronous-message-based-communication.md)
[Next](microservices-addressability-service-registry.md)</span></span>
