---
title: Kommunikation in einer Microservice-Architektur
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Kommunikation in einer Microservice Architektur Architekturen"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 8d38095a151b7568619b17340d768eff684d3271
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/22/2017
---
# <a name="communication-in-a-microservice-architecture"></a><span data-ttu-id="b0707-104">Kommunikation in einer Microservice-Architektur</span><span class="sxs-lookup"><span data-stu-id="b0707-104">Communication in a microservice architecture</span></span>

<span data-ttu-id="b0707-105">In einer monolithischen-Anwendung auf einem einzelnen Prozess ausgeführt wird rufen Sie Komponenten über Sprachebene-Methode oder Funktionsaufrufen.</span><span class="sxs-lookup"><span data-stu-id="b0707-105">In a monolithic application running on a single process, components invoke one another using language-level method or function calls.</span></span> <span data-ttu-id="b0707-106">Diese können stark verbunden werden, wenn Sie Objekte mit Code erstellen (z. B. `new ClassName()`), oder Sie können in einer entkoppelten Weise aufgerufen werden, wenn Sie durch Verweisen auf Abstraktionen statt konkrete Objektinstanzen Abhängigkeitsinjektion verwenden.</span><span class="sxs-lookup"><span data-stu-id="b0707-106">These can be strongly coupled if you are creating objects with code (for example, `new ClassName()`), or can be invoked in a decoupled way if you are using Dependency Injection by referencing abstractions rather than concrete object instances.</span></span> <span data-ttu-id="b0707-107">In beiden Fällen werden die Objekte innerhalb des gleichen Prozesses ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="b0707-107">Either way, the objects are running within the same process.</span></span> <span data-ttu-id="b0707-108">Die größte Herausforderung beim Ändern von einer monolithischen-Anwendung auf eine Microservices-basierte Anwendung liegt in der Kommunikationsmechanismus ändern.</span><span class="sxs-lookup"><span data-stu-id="b0707-108">The biggest challenge when changing from a monolithic application to a microservices-based application lies in changing the communication mechanism.</span></span> <span data-ttu-id="b0707-109">Eine direkte Konvertierung von in-Process-Methodenaufrufe in RPC-Aufrufe an Dienste führt dazu, dass eine ' geschwätzige ' und nicht effiziente Kommunikation, die nicht, auch in ausgeführt werden verteilten Umgebungen.</span><span class="sxs-lookup"><span data-stu-id="b0707-109">A direct conversion from in-process method calls into RPC calls to services will cause a chatty and not efficient communication that will not perform well in distributed environments.</span></span> <span data-ttu-id="b0707-110">Die schwierigkeiten der verteilten System ordnungsgemäß entworfen werden gut genug bezeichnet, auch bekannt als Regeln vorhanden ist die [der Fallacies distributed Computing](https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing) auflistet, die Entwickler häufig beim Verschieben stellen von Annahmen um verteilte Designs monolithischen.</span><span class="sxs-lookup"><span data-stu-id="b0707-110">The challenges of designing distributed system properly are well enough known that there is even a canon known as the [The fallacies of distributed computing](https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing) that lists assumptions that developers often make when moving from monolithic to distributed designs.</span></span>

<span data-ttu-id="b0707-111">Es ist nicht in einer Projektmappe, aber einige.</span><span class="sxs-lookup"><span data-stu-id="b0707-111">There is not one solution, but several.</span></span> <span data-ttu-id="b0707-112">Eine Lösung umfasst die Business Microservices so weit wie möglich zu isolieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-112">One solution involves isolating the business microservices as much as possible.</span></span> <span data-ttu-id="b0707-113">Asynchronen Kommunikation zwischen internen Microservices verwenden, und ersetzen die differenzierte Kommunikation, die typisch für prozessinterne Kommunikation zwischen Objekten mit gröbere Kommunikation ist ein.</span><span class="sxs-lookup"><span data-stu-id="b0707-113">You then use asynchronous communication between the internal microservices and replace fine-grained communication that is typical in intra-process communication between objects with coarser-grained communication.</span></span> <span data-ttu-id="b0707-114">Sie können dazu durch Gruppieren von aufrufen und Daten, die aggregiert die Ergebnisse der mehrere interne Aufrufe an den Client zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="b0707-114">You can do this by grouping calls, and by returning data that aggregates the results of multiple internal calls, to the client.</span></span>

<span data-ttu-id="b0707-115">Eine Microservices basierende Anwendung ist ein verteiltes System auf mehrere Prozesse oder -Dienste in der Regel auf mehreren Servern oder Hosts ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b0707-115">A microservices-based application is a distributed system running on multiple processes or services, usually even across multiple servers or hosts.</span></span> <span data-ttu-id="b0707-116">Jede Dienstinstanz ist in der Regel ein Prozess.</span><span class="sxs-lookup"><span data-stu-id="b0707-116">Each service instance is typically a process.</span></span> <span data-ttu-id="b0707-117">Aus diesem Grund müssen Dienste interagieren mithilfe eines Protokolls, prozessübergreifende Kommunikation, z. B. HTTP, AMQP oder ein binäres Protokoll wie TCP, je nach Art der einzelnen Dienste.</span><span class="sxs-lookup"><span data-stu-id="b0707-117">Therefore, services must interact using an inter-process communication protocol such as HTTP, AMQP, or a binary protocol like TCP, depending on the nature of each service.</span></span>

<span data-ttu-id="b0707-118">Die Community Microservice stuft die Philosophie "[intelligente Endpunkte und dumb Pipes](http://simplicable.com/new/smart-endpoints-and-dumb-pipes)."</span><span class="sxs-lookup"><span data-stu-id="b0707-118">The microservice community promotes the philosophy of “[smart endpoints and dumb pipes](http://simplicable.com/new/smart-endpoints-and-dumb-pipes).”</span></span> <span data-ttu-id="b0707-119">Diese Motto empfiehlt es sich um ein Entwurf, der als entkoppelt wird, wie möglich zwischen Microservices und als möglichst innerhalb einer einzelnen Microservice kann.</span><span class="sxs-lookup"><span data-stu-id="b0707-119">This slogan encourages a design that is as decoupled as possible between microservices, and as cohesive as possible within a single microservice.</span></span> <span data-ttu-id="b0707-120">Wie zuvor erläutert, besitzt jede Microservice seine eigenen Daten und ihrer eigenen Domänenlogik.</span><span class="sxs-lookup"><span data-stu-id="b0707-120">As explained earlier, each microservice owns its own data and its own domain logic.</span></span> <span data-ttu-id="b0707-121">Aber das Verfassen einer End-to-End-Anwendung Microservices sind in der Regel einfach mithilfe von REST-Kommunikation statt komplexe Protokolle wie WS - choreographed\* und flexible ereignisgesteuerte Kommunikation statt zentralisierte Business Process Orchestrators.</span><span class="sxs-lookup"><span data-stu-id="b0707-121">But the microservices composing an end-to-end application are usually simply choreographed by using REST communications rather than complex protocols such as WS-\* and flexible event-driven communications instead of centralized business-process-orchestrators.</span></span>

<span data-ttu-id="b0707-122">Die zwei häufig verwendete Protokolle sind HTTP-Anforderung/Antwort mit Ressourcen-APIs (wenn die meisten aller Abfragen) und einfaches asynchrones messaging bei der Kommunikation über mehrere Microservices aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="b0707-122">The two commonly used protocols are HTTP request/response with resource APIs (when querying most of all), and lightweight asynchronous messaging when communicating updates across multiple microservices.</span></span> <span data-ttu-id="b0707-123">Diese werden in den folgenden Abschnitten ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="b0707-123">These are explained in more detail in the following sections.</span></span>

## <a name="communication-types"></a><span data-ttu-id="b0707-124">Kommunikationstypen</span><span class="sxs-lookup"><span data-stu-id="b0707-124">Communication types</span></span>

<span data-ttu-id="b0707-125">Clients und Dienste können über viele verschiedene Arten von Kommunikation, jeweils für ein anderes Szenario "und"-Zielen kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-125">Client and services can communicate through many different types of communication, each one targeting a different scenario and goals.</span></span> <span data-ttu-id="b0707-126">Anfänglich können diese Arten der Kommunikation in zwei Achsen klassifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="b0707-126">Initially, those types of communications can be classified in two axes.</span></span>

<span data-ttu-id="b0707-127">Wenn das Protokoll synchron oder asynchron ist, ist die erste Achse definieren:</span><span class="sxs-lookup"><span data-stu-id="b0707-127">The first axis is defining if the protocol is synchronous or asynchronous:</span></span>

-   <span data-ttu-id="b0707-128">Synchrone Protokoll.</span><span class="sxs-lookup"><span data-stu-id="b0707-128">Synchronous protocol.</span></span> <span data-ttu-id="b0707-129">HTTP ist ein synchroner Protokoll.</span><span class="sxs-lookup"><span data-stu-id="b0707-129">HTTP is a synchronous protocol.</span></span> <span data-ttu-id="b0707-130">Der Client sendet eine Anforderung und wartet auf eine Antwort vom Dienst.</span><span class="sxs-lookup"><span data-stu-id="b0707-130">The client sends a request and waits for a response from the service.</span></span> <span data-ttu-id="b0707-131">Dies ist unabhängig von der Ausführung des Client-Codes, der synchrone werden konnte (Thread blockiert ist) oder asynchron (Thread nicht blockiert ist und die Antwort einen Rückruf schließlich erreichen wird).</span><span class="sxs-lookup"><span data-stu-id="b0707-131">That is independent of the client code execution that could be synchronous (thread is blocked) or asynchronous (thread is not blocked, and the response will reach a callback eventually).</span></span> <span data-ttu-id="b0707-132">Wichtig dabei ist, dass das Protokoll (HTTP/HTTPS) synchron erfolgt, und Clientcode den Vorgang nur der Aufgabe beim Empfang der HTTP-Server-Antwort fortsetzen kann.</span><span class="sxs-lookup"><span data-stu-id="b0707-132">The important point here is that the protocol (HTTP/HTTPS) is synchronous and the client code can only continue its task when it receives the HTTP server response.</span></span>

-   <span data-ttu-id="b0707-133">Asynchrone Protokoll.</span><span class="sxs-lookup"><span data-stu-id="b0707-133">Asynchronous protocol.</span></span> <span data-ttu-id="b0707-134">Asynchrone Nachrichten Verwendung anderer Protokolle wie AMQP (ein Protokoll, das viele Betriebssysteme und Cloud-Umgebungen unterstützt).</span><span class="sxs-lookup"><span data-stu-id="b0707-134">Other protocols like AMQP (a protocol supported by many operating systems and cloud environments) use asynchronous messages.</span></span> <span data-ttu-id="b0707-135">Der Client-Code oder eine Nachricht Absender wartet auf eine Antwort in der Regel nicht.</span><span class="sxs-lookup"><span data-stu-id="b0707-135">The client code or message sender usually does not wait for a response.</span></span> <span data-ttu-id="b0707-136">Er sendet nur die Nachricht als beim Senden einer Nachricht an eine RabbitMQ-Warteschlange oder eine beliebige andere nachrichtenbroker.</span><span class="sxs-lookup"><span data-stu-id="b0707-136">It just sends the message as when sending a message to a RabbitMQ queue or any other message broker.</span></span>

<span data-ttu-id="b0707-137">Die zweite Achse ist definieren, wenn die Kommunikation auf einem einzelnen Empfänger oder mehreren Empfängern hat:</span><span class="sxs-lookup"><span data-stu-id="b0707-137">The second axis is defining if the communication has a single receiver or multiple receivers:</span></span>

-   <span data-ttu-id="b0707-138">Einzelne Empfänger.</span><span class="sxs-lookup"><span data-stu-id="b0707-138">Single receiver.</span></span> <span data-ttu-id="b0707-139">Jede Anforderung muss von genau einem Empfänger oder Ihrem Dienst verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="b0707-139">Each request must be processed by exactly one receiver or service.</span></span> <span data-ttu-id="b0707-140">Ein Beispiel für diese Kommunikation wird die [Befehlsmuster](https://en.wikipedia.org/wiki/Command_pattern).</span><span class="sxs-lookup"><span data-stu-id="b0707-140">An example of this communication is the [Command pattern](https://en.wikipedia.org/wiki/Command_pattern).</span></span>

-   <span data-ttu-id="b0707-141">Mehrere Empfänger.</span><span class="sxs-lookup"><span data-stu-id="b0707-141">Multiple receivers.</span></span> <span data-ttu-id="b0707-142">Jede Anforderung kann von 0 (null) an mehrere Empfänger verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="b0707-142">Each request can be processed by zero to multiple receivers.</span></span> <span data-ttu-id="b0707-143">Diese Art der Kommunikation muss asynchron sein.</span><span class="sxs-lookup"><span data-stu-id="b0707-143">This type of communication must be asynchronous.</span></span> <span data-ttu-id="b0707-144">Ein Beispiel ist die [Veröffentlichen/Abonnieren](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern) Mechanismus zur Muster wie [Architektur ereignisgesteuerte](http://microservices.io/patterns/data/event-driven-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="b0707-144">An example is the [publish/subscribe](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern) mechanism used in patterns like [Event-driven architecture](http://microservices.io/patterns/data/event-driven-architecture.html).</span></span> <span data-ttu-id="b0707-145">Dieser Wert basiert auf einem Ereignisbus Schnittstelle oder Nachricht Broker Datenupdates zwischen mehreren Microservices über Ereignisse zu verteilen; Er ist in der Regel implementiert, über einen Servicebus oder eine ähnliche Artefakt wie [Azure Service Bus](https://azure.microsoft.com/services/service-bus/) mit [Themen und Abonnements](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span><span class="sxs-lookup"><span data-stu-id="b0707-145">This is based on an event-bus interface or message broker when propagating data updates between multiple microservices through events; it is usually implemented through a service bus or similar artifact like [Azure Service Bus](https://azure.microsoft.com/services/service-bus/) by using [topics and subscriptions](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span>

<span data-ttu-id="b0707-146">Eine Microservice basierenden Anwendung wird häufig eine Kombination dieser Stile für die Kommunikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="b0707-146">A microservice-based application will often use a combination of these communication styles.</span></span> <span data-ttu-id="b0707-147">Die am häufigsten verwendete Typ ist Single-Empfänger-Kommunikation mit einem synchronen Protokoll wie HTTP/HTTPS, einen regulären HTTP-Web-API-Dienst aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b0707-147">The most common type is single-receiver communication with a synchronous protocol like HTTP/HTTPS when invoking a regular Web API HTTP service.</span></span> <span data-ttu-id="b0707-148">Microservices verwenden messaging-Protokolle in der Regel auch für die asynchrone Kommunikation zwischen Microservices.</span><span class="sxs-lookup"><span data-stu-id="b0707-148">Microservices also typically use messaging protocols for asynchronous communication between microservices.</span></span>

<span data-ttu-id="b0707-149">Diese Achsen sind gut bekannt sein, um die Klarheit auf der möglichen Kommunikationsmechanismen stehen Ihnen, aber sie sind nicht die wichtige Aspekte beim Microservices zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="b0707-149">These axes are good to know so you have clarity on the possible communication mechanisms, but they are not the important concerns when building microservices.</span></span> <span data-ttu-id="b0707-150">Des asynchronen Charakters der Client Threadausführung auch nicht der asynchronen Natur des ausgewählten Protokolls werden die wichtigen Aspekte bei der Integration von Microservices.</span><span class="sxs-lookup"><span data-stu-id="b0707-150">The asynchronous nature of client thread execution not even the asynchronous nature of the selected protocol are the important points when integrating microservices.</span></span> <span data-ttu-id="b0707-151">Was *ist* wichtig ist die Möglichkeit, Ihre Microservices wird asynchron und gleichzeitig die Unabhängigkeit des Microservices, integrieren, wie im folgenden Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="b0707-151">What *is* important is being able to integrate your microservices asynchronously while maintaining the independence of microservices, as explained in the following section.</span></span>

## <a name="asynchronous-microservice-integration-enforces-microservices-autonomy"></a><span data-ttu-id="b0707-152">Asynchrone Microservice Integration erzwingt die Microservice Autonomie</span><span class="sxs-lookup"><span data-stu-id="b0707-152">Asynchronous microservice integration enforces microservice’s autonomy</span></span>

<span data-ttu-id="b0707-153">Wie bereits erwähnt, ist der wichtige Punkt beim Erstellen einer Microservices-basierte Anwendung die Möglichkeit, Ihre Microservices zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-153">As mentioned, the important point when building a microservices-based application is the way you integrate your microservices.</span></span> <span data-ttu-id="b0707-154">Im Idealfall sollten Sie versuchen, um die Kommunikation zwischen internen Microservices zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-154">Ideally, you should try to minimize the communication between the internal microservices.</span></span> <span data-ttu-id="b0707-155">Die weniger Kommunikation zwischen Microservices, desto besser.</span><span class="sxs-lookup"><span data-stu-id="b0707-155">The less communications between microservices, the better.</span></span> <span data-ttu-id="b0707-156">Aber natürlich in vielen Fällen müssen die Microservices irgendwie integrieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-156">But of course, in many cases you will have to somehow integrate the microservices.</span></span> <span data-ttu-id="b0707-157">Sie müssen dies tun, ist hier die kritischen Regel, dass die Kommunikation zwischen den Microservices asynchron sein sollte.</span><span class="sxs-lookup"><span data-stu-id="b0707-157">When you need to do that, the critical rule here is that the communication between the microservices should be asynchronous.</span></span> <span data-ttu-id="b0707-158">Dies bedeutet nicht, dass Sie ein bestimmtes Protokoll (z. B. asynchrones messaging im Vergleich zu synchronem HTTP) verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="b0707-158">That does not mean that you have to use a specific protocol (for example, asynchronous messaging versus synchronous HTTP).</span></span> <span data-ttu-id="b0707-159">Es bedeutet lediglich, dass die Kommunikation zwischen Microservices sollte nur von asynchron Weitergeben von Daten vorgenommen werden, Sie sollten aber nicht von anderen internen Microservices als Teil des ursprünglichen Diensts HTTP-Anforderung/Antwort-Vorgang abhängig sind.</span><span class="sxs-lookup"><span data-stu-id="b0707-159">It just means that the communication between microservices should be done only by propagating data asynchronously, but try not to depend on other internal microservices as part of the initial service’s HTTP request/response operation.</span></span>

<span data-ttu-id="b0707-160">Wenn möglich, nie richten sich nach synchrone Kommunikation (Anforderungsantwort) zwischen mehreren Microservices, auch nicht für Abfragen.</span><span class="sxs-lookup"><span data-stu-id="b0707-160">If possible, never depend on synchronous communication (request/response) between multiple microservices, not even for queries.</span></span> <span data-ttu-id="b0707-161">Das Ziel der einzelnen Microservice werden autonome und an den Client-Consumer verfügbar sein, selbst wenn die anderen Dienste, die Teil der End-to-End-Anwendung sind heruntergefahren oder fehlerhaft sind.</span><span class="sxs-lookup"><span data-stu-id="b0707-161">The goal of each microservice is to be autonomous and available to the client consumer, even if the other services that are part of the end-to-end application are down or unhealthy.</span></span> <span data-ttu-id="b0707-162">Wenn Sie glauben, dass Sie müssen einen Aufruf aus einem Microservice an andere Microservices (z. B. das Ausführen einer HTTP-Anforderung für eine Datenabfrage) ausführen, bestellen, um eine Antwort auf eine Clientanwendung bereitstellen zu können, müssen Sie eine Architektur, die nicht stabil, wenn einige Microservices ein Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="b0707-162">If you think you need to make a call from one microservice to other microservices (like performing an HTTP request for a data query) in order to be able to provide a response to a client application, you have an architecture that will not be resilient when some microservices fail.</span></span>

<span data-ttu-id="b0707-163">Darüber hinaus mit HTTP-Abhängigkeiten zwischen Microservices, z. B. beim Erstellen von langen Anforderung/Antwort-Zyklen mit HTTP-Ketten zu erkennen, anfordern entsprechend der erste Teil der Abbildung 4-15, nicht nur können Ihre Microservices nicht autonome aber auch ihre Leistung beeinträchtigt werden, sobald einer der Dienste in der Kette nicht gut funktioniert.</span><span class="sxs-lookup"><span data-stu-id="b0707-163">Moreover, having HTTP dependencies between microservices, like when creating long request/response cycles with HTTP request chains, as shown in the first part of the Figure 4-15, not only makes your microservices not autonomous but also their performance is impacted as soon as one of the services in that chain is not performing well.</span></span> 

<span data-ttu-id="b0707-164">Je mehr Sie synchrone Abhängigkeiten zwischen Microservices, z. B. abfrageanforderungen hinzugefügt werden, desto schlechter Ruft für die gesamte Antwortzeit für die Client-apps.</span><span class="sxs-lookup"><span data-stu-id="b0707-164">The more you add synchronous dependencies between microservices, such as query requests, the worse the overall response time gets for the client apps.</span></span>

![](./media/image15.png)

<span data-ttu-id="b0707-165">**Abbildung 4 – 15**.</span><span class="sxs-lookup"><span data-stu-id="b0707-165">**Figure 4-15**.</span></span> <span data-ttu-id="b0707-166">Antimuster und Muster, bei der Kommunikation zwischen microservices</span><span class="sxs-lookup"><span data-stu-id="b0707-166">Anti-patterns and patterns in communication between microservices</span></span>

<span data-ttu-id="b0707-167">Wenn Ihre Microservice eine weitere Aktion in einer anderen Microservice auslösen muss, wenn möglich, führen Sie nicht mit dieser Aktion synchron und als Teil der ursprünglichen Microservice-Anforderung und Antwort-Vorgang.</span><span class="sxs-lookup"><span data-stu-id="b0707-167">If your microservice needs to raise an additional action in another microservice, if possible, do not perform that action synchronously and as part of the original microservice request and reply operation.</span></span> <span data-ttu-id="b0707-168">Führen Sie es stattdessen asynchron (mit asynchrones messaging oder integrationsereignisse, Warteschlangen, usw.).</span><span class="sxs-lookup"><span data-stu-id="b0707-168">Instead, do it asynchronously (using asynchronous messaging or integration events, queues, etc.).</span></span> <span data-ttu-id="b0707-169">Aber so weit wie möglich, die Aktion synchron als Teil der ursprünglichen synchronen Anforderung und Antwort-Vorgang nicht aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="b0707-169">But, as much as possible, do not invoke the action synchronously as part of the original synchronous request and reply operation.</span></span>

<span data-ttu-id="b0707-170">Und schließlich (und, in denen meisten Probleme auftreten, wenn es sich bei Microservices erstellen), wenn Ihre anfängliche Microservice Daten, die ursprünglich von anderen Microservices gehört benötigt, beruhen nicht auf, die synchrone Anforderungen für diese Daten.</span><span class="sxs-lookup"><span data-stu-id="b0707-170">And finally (and this is where most of the issues arise when building microservices), if your initial microservice needs data that is originally owned by other microservices, do not rely on making synchronous requests for that data.</span></span> <span data-ttu-id="b0707-171">Stattdessen repliziert oder verteilt diese Daten (nur die Attribute, die Sie benötigen) in der ursprünglichen Datenbank des Diensts mit eventuellen Konsistenz (i. d. r. mit integrationsereignisse, wie in den nächsten Abschnitten erläutert).</span><span class="sxs-lookup"><span data-stu-id="b0707-171">Instead, replicate or propagate that data (only the attributes you need) into the initial service’s database by using eventual consistency (typically by using integration events, as explained in upcoming sections).</span></span>

<span data-ttu-id="b0707-172">Wie bereits im Abschnitt erwähnt [identifizieren Domänenmodell Grenzen für jeden Microservice](#identifying-domain-model-boundaries-for-each-microservice), einige Daten über mehrere Microservices duplizieren ist ein falscher Entwurf – im Gegensatz dazu bei, die Sie ausführen kann übersetzen die Eingabefunktionen in der sprachspezifischen Richtlinien oder Bestimmungen der, dass zusätzliche Domänen- oder begrenzt, die den Kontext.</span><span class="sxs-lookup"><span data-stu-id="b0707-172">As noted earlier in the section [Identifying domain-model boundaries for each microservice](#identifying-domain-model-boundaries-for-each-microservice), duplicating some data across several microservices is not an incorrect design—on the contrary, when doing that you can translate the data into the specific language or terms of that additional domain or Bounded Context.</span></span> <span data-ttu-id="b0707-173">Für die Instanz, in der [eShopOnContainers](http://aka.ms/MicroservicesArchitecture) Anwendung, die Sie haben ein Microservice mit dem Namen identity.api, der eine Entität namens Benutzer für die meisten Daten des Benutzers ist.</span><span class="sxs-lookup"><span data-stu-id="b0707-173">For instance, in the [eShopOnContainers](http://aka.ms/MicroservicesArchitecture) application you have a microservice named identity.api that is in charge of most of the user’s data with an entity named User.</span></span> <span data-ttu-id="b0707-174">Wenn Sie Daten über den Benutzer in der Reihenfolge Microservice speichern müssen, speichern Sie es jedoch als eine andere Entität mit dem Namen Käufer.</span><span class="sxs-lookup"><span data-stu-id="b0707-174">However, when you need to store data about the user within the Ordering microservice, you store it as a different entity named Buyer.</span></span> <span data-ttu-id="b0707-175">Die Entität Käufer gemeinsam die gleiche Identität mit der ursprünglichen Benutzerentität, aber möglicherweise nur die von der Domäne Sortier- und nicht das gesamte Benutzerprofil benötigt einige Attribute.</span><span class="sxs-lookup"><span data-stu-id="b0707-175">The Buyer entity shares the same identity with the original User entity, but it might have only the few attributes needed by the Ordering domain, and not the whole user profile.</span></span>

<span data-ttu-id="b0707-176">Sie können ein Protokoll verwenden, kommunizieren und weitergeben Daten asynchron über Microservices um eventuelle Konsistenz haben.</span><span class="sxs-lookup"><span data-stu-id="b0707-176">You might use any protocol to communicate and propagate data asynchronously across microservices in order to have eventual consistency.</span></span> <span data-ttu-id="b0707-177">Wie bereits erwähnt, können Sie mithilfe eines Ereignisbus oder einer Meldung, dass Broker oder Sie auch HTTP verwenden, können durch Abfragen an die anderen Dienste stattdessen-integrationsereignisse verwenden.</span><span class="sxs-lookup"><span data-stu-id="b0707-177">As mentioned, you could use integration events using an event bus or message broker or you could even use HTTP by polling the other services instead.</span></span> <span data-ttu-id="b0707-178">Es spielt keine Rolle.</span><span class="sxs-lookup"><span data-stu-id="b0707-178">It does not matter.</span></span> <span data-ttu-id="b0707-179">Die wichtige Regel besteht darin nicht synchrone Abhängigkeiten zwischen Ihrem Microservices erstellen.</span><span class="sxs-lookup"><span data-stu-id="b0707-179">The important rule is to not create synchronous dependencies between your microservices.</span></span>

<span data-ttu-id="b0707-180">In den folgenden Abschnitten wird erläutert, die mehrere Stile für die Kommunikation in einer Microservice-basierten Anwendung berücksichtigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="b0707-180">The following sections explain the multiple communication styles you can consider using in a microservice-based application.</span></span>

## <a name="communication-styles"></a><span data-ttu-id="b0707-181">Kommunikation-Stile</span><span class="sxs-lookup"><span data-stu-id="b0707-181">Communication styles</span></span>

<span data-ttu-id="b0707-182">Es gibt viele Protokolle und Optionen, die Sie für die Kommunikation, je nach der Kommunikationsart verwenden können, die Sie verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="b0707-182">There are many protocols and choices you can use for communication, depending on the communication type you want to use.</span></span> <span data-ttu-id="b0707-183">Wenn Sie einen synchrone Anforderung/Antwort basierende Kommunikationsmechanismus verwenden, Protokolle wie HTTP und REST Ansätze die häufigsten Ursachen sind, insbesondere dann, wenn Sie Ihre Dienste außerhalb eines Clusters Docker-Host oder Microservice veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="b0707-183">If you are using a synchronous request/response-based communication mechanism, protocols such as HTTP and REST approaches are the most common, especially if you are publishing your services outside the Docker host or microservice cluster.</span></span> <span data-ttu-id="b0707-184">Wenn Sie zwischen Diensten intern (innerhalb der Docker-Host oder Microservices Cluster) kommunizieren möchten Sie möglicherweise auch Binärformat Kommunikationsmechanismen (z. B. Service Fabric-Remoting oder WCF TCP und Binärformat mit) verwenden.</span><span class="sxs-lookup"><span data-stu-id="b0707-184">If you are communicating between services internally (within your Docker host or microservices cluster) you might also want to use binary format communication mechanisms (like Service Fabric remoting or WCF using TCP and binary format).</span></span> <span data-ttu-id="b0707-185">Alternativ können Sie asynchrone und die meldungsbasierte Kommunikationsmechanismen wie AMQP verwenden.</span><span class="sxs-lookup"><span data-stu-id="b0707-185">Alternatively, you can use asynchronous, message-based communication mechanisms such as AMQP.</span></span>

<span data-ttu-id="b0707-186">Es gibt auch mehrere Nachrichtenformate wie JSON oder XML- oder sogar binäre Formate, die effizienter sein können.</span><span class="sxs-lookup"><span data-stu-id="b0707-186">There are also multiple message formats like JSON or XML, or even binary formats, which can be more efficient.</span></span> <span data-ttu-id="b0707-187">Ist die ausgewählte Binärformat kein Standard, ist es wahrscheinlich nicht ratsam, Ihre Dienste, die mit diesem Format öffentlich zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="b0707-187">If your chosen binary format is not a standard, it is probably not a good idea to publicly publish your services using that format.</span></span> <span data-ttu-id="b0707-188">Sie können einen nicht standardmäßigen Format für die interne Kommunikation zwischen Ihrem Microservices.</span><span class="sxs-lookup"><span data-stu-id="b0707-188">You could use a non-standard format for internal communication between your microservices.</span></span> <span data-ttu-id="b0707-189">Sie können so vorgehen, bei der Kommunikation zwischen Microservices im Docker-Host oder Microservice Custer (Docker Orchestrators oder Azure Service Fabric) oder für proprietäre Clientanwendungen, die mit der Microservices kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="b0707-189">You might do this when communicating between microservices within your Docker host or microservice cluster (Docker orchestrators or Azure Service Fabric), or for proprietary client applications that talk to the microservices.</span></span>

### <a name="requestresponse-communication-with-http-and-rest"></a><span data-ttu-id="b0707-190">Anforderung/Antwort-Kommunikation mit HTTP und REST</span><span class="sxs-lookup"><span data-stu-id="b0707-190">Request/response communication with HTTP and REST</span></span> 

<span data-ttu-id="b0707-191">Wenn ein Client-Anforderung/Antwort-Kommunikation verwendet wird, sendet eine Anforderung an einen Dienst, klicken Sie dann den verarbeitet die Anforderung und sendet eine Antwort zurück.</span><span class="sxs-lookup"><span data-stu-id="b0707-191">When a client uses request/response communication, it sends a request to a service, then the service processes the request and sends back a response.</span></span> <span data-ttu-id="b0707-192">Anforderung/Antwort-Kommunikation ist besonders gut geeignet, zum Abfragen von Daten für eine Echtzeit-Benutzeroberfläche (live Benutzeroberfläche) von Client-apps.</span><span class="sxs-lookup"><span data-stu-id="b0707-192">Request/response communication is especially well suited for querying data for a real-time UI (a live user interface) from client apps.</span></span> <span data-ttu-id="b0707-193">Aus diesem Grund in einer Architektur mit Microservice verwenden wahrscheinlich diesen Kommunikationsmechanismus für die meisten Abfragen, Sie wie in Abbildung 4-16 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="b0707-193">Therefore, in a microservice architecture you will probably use this communication mechanism for most queries, as shown in Figure 4-16.</span></span>

![](./media/image16.png)

<span data-ttu-id="b0707-194">**Abbildung 4-16**.</span><span class="sxs-lookup"><span data-stu-id="b0707-194">**Figure 4-16**.</span></span> <span data-ttu-id="b0707-195">Mithilfe von HTTP-Anforderung/Antwort-Kommunikation (synchron oder asynchron)</span><span class="sxs-lookup"><span data-stu-id="b0707-195">Using HTTP request/response communication (synchronous or asynchronous)</span></span>

<span data-ttu-id="b0707-196">Wenn ein Client-Anforderung/Antwort-Kommunikation verwendet wird, wird angenommen, dass es sich bei die Antwort in kurzer Zeit, in der Regel weniger als einer Sekunde oder ein paar Sekunden darf höchstens per Post erhalten.</span><span class="sxs-lookup"><span data-stu-id="b0707-196">When a client uses request/response communication, it assumes that the response will arrive in a short time, typically less than a second, or a few seconds at most.</span></span> <span data-ttu-id="b0707-197">Für verzögerte Antworten müssen Sie zum Implementieren der asynchronen Kommunikation, die auf der Grundlage [Nachrichtenmuster](https://docs.microsoft.com/azure/architecture/patterns/category/messaging) und [messaging Technologien](https://en.wikipedia.org/wiki/Message-oriented_middleware), also in einen anderen Ansatz, in denen wir im nächsten Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="b0707-197">For delayed responses, you need to implement asynchronous communication based on [messaging patterns](https://docs.microsoft.com/azure/architecture/patterns/category/messaging) and [messaging technologies](https://en.wikipedia.org/wiki/Message-oriented_middleware), which is a different approach that we explain in the next section.</span></span>

<span data-ttu-id="b0707-198">Eine beliebte architektonische Formatvorlage für die Anforderung/Antwort-Kommunikation ist [REST](https://en.wikipedia.org/wiki/Representational_state_transfer).</span><span class="sxs-lookup"><span data-stu-id="b0707-198">A popular architectural style for request/response communication is [REST](https://en.wikipedia.org/wiki/Representational_state_transfer).</span></span> <span data-ttu-id="b0707-199">Dieser Ansatz basiert auf und eng gekoppelt, die [HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) -Protokolls, HTTP-Verben wie GET, POST, Hinwendung und PUT.</span><span class="sxs-lookup"><span data-stu-id="b0707-199">This approach is based on, and tightly coupled to, the [HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) protocol, embracing HTTP verbs like GET, POST, and PUT.</span></span> <span data-ttu-id="b0707-200">REST ist die am häufigsten verwendeten architektonische Kommunikation Vorgehensweise beim Erstellen von Diensten.</span><span class="sxs-lookup"><span data-stu-id="b0707-200">REST is the most commonly used architectural communication approach when creating services.</span></span> <span data-ttu-id="b0707-201">Sie können die REST-Dienste implementieren, bei der Entwicklung von ASP.NET Core Web-API-Diensten.</span><span class="sxs-lookup"><span data-stu-id="b0707-201">You can implement REST services when you develop ASP.NET Core Web API services.</span></span>

<span data-ttu-id="b0707-202">Bei Verwendung von HTTP-REST-Dienste als Ihre Interface Definition Language, ist zusätzlicher-Wert.</span><span class="sxs-lookup"><span data-stu-id="b0707-202">There is additional value when using HTTP REST services as your interface definition language.</span></span> <span data-ttu-id="b0707-203">Z. B. bei Verwendung von [Swagger-Metadaten](http://swagger.io/) um die dienstverwaltungs-API zu beschreiben, können Sie mithilfe der Tools, die Clientstubs zu generieren, die direkt erkennen und Ihre Dienste nutzen können.</span><span class="sxs-lookup"><span data-stu-id="b0707-203">For instance, if you use [Swagger metadata](http://swagger.io/) to describe your service API, you can use tools that generate client stubs that can directly discover and consume your services.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="b0707-204">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="b0707-204">Additional resources</span></span>

-   <span data-ttu-id="b0707-205">**Martin Fowler. Rißling Maturity Model.**</span><span class="sxs-lookup"><span data-stu-id="b0707-205">**Martin Fowler. Richardson Maturity Model.**</span></span> <span data-ttu-id="b0707-206">Eine Beschreibung des Modells REST.</span><span class="sxs-lookup"><span data-stu-id="b0707-206">A description of the REST model.</span></span>
    [<span data-ttu-id="b0707-207">*http://martinfowler.com/articles/richardsonMaturityModel.HTML*</span><span class="sxs-lookup"><span data-stu-id="b0707-207">*http://martinfowler.com/articles/richardsonMaturityModel.html*</span></span>](http://martinfowler.com/articles/richardsonMaturityModel.html)

-   <span data-ttu-id="b0707-208">**Swagger.**</span><span class="sxs-lookup"><span data-stu-id="b0707-208">**Swagger.**</span></span> <span data-ttu-id="b0707-209">Die offizielle Website.</span><span class="sxs-lookup"><span data-stu-id="b0707-209">The official site.</span></span>
    [<span data-ttu-id="b0707-210">*http://swagger.IO/*</span><span class="sxs-lookup"><span data-stu-id="b0707-210">*http://swagger.io/*</span></span>](http://swagger.io/)

### <a name="push-and-real-time-communication-based-on-http"></a><span data-ttu-id="b0707-211">Push-als auch HTTP-basierte Kommunikation in Echtzeit</span><span class="sxs-lookup"><span data-stu-id="b0707-211">Push and real-time communication based on HTTP</span></span>

<span data-ttu-id="b0707-212">Eine andere Möglichkeit (in der Regel für unterschiedliche Zwecke als REST) ist eine in Echtzeit und 1: n-Kommunikation mit höherer Frameworks wie z. B. [ASP.NET SignalR](https://www.asp.net/signalr) und Protokolle wie z. B. [WebSockets](https://en.wikipedia.org/wiki/WebSocket).</span><span class="sxs-lookup"><span data-stu-id="b0707-212">Another possibility (usually for different purposes than REST) is a real-time and one-to-many communication with higher-level frameworks such as [ASP.NET SignalR](https://www.asp.net/signalr) and protocols such as [WebSockets](https://en.wikipedia.org/wiki/WebSocket).</span></span>

<span data-ttu-id="b0707-213">Wie in Abbildung 4 – 17 gezeigt, also in Echtzeit HTTP-Kommunikation können Sie Servercode Inhalt an verbundene Clients weitergegeben werden, sobald die Daten zur Verfügung steht, statt den Server warten, bis ein Client Anfordern von neuen Daten verwenden.</span><span class="sxs-lookup"><span data-stu-id="b0707-213">As Figure 4-17 shows, real-time HTTP communication means that you can have server code pushing content to connected clients as the data becomes available, rather than having the server wait for a client to request new data.</span></span>

![](./media/image17.png)

<span data-ttu-id="b0707-214">**Abbildung 4 – 17**.</span><span class="sxs-lookup"><span data-stu-id="b0707-214">**Figure 4-17**.</span></span> <span data-ttu-id="b0707-215">1: 1 in Echtzeit asynchrone Nachrichtenkommunikation</span><span class="sxs-lookup"><span data-stu-id="b0707-215">One-to-one real-time asynchronous message communication</span></span>

<span data-ttu-id="b0707-216">Seit Kommunikation in Echtzeit ist, zeigen nahezu sofort Client-apps die Änderungen.</span><span class="sxs-lookup"><span data-stu-id="b0707-216">Since communication is in real time, client apps show the changes almost instantly.</span></span> <span data-ttu-id="b0707-217">Dies erfolgt in der Regel von einem Protokoll wie z. B. WebSockets verwenden viele WebSockets-Verbindungen (eine pro Client).</span><span class="sxs-lookup"><span data-stu-id="b0707-217">This is usually handled by a protocol such as WebSockets, using many WebSockets connections (one per client).</span></span> <span data-ttu-id="b0707-218">Ein typisches Beispiel ist, wenn ein Dienst eine Änderung in die Bewertung eines Spiels Sport, um Web-apps für viele Clients gleichzeitig kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="b0707-218">A typical example is when a service communicates a change in the score of a sports game to many client web apps simultaneously.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="b0707-219">[Vorherigen] (Direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md) [weiter] (asynchrone-Nachricht-Basis-communication.md)</span><span class="sxs-lookup"><span data-stu-id="b0707-219">[Previous] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md) [Next] (asynchronous-message-based-communication.md)</span></span>
