---
title: Containerisieren monolithischer Anwendungen
description: ".NET-Microservicesarchitektur für .NET-Containeranwendungen | Containerisieren monolithischer Anwendungen"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: fc01054e4352a711d2203e694001a1204dedadf9
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/23/2017
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="2f12a-104">Containerisieren monolithischer Anwendungen</span><span class="sxs-lookup"><span data-stu-id="2f12a-104">Containerizing monolithic applications</span></span>

<span data-ttu-id="2f12a-105">Sie sollten eine einzelne, monolithisch bereitgestellte Webanwendung oder einen Webdienst erstellen und als Container bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-105">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="2f12a-106">Die Anwendung selbst ist möglicherweise nicht intern monolithisch, aber in mehrere Bibliotheken, Komponenten oder sogar Ebenen strukturiert (Anwendungsebene, Domänenebene, Datenzugriffsebene, usw.).</span><span class="sxs-lookup"><span data-stu-id="2f12a-106">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="2f12a-107">Extern ist sie allerdings ein einzelner Container – ein einzelner Prozess, eine einzelne Webanwendung oder ein einzelner Dienst.</span><span class="sxs-lookup"><span data-stu-id="2f12a-107">Externally, however, it is a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="2f12a-108">Stellen Sie einen einzelnen Container bereit, der diese Anwendung darstellt, um dieses Modell zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="2f12a-108">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="2f12a-109">Fügen Sie zum Skalieren einfach weitere Kopien mit einem vorangestellten Lastenausgleich hinzu.</span><span class="sxs-lookup"><span data-stu-id="2f12a-109">To scale up, you just add more copies with a load balancer in front.</span></span> <span data-ttu-id="2f12a-110">Die Einfachheit stammt aus der Verwaltung einer einzelnen Bereitstellung in einem einzelnen Container oder virtuellen Computer.</span><span class="sxs-lookup"><span data-stu-id="2f12a-110">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image1.png)

<span data-ttu-id="2f12a-111">**Abbildung 4-1**.</span><span class="sxs-lookup"><span data-stu-id="2f12a-111">**Figure 4-1**.</span></span> <span data-ttu-id="2f12a-112">Beispiel für die Architektur einer containerisierten monolithischen Anwendung</span><span class="sxs-lookup"><span data-stu-id="2f12a-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="2f12a-113">Sie können, wie in Abbildung 4-1 veranschaulicht, mehrere Komponenten, Bibliotheken oder interne Ebenen in jedem Container einschließen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="2f12a-114">Allerdings kann dieses monolithische Muster zu einem Konflikt mit dem Containerprinzip „ein Container führt eine Aufgabe in einem Prozess aus“ führen. In einigen Fällen kommt es jedoch nicht zum Konflikt.</span><span class="sxs-lookup"><span data-stu-id="2f12a-114">However, this monolithic pattern might conflict with the container principle “a container does one thing, and does it in one process”, but might be ok for some cases.</span></span>

<span data-ttu-id="2f12a-115">Der Nachteil dieses Ansatzes wird offensichtlich, wenn die Anwendung wächst und skaliert werden muss.</span><span class="sxs-lookup"><span data-stu-id="2f12a-115">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="2f12a-116">Wenn die gesamte Anwendung skaliert werden kann, ist es kein Problem.</span><span class="sxs-lookup"><span data-stu-id="2f12a-116">If the entire application can scale, it is not really a problem.</span></span> <span data-ttu-id="2f12a-117">In den meisten Fällen sind jedoch nur einige Teile der Anwendung Engpässe, die Skalierung erfordern, während andere Komponente weniger häufig verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2f12a-117">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="2f12a-118">Beispielsweise müssen Sie in einer typischen E-Commerceanwendung mit höherer Wahrscheinlichkeit das Subsystem der Produktinformationen skalieren, da viel mehr Kunden nach Produkten suchen, als Kunden Produkte erwerben.</span><span class="sxs-lookup"><span data-stu-id="2f12a-118">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="2f12a-119">Mehr Kunden verwenden Ihren Warenkorb als die Zahlungspipeline.</span><span class="sxs-lookup"><span data-stu-id="2f12a-119">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="2f12a-120">Weniger Kunden fügen Kommentare hinzu oder zeigen ihren Bestellungsverlauf an.</span><span class="sxs-lookup"><span data-stu-id="2f12a-120">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="2f12a-121">Und Sie haben möglicherweise nur eine Handvoll Mitarbeiter, die den Inhalt und die Marketingkampagnen verwalten müssen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-121">And you might have only a handful of employees, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="2f12a-122">Wenn Sie den monolithischen Entwurf skalieren, wird der gesamte Code für diese verschiedenen Aufgaben mehrmals bereitgestellt und zum gleichen Grad skaliert.</span><span class="sxs-lookup"><span data-stu-id="2f12a-122">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="2f12a-123">Es gibt mehrere Möglichkeiten zum Skalieren einer Anwendung – horizontale Duplizierung, Teilen unterschiedlicher Bereiche der Anwendung und die Partitionierung ähnlicher Geschäftskonzepte oder -daten.</span><span class="sxs-lookup"><span data-stu-id="2f12a-123">There are multiple ways to scale an application—horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="2f12a-124">Zusätzlich zu den Problemen der Skalierung aller Komponenten erfordern Änderungen einer einzelnen Komponente einen erneuten Test der gesamten Anwendung und eine vollständig neue Bereitstellung aller Instanzen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-124">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="2f12a-125">Der monolithische Ansatz ist jedoch üblich, da die Entwicklung der Anwendung anfänglich einfacher ist als bei Microservicesansätzen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-125">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="2f12a-126">Daher führen viele Unternehmen Entwicklungen mit diesem Architekturansatz aus.</span><span class="sxs-lookup"><span data-stu-id="2f12a-126">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="2f12a-127">Während einige Unternehmen gute Ergebnisse erzielen, stoßen andere an Grenzen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-127">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="2f12a-128">Viele Unternehmen haben ihre Anwendungen unter Verwendung dieses Modells entworfen, da Tools und Infrastruktur schon seit Jahren zu komplex für die Erstellung von dienstorientierter Architektur (SOA) sind. Sie haben die Notwendigkeit nicht erkannt — bis die Anwendung gewachsen ist.</span><span class="sxs-lookup"><span data-stu-id="2f12a-128">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service oriented architectures (SOA) years ago, and they did not see the need—until the application grew.</span></span>

<span data-ttu-id="2f12a-129">Aus Sicht der Infrastruktur kann jeder Server, wie in Abbildung 4-2 dargestellt, viele Anwendungen innerhalb desselben Hosts ausführen und ein akzeptables Effizienzverhältnis in der Ressourcenverwendung haben.</span><span class="sxs-lookup"><span data-stu-id="2f12a-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="2f12a-130">**Abbildung 4-2**.</span><span class="sxs-lookup"><span data-stu-id="2f12a-130">**Figure 4-2**.</span></span> <span data-ttu-id="2f12a-131">Monolithischer Ansatz: Der Host führt mehrere Anwendungen aus, jede Anwendung wird als Container ausgeführt</span><span class="sxs-lookup"><span data-stu-id="2f12a-131">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="2f12a-132">Monolithische Anwendungen in Microsoft Azure können mithilfe von dedizierten VMs für jede Instanz bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="2f12a-132">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="2f12a-133">Darüber hinaus können Sie die VMs problemlos skalieren, wenn Sie [Azure VM-Skalierungsgruppen](https://docs.microsoft.com/azure/virtual-machine-scale-sets/) verwenden.</span><span class="sxs-lookup"><span data-stu-id="2f12a-133">Additionally, using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="2f12a-134">[Azure App Service](https://azure.microsoft.com/services/app-service/) kann auch monolithische Anwendungen ausführen und Instanzen problemlos skalieren, ohne dass Sie die VMs verwalten müssen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-134">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="2f12a-135">Seit 2016 kann Azure App Services ebenfalls einzelne Instanzen von Docker-Containern ausführen, was die Bereitstellung vereinfacht.</span><span class="sxs-lookup"><span data-stu-id="2f12a-135">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="2f12a-136">Als QA-Umgebung oder begrenzte Produktionsumgebung können Sie mehrere Docker-Host-VMs bereitstellen und Sie, wie in Abbildung 4-3 dargestellt, mithilfe des Azure-Lastenausgleichs ausgleichen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-136">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="2f12a-137">So können Sie die Skalierung mit einem gröberen Ansatz verwalten, da die gesamte Anwendung in einem einzelnen Container aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="2f12a-137">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![](./media/image3.png)

<span data-ttu-id="2f12a-138">**Abbildung 4-3**.</span><span class="sxs-lookup"><span data-stu-id="2f12a-138">**Figure 4-3**.</span></span> <span data-ttu-id="2f12a-139">Beispiel für die Skalierung einer einzelnen Containeranwendung durch mehrere Hosts</span><span class="sxs-lookup"><span data-stu-id="2f12a-139">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="2f12a-140">Die Bereitstellung auf den verschiedenen Hosts kann mit herkömmlichen Bereitstellungsverfahren verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="2f12a-140">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="2f12a-141">Docker-Hosts können mit manuellen Befehlen wie `docker run` oder `docker-compose` oder durch die Automatisierung, z.B. Pipelines für Continuous Delivery (CD), verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="2f12a-141">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="2f12a-142">Bereitstellen einer monolithischen Anwendung als Container</span><span class="sxs-lookup"><span data-stu-id="2f12a-142">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="2f12a-143">Das Verwenden von Containern zur Verwaltung monolithischer Anwendungsbereitstellungen hat Vorteile.</span><span class="sxs-lookup"><span data-stu-id="2f12a-143">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="2f12a-144">Das Skalieren von Containerinstanzen ist wesentlich schneller und einfacher als die Bereitstellung zusätzlicher VMs.</span><span class="sxs-lookup"><span data-stu-id="2f12a-144">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="2f12a-145">Selbst bei Verwendung von VM-Skalierungsgruppen benötigt der Start der VMs Zeit.</span><span class="sxs-lookup"><span data-stu-id="2f12a-145">Even if you use VM Scale Sets, VMs take time to start.</span></span> <span data-ttu-id="2f12a-146">Wenn die Bereitstellung als herkömmliche Anwendungsinstanzen anstelle von Containern stattfindet, wird die Konfiguration der Anwendung im Rahmen der VM verwaltet. Dies ist nicht ideal.</span><span class="sxs-lookup"><span data-stu-id="2f12a-146">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which is not ideal.</span></span>

<span data-ttu-id="2f12a-147">Die Bereitstellung von Updates, wie Docker-Images, ist wesentlich schneller und effizienter im Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="2f12a-147">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="2f12a-148">Docker-Images starten in der Regel in Sekunden, was Rollouts beschleunigt.</span><span class="sxs-lookup"><span data-stu-id="2f12a-148">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="2f12a-149">Das Löschen einer Instanz eines Docker-Images ist genauso einfach wie das Ausgeben eines `docker stop`-Befehls, und in der Regel in weniger als einer Sekunde abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-149">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="2f12a-150">Da Container entwurfsbedingt unveränderlich sind, müssen Sie sich keine Sorgen um beschädigte VMs machen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-150">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="2f12a-151">Im Gegensatz dazu vergessen Updateskripts für eine VM möglicherweise einige spezifische Konfigurationen oder Dateien auf dem Datenträger.</span><span class="sxs-lookup"><span data-stu-id="2f12a-151">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="2f12a-152">Während monolithische Anwendungen von Docker profitieren können, werden hier nur die Vorteile besprochen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-152">While monolithic applications can benefit from Docker, we are touching only on the benefits.</span></span> <span data-ttu-id="2f12a-153">Zusätzliche Vorteile für die Verwaltung von Containern stammen aus der Bereitstellung mit Containerorchestratoren, die die verschiedenen Instanzen und den Lebenszyklus jeder Containerinstanz verwalten.</span><span class="sxs-lookup"><span data-stu-id="2f12a-153">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="2f12a-154">Das Aufteilen der monolithischen Anwendung in Subsysteme, die skaliert, entwickelt und einzeln bereitgestellt werden können, ist Ihr Einstiegspunkt in die Welt der Microservices.</span><span class="sxs-lookup"><span data-stu-id="2f12a-154">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="2f12a-155">Veröffentlichen einer einzelnen Containeranwendung in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="2f12a-155">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="2f12a-156">Ob Sie einen in Azure bereitgestellten Container überprüfen möchten, oder wenn eine Anwendung einfach eine einzelnen Containeranwendung ist, Azure App Service bietet hervorragende, skalierbare Dienste auf Grundlage einzelner Containeranwendungen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-156">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="2f12a-157">Die Verwendung von Azure App Service ist einfach.</span><span class="sxs-lookup"><span data-stu-id="2f12a-157">Using Azure App Service is simple.</span></span> <span data-ttu-id="2f12a-158">Der Dienst bietet eine hervorragende Integration mit Git, um die Vorgehensweise für das Verwenden und Erstellen von Code in Visual Studio und die direkte Bereitstellung in Azure zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-158">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![](./media/image4.png)

<span data-ttu-id="2f12a-159">**Abbildung 4-4**.</span><span class="sxs-lookup"><span data-stu-id="2f12a-159">**Figure 4-4**.</span></span> <span data-ttu-id="2f12a-160">Veröffentlichen einer einzelnen Containeranwendung in Azure App Service aus Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2f12a-160">Publishing a single-container application to Azure App Service from Visual Studio</span></span>

<span data-ttu-id="2f12a-161">Wenn Sie ohne Docker andere Funktionen, Frameworks oder Abhängigkeiten benötigten, die in Azure App Service nicht unterstützt werden, mussten Sie warten, bis das Azure-Team diese Abhängigkeiten im Anwendungsdienst aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="2f12a-161">Without Docker, if you needed other capabilities, frameworks, or dependencies that are not supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="2f12a-162">Oder Sie mussten zu anderen Diensten wie Azure Service Fabric, Azure Cloud Services oder sogar VMs wechseln. Dort hatten Sie mehr Kontrolle und konnten eine erforderliche Komponente oder ein Framework für Ihre Anwendung installieren.</span><span class="sxs-lookup"><span data-stu-id="2f12a-162">Or you had to switch to other services like Azure Service Fabric, Azure Cloud Services, or even VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="2f12a-163">Die Containerunterstützung in Visual Studio 2017 bietet Ihnen, wie in Abbildung 4-4 dargestellt, die Möglichkeit, beliebige Dinge in Ihre Anwendungsumgebung einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-163">Container support in Visual Studio 2017 gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="2f12a-164">Da Sie sie in einem Container ausführen, können Sie die Abhängigkeit in Ihrer Docker-Datei oder Ihrem Docker-Image einschließen, wenn Sie eine Abhängigkeit zu Ihrer Anwendung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="2f12a-164">Since you are running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="2f12a-165">Abbildung 4-4 zeigt auch, wie der Veröffentlichungsfluss ein Image über eine Containerregistrierung überträgt.</span><span class="sxs-lookup"><span data-stu-id="2f12a-165">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="2f12a-166">Hierbei handelt es sich um eine Azure-Containerregistrierung (eine Registrierung in der Nähe Ihrer Bereitstellungen in Azure, die von Azure Active Directory-Gruppen und -Konten gesichert wird) oder andere Docker-Registrierungen wie Docker-Hub oder eine lokale Registrierung.</span><span class="sxs-lookup"><span data-stu-id="2f12a-166">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="2f12a-167">[Zurück] (index.md) [Weiter] (docker-application-state-data.md)</span><span class="sxs-lookup"><span data-stu-id="2f12a-167">[Previous] (index.md) [Next] (docker-application-state-data.md)</span></span>
