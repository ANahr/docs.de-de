---
title: "Erstellen Sie resilienter Dienste für die Cloud bereit. Vorübergehende Fehler in der Cloud zu nutzen"
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Erstellen Sie resilienter Dienste für die Cloud bereit. Vorübergehende Fehler in der Cloud zu nutzen"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/26/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: aaf1ef968600a56d91267c6c12efa90d99446dd7
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/19/2018
---
# <a name="build-resilient-services-ready-for-the-cloud-embrace-transient-failures-in-the-cloud"></a><span data-ttu-id="476a4-105">Resilienter Dienste bereit, für die Cloud zu erstellen: vorübergehende Fehler in der Cloud zu nutzen</span><span class="sxs-lookup"><span data-stu-id="476a4-105">Build resilient services ready for the cloud: Embrace transient failures in the cloud</span></span> 

<span data-ttu-id="476a4-106">Als Stabilität wird die Fähigkeit zum Wiederherstellen nach Fehlern und zum Fortsetzen der Funktionsweise bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="476a4-106">Resiliency is the ability to recover from failures and continue to function.</span></span> <span data-ttu-id="476a4-107">Stabilität ist nicht zum Vermeiden von Fehlern, jedoch akzeptiert die Tatsache, dass Fehler auftreten und reagiert dann in einer Weise, die Downtime und Datenverluste vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="476a4-107">Resiliency is not about avoiding failures, but accepting the fact that failures will occur, and then responding to them in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="476a4-108">Das Ziel der Stabilität ist, die Anwendung nach einem Fehler wieder in einen voll funktionsfähigen Zustand zu versetzen.</span><span class="sxs-lookup"><span data-stu-id="476a4-108">The goal of resiliency is to return the application to a fully functioning state after a failure.</span></span>

<span data-ttu-id="476a4-109">Die Anwendung ist für die Cloud bereit, wenn mindestens ein Modell softwarebasierten resilienzgrad, anstatt eine Hardware-basiertes Modell implementiert.</span><span class="sxs-lookup"><span data-stu-id="476a4-109">Your application is ready for the cloud when, at a minimum, it implements a software-based model of resiliency, rather than a hardware-based model.</span></span> <span data-ttu-id="476a4-110">Ihre Cloud-Anwendung muss die teilfehler nutzen, die sicherlich stattfinden.</span><span class="sxs-lookup"><span data-stu-id="476a4-110">Your cloud application must embrace the partial failures that will certainly occur.</span></span> <span data-ttu-id="476a4-111">Sie müssen zum Entwerfen, oder gestalten Sie teilweise die Anwendung auf, wenn Sie Stabilität bei erwarteten teilfehler erzielen möchten.</span><span class="sxs-lookup"><span data-stu-id="476a4-111">You need to design or partially refactor your application if you want to achieve resiliency to expected partial failures.</span></span> <span data-ttu-id="476a4-112">Es sollten so entworfen werden, zu bewältigen teilfehler, z. B. vorübergehende Netzwerkausfälle und Knoten oder virtuellen Computern in der Cloud abstürzt.</span><span class="sxs-lookup"><span data-stu-id="476a4-112">It should be designed to cope with partial failures, like transient network outages and nodes, or VMs crashing in the cloud.</span></span> <span data-ttu-id="476a4-113">Sogar Container verschoben werden, auf einen anderen Knoten innerhalb eines Clusters Orchestrator können kurze Ausfälle in der Anwendung verursachen.</span><span class="sxs-lookup"><span data-stu-id="476a4-113">Even containers being moved to a different node within an orchestrator cluster can cause intermittent short failures within the application.</span></span>

## <a name="handling-partial-failure"></a><span data-ttu-id="476a4-114">Behandlung von teilweise fehlerhaft.</span><span class="sxs-lookup"><span data-stu-id="476a4-114">Handling partial failure</span></span>

<span data-ttu-id="476a4-115">In einer Cloud-basierten Anwendung ist eine partielle allgegenwärtigen Ausfallrisiko vorhanden.</span><span class="sxs-lookup"><span data-stu-id="476a4-115">In a cloud-based application, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="476a4-116">Z. B. fehlschlagen, eine einzelne Website-Instanz oder einen Container, oder es möglicherweise nicht verfügbar oder nicht reagierenden für kurze Zeit.</span><span class="sxs-lookup"><span data-stu-id="476a4-116">For instance, a single website instance or a container might fail, or it might be unavailable or unresponsive for a short time.</span></span> <span data-ttu-id="476a4-117">Alternativ dazu können Sie einen einzelnen virtuellen Computer oder Server stürzt möglicherweise ab.</span><span class="sxs-lookup"><span data-stu-id="476a4-117">Or, a single VM or server might crash.</span></span>

<span data-ttu-id="476a4-118">Da Clients und Dienste separate Vorgänge dar, ein Dienst nicht rechtzeitig auf Anforderung des Clients reagieren möglicherweise.</span><span class="sxs-lookup"><span data-stu-id="476a4-118">Because clients and services are separate processes, a service might not be able to respond in a timely manner to a client's request.</span></span> <span data-ttu-id="476a4-119">Der Dienst möglicherweise überladen werden und auf Anforderungen extrem langsam reagiert, oder es einfach möglicherweise nicht verfügbar für kurze Zeit aufgrund von Netzwerkproblemen.</span><span class="sxs-lookup"><span data-stu-id="476a4-119">The service might be overloaded and respond extremely slowly to requests, or it might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="476a4-120">Betrachten Sie beispielsweise eine monolithische .NET-Anwendung, die auf eine Datenbank in Azure SQL-Datenbank zugreift.</span><span class="sxs-lookup"><span data-stu-id="476a4-120">For example, consider a monolithic .NET application that accesses a database in Azure SQL Database.</span></span> <span data-ttu-id="476a4-121">Wenn der Azure SQL-Datenbank oder andere Drittanbieterdienst nicht reagiert für eine kurze Zeit (eine Azure SQL-Datenbank kann an einem anderen Knoten oder Server verschoben werden und werden nicht mehr reagiert für einige Sekunden), wenn der Benutzer versucht, die keine Aktionen ausführen, stürzt die Anwendung und ähnliche eine Ausnahme im Moment selbe w.</span><span class="sxs-lookup"><span data-stu-id="476a4-121">If the Azure SQL database or any other third-party service is unresponsive for a brief time (an Azure SQL database might be moved to a different node or server, and be unresponsive for a few seconds), when the user tries to do any action, the application might crash and show an exception at the very same moment.</span></span>

<span data-ttu-id="476a4-122">Ein ähnliches Szenario kann in einer app auftreten, die HTTP-Dienste verwendet.</span><span class="sxs-lookup"><span data-stu-id="476a4-122">A similar scenario might occur in an app that consumes HTTP services.</span></span> <span data-ttu-id="476a4-123">Das Netzwerk oder der Dienst selbst möglicherweise nicht in der Cloud während einer kurzen, vorübergehende Fehler verfügbar.</span><span class="sxs-lookup"><span data-stu-id="476a4-123">The network or the service itself might not be available in the cloud during a short, transient failure.</span></span>

<span data-ttu-id="476a4-124">Eine robuste Anwendung wie in Abbildung 4-9 sollten Techniken, wie "Wiederholungen mit exponenzieller" implementieren, so erteilen Sie der Anwendung Gelegenheit, vorübergehende Fehler in der Ressourcen zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="476a4-124">A resilient application like the one shown in Figure 4-9 should implement techniques like "retries with exponential backoff" to give the application an opportunity to handle transient failures in resources.</span></span> <span data-ttu-id="476a4-125">Sie sollten auch "Trennschalter" in Ihren Anwendungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="476a4-125">You also should use "circuit breakers" in your applications.</span></span> <span data-ttu-id="476a4-126">Ein Trennschalter wird eine Anwendung versucht, eine Ressource zuzugreifen, wenn es tatsächlich einen langfristigen Fehler wird beendet.</span><span class="sxs-lookup"><span data-stu-id="476a4-126">A circuit breaker stops an application from trying to access a resource when it's actually a long-term failure.</span></span> <span data-ttu-id="476a4-127">Mithilfe von ein Trennschalter vermeidet die Anwendung provozieren einen Denial of Service auf sich selbst.</span><span class="sxs-lookup"><span data-stu-id="476a4-127">By using a circuit breaker, the application avoids provoking a denial of service to itself.</span></span>

![Teilweise Ausfälle von Wiederholungen mit exponenzieller behandelt](./media/image9.png)

> <span data-ttu-id="476a4-129">**Abbildung 4-9.**</span><span class="sxs-lookup"><span data-stu-id="476a4-129">**Figure 4-9.**</span></span> <span data-ttu-id="476a4-130">Teilweise Ausfälle von Wiederholungen mit exponenzieller behandelt</span><span class="sxs-lookup"><span data-stu-id="476a4-130">Partial failures handled by retries with exponential backoff</span></span>

<span data-ttu-id="476a4-131">Sie können diese Techniken in HTTP-Ressourcen und in Database-Ressourcen verwenden.</span><span class="sxs-lookup"><span data-stu-id="476a4-131">You can use these techniques both in HTTP resources and in database resources.</span></span> <span data-ttu-id="476a4-132">In Abbildung 4-9, basiert die Anwendung auf einer 3-Ebenen-Architektur, daher Sie diese Verfahren auf der Ebene der Dienste (HTTP) und auf der Ebene der Daten (TCP benötigen).</span><span class="sxs-lookup"><span data-stu-id="476a4-132">In Figure 4-9, the application is based on a 3-tier architecture, so you need these techniques at the services level (HTTP) and at the data tier level (TCP).</span></span> <span data-ttu-id="476a4-133">In einer monolithischen-Anwendung, die nur eine einzelne app-Ebene zusätzlich zu der Datenbank (ohne zusätzliche Dienste oder Microservices) verwendet, kann Verarbeitung vorübergehender Fehler auf Verbindungsebene Datenbank ausreichend sein.</span><span class="sxs-lookup"><span data-stu-id="476a4-133">In a monolithic application that uses only a single app tier in addition to the database (no additional services or microservices), handling transient failures at the database connection level might be enough.</span></span> <span data-ttu-id="476a4-134">In diesem Szenario ist in der Regel nur eine bestimmte Konfiguration der Verbindung mit der Datenbank erforderlich.</span><span class="sxs-lookup"><span data-stu-id="476a4-134">In that scenario, usually just a particular configuration of the database connection is required.</span></span>

<span data-ttu-id="476a4-135">Wenn robuste Kommunikation zu implementieren, die die Datenbank, abhängig von der Version von .NET zugreifen, Sie verwenden, kann es sehr einfach sein (z. B. [mit Entity Framework 6 oder höher](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx), es geht nur darum, der Konfiguration der datenbankverbindung).</span><span class="sxs-lookup"><span data-stu-id="476a4-135">When implementing resilient communications that access the database, depending on the version of .NET you are using, it can be very straightforward (for example, [with Entity Framework 6 or later](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx), it's just a matter of configuring the database connection).</span></span> <span data-ttu-id="476a4-136">Oder Sie müssen zusätzliche Bibliotheken wie die [vorübergehenden Anwendungsblock zur Behandlung](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx) (für frühere Versionen von .NET), oder implementieren Sie sogar eigene Bibliothek.</span><span class="sxs-lookup"><span data-stu-id="476a4-136">Or, you might need to use additional libraries like the [Transient Fault Handling Application Block](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx) (for earlier versions of .NET), or even implement your own library.</span></span>

<span data-ttu-id="476a4-137">Beim HTTP-Wiederholungsversuche und Trennschalter implementieren die Empfehlung für .NET ist die Verwendung der [Polly](https://github.com/App-vNext/Polly) -Bibliothek, die Ziel von .NET 4.0, .NET 4.5 und .NET Standard 1.1, die .NET Core-Unterstützung umfasst.</span><span class="sxs-lookup"><span data-stu-id="476a4-137">When implementing HTTP retries and circuit breakers, the recommendation for .NET is to use the [Polly](https://github.com/App-vNext/Polly) library, which targets .NET 4.0, .NET 4.5, and .NET Standard 1.1, which includes .NET Core support.</span></span>

<span data-ttu-id="476a4-138">Gewusst wie: Implementieren von Strategien für die Behandlung von teilfehler in der Cloud finden Sie unter den folgenden Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="476a4-138">To learn how to implement strategies for handling partial failures in the cloud, see the following references.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="476a4-139">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="476a4-139">Additional resources</span></span>

-   <span data-ttu-id="476a4-140">**Implementieren robusten Kommunikation zum partiellen Fehler behandeln**</span><span class="sxs-lookup"><span data-stu-id="476a4-140">**Implementing resilient communication to handle partial failure**</span></span>

    [<span data-ttu-id="476a4-141">https://docs.microsoft.com/dotnet/standard/microservices-architecture/implement-resilient-applications/partial-failure-strategies</span><span class="sxs-lookup"><span data-stu-id="476a4-141">https://docs.microsoft.com/dotnet/standard/microservices-architecture/implement-resilient-applications/partial-failure-strategies</span></span>](https://docs.microsoft.com/dotnet/standard/microservices-architecture/implement-resilient-applications/partial-failure-strategies)

-   <span data-ttu-id="476a4-142">**Entity Framework Connection Resiliency und Wiederholungslogik (Version 6 und höher)**</span><span class="sxs-lookup"><span data-stu-id="476a4-142">**Entity Framework connection resiliency and retry logic (version 6 and later)**</span></span>

    <span data-ttu-id="476a4-143">[https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx)</span><span class="sxs-lookup"><span data-stu-id="476a4-143">[https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx](https://msdn.microsoft.com/library/dn456835(v=vs.113).aspx)</span></span>

-   <span data-ttu-id="476a4-144">**Der Anwendungsblock für die Behandlung vorübergehender Fehler**</span><span class="sxs-lookup"><span data-stu-id="476a4-144">**The Transient Fault Handling Application Block**</span></span>

<!-- -->

-   <span data-ttu-id="476a4-145">[https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx)</span><span class="sxs-lookup"><span data-stu-id="476a4-145">[https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx](https://msdn.microsoft.com/library/hh680934(v=pandp.50).aspx)</span></span>

-   <span data-ttu-id="476a4-146">**Polly-Bibliothek für robusten HTTP-Kommunikation**</span><span class="sxs-lookup"><span data-stu-id="476a4-146">**Polly library for resilient HTTP communication**</span></span>

    <span data-ttu-id="476a4-147">https://github.com/App-vNext/Polly</span><span class="sxs-lookup"><span data-stu-id="476a4-147">https://github.com/App-vNext/Polly</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="476a4-148">[Zurück](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
[Weiter](modernize-your-apps-with-monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="476a4-148">[Previous](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
[Next](modernize-your-apps-with-monitoring-and-telemetry.md)</span></span>
