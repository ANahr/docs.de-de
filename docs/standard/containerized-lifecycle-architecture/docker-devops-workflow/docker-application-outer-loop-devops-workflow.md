---
title: Schritte in der äußeren Schleife DevOps-Workflow für einen Docker-Anwendung
description: Lebenszyklus von Docker-Containeranwendungen mit der Microsoft-Plattform und Tools
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: b88eb5637bf266ab2e0a6d255f2e83f6aadc8af2
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/29/2018
ms.locfileid: "37106161"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="0d5aa-103">Schritte in der äußeren Schleife DevOps-Workflow für einen Docker-Anwendung</span><span class="sxs-lookup"><span data-stu-id="0d5aa-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="0d5aa-104">Abbildung 5 – 1 zeigt ein End-to-End-Darstellung der Schritte beinhalten die DevOps äußere Schleife Workflow.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="0d5aa-105">Abbildung 5 – 1: DevOps äußere Schleife Workflow für Docker-Anwendungen mit Microsoft-tools</span><span class="sxs-lookup"><span data-stu-id="0d5aa-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="0d5aa-106">Jetzt sehen wir uns die einzelnen Schritte ausführlicher.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="0d5aa-107">Schritt 1: Inner Loop-Entwicklungsworkflow</span><span class="sxs-lookup"><span data-stu-id="0d5aa-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="0d5aa-108">Dieser Schritt wird ausführlich in Kapitel 4, aber um Punkte aufzugreifen, sieht die äußere Schleife, dem Moment beginnt an dem ein Entwickler Code vom Quellcodeverwaltungssystem Management (z. B. Git) initiieren von Aktionen für CI-Pipeline schiebt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="0d5aa-109">Schritt 2: Quellcodeverwaltung-Integrations- und verwaltungsmöglichkeiten mit Visual Studio Team Services und Git</span><span class="sxs-lookup"><span data-stu-id="0d5aa-109">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="0d5aa-110">In diesem Schritt benötigen Sie ein Versionskontrollsystem eine konsolidierte Version des gesamten Codes, die von den anderen Entwicklern im Team zu sammeln.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="0d5aa-111">Obwohl der Source Code Control (SCC) und Quellcode Verwaltung zweiten Art erscheinen, können die meisten Entwickler, die beim Erstellen von Docker-Anwendungen in einem DevOps-Lebensdauer der Reihe nach ist es wichtig, hervorzuheben, dass Sie nicht die Docker-Images mit der Anwendung senden müssen direkt in der globalen Docker Registrierung (z. B. Azure-Containerregistrierung oder Docker Hub) vom Computer des Entwicklers.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="0d5aa-112">Der Docker-Images veröffentlicht und in produktionsumgebungen bereitgestellt werden müssen dagegen ausschließlich auf den Quellcode, der integriert wird in Ihrer globalen Build oder CI-Pipeline, die basierend auf Ihrem Quellcode Repository (z. B. Git) erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="0d5aa-113">Die lokale Bilder, die von den Entwicklern selbst generiert sollte nur von den Entwicklern verwendet werden, beim Testen von ihren eigenen Computern.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="0d5aa-114">Deshalb ist es wichtig, dass die DevOps-Pipeline, die aus dem SCC-Code aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="0d5aa-115">Visual Studio Team Services und Team Foundation Server unterstützt Git- und Team Foundation-Versionskontrolle.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-115">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="0d5aa-116">Sie können zwischen ihnen auswählen und sie für eine End-to-End-Microsoft-Erfahrung.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="0d5aa-117">Sie können jedoch auch können verwalten den Code in externen Repositorys (wie GitHub, lokalen Git-Repositorys oder Subversion) und können weiterhin darauf herstellen und den Code als Ausgangspunkt für Ihre Pipeline DevOps CI abrufen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="0d5aa-118">Schritt 3: Build, CI, integrieren und Testen mit Visual Studio Team Services und Docker</span><span class="sxs-lookup"><span data-stu-id="0d5aa-118">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="0d5aa-119">CI wurde als Standard für moderne Softwaretests und Übermittlung entwickelt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="0d5aa-120">Die Docker-Lösung verwaltet eine klare Abgrenzung der Aspekte zwischen den Entwicklungs- und telefonteams.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="0d5aa-121">Die Unveränderlichkeit von Docker-Images wird sichergestellt, dass eine wiederholbare Bereitstellungen zwischen wurde entwickelt, getestet über CI sowie unter Produktionsbedingungen ausführen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="0d5aa-122">Docker-Modul bereitgestellt, über die Entwickler Laptops und Testinfrastruktur wird der Container über Umgebungen hinweg portabel.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="0d5aa-123">Zu diesem Zeitpunkt, nachdem Sie ein Versionskontrollsystem mit den richtigen Code übermittelt haben, müssen Sie eine *Builddienst* zum Übernehmen des Codes, und führen Sie den globalen Builds und Tests.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="0d5aa-124">Der interne Workflow für diesen Schritt (CI, Build, test) wird zur Erstellung einer CI-Pipeline besteht aus Ihrem Code-Repository (Git usw.), die Build-Server (Visual Studio Team Services), Docker-Modul und einen Docker-Registrierung.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="0d5aa-125">Sie können Visual Studio Team Services als Grundlage zum Erstellen Ihrer Anwendungen und zum Festlegen der CI-Pipeline und für die Veröffentlichung der integrierten "Elementen" mit einem "Artefakte-Repository," der im nächsten Schritt beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-125">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="0d5aa-126">Bei Verwendung von Docker für die Bereitstellung, die "Letzte Elemente" bereitgestellt werden werden Docker-Images mit Ihrer Anwendung oder Dienste darin eingebettet sind.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="0d5aa-127">Diese Bilder abgelegt oder veröffentlicht werden, um eine *Docker Registrierung* (ein privates Repository wie diejenigen in Azure Containerregistrierung lassen oder einen öffentlichen wie Docker Hub-Registrierung, der für die offizielle Basisimages häufig verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="0d5aa-128">Hier wird das grundlegende Konzept: CI Pipeline einen Fehler verursacht und-off durch ein Commit mit einem SCC-Repository wie Git werden wird.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="0d5aa-129">Das Commit führt dazu, dass Visual Studio Team Services, führen Sie einen Auftrag erstellen, in einem Docker-Container, und drücken nach erfolgreichem Abschluss dieses Auftrags ein Docker Bild in die Docker-Registrierung, wie in Abbildung 5 – 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-129">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="0d5aa-130">Abbildung 5 – 2: die Schritte im Konfigurationselement</span><span class="sxs-lookup"><span data-stu-id="0d5aa-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="0d5aa-131">Hier sind die grundlegenden Schritte der CI-Workflow mit Docker und Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-131">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="0d5aa-132">Der Entwickler legt einen Commit mit einem SCC-Repository (Git/Visual Studio Team Services, GitHub, usw.).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-132">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="0d5aa-133">Wenn Sie Visual Studio Team Services oder Git verwenden, ist CI bereits integriert, d. h. es so einfach wie das Aktivieren eines Kontrollkästchens in Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-133">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="0d5aa-134">Bei Verwendung einer externen SCC (z. B. GitHub), eine *Webhook* Benachrichtigen von Visual Studio Team Services des Updates oder Git/github mithilfe von Push übertragen wird.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-134">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="0d5aa-135">Visual Studio Team Services zieht SCC-Repository, einschließlich der dockerfile-Datei, die das Bild als auch für die Anwendung und den Test Code beschreibt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-135">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="0d5aa-136">Visual Studio Team Services ein Docker Bild erstellt und es mit einem Build-Nummer.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-136">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="0d5aa-137">Visual Studio Team Services instanziiert den Docker-Container innerhalb der bereitgestellten Docker-Host, und die entsprechende Tests werden ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-137">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="0d5aa-138">Wenn die Tests erfolgreich sind, das Bild wird zuerst neu bezeichneten in einen aussagekräftigen Namen, damit Sie wissen, es ist ein "Verbürgtes Build" (z. B. "/ 1.0.0" oder eine andere Bezeichnung), und klicken Sie dann oben auf der Docker-Registrierung (Docker Hub, Azure-Containerregistrierung DTR, usw.) geschoben</span><span class="sxs-lookup"><span data-stu-id="0d5aa-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="0d5aa-139">Implementieren die CI-Pipeline mit Visual Studio Team Services und die Docker-Erweiterung für Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="0d5aa-139">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="0d5aa-140">Die [Visual Studio Team Services-Docker-Erweiterung](https://aka.ms/vstsdockerextension) Fügt einen Task für die CI-Pipeline mit dem Sie können Docker-Images erstellen, Docker-Images an einen authentifizierten Docker-Registrierung weiterleiten, führen Sie Docker-Images oder Ausführen anderer Vorgänge von Angeboten die Docker-Befehlszeilenschnittstelle.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-140">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="0d5aa-141">Darüber hinaus wird eine Docker Compose-Aufgabe, die Sie verwenden können, erstellen, mithilfe von Push übertragen, und multicontainer Docker-Anwendungen ausführen oder Ausführen anderer Vorgänge, die von der Docker verfassen CLI angeboten, wie in Abbildung 5 – 3 gezeigt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="0d5aa-142">Abbildung 5 – 3: die Docker-CI-Pipeline in Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="0d5aa-142">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="0d5aa-143">Der Docker-Erweiterung können Dienstendpunkte für Docker-Hosts und Container oder Image-Registrierungen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="0d5aa-144">Die Standardeinstellung Aufgaben mit einem lokalen Docker-Host gegebenenfalls (derzeit erfordert dies einen benutzerdefinierte Visual Studio Team Services-Agent); Andernfalls müssen sie, dass Sie keine Docker-Host-Verbindung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-144">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="0d5aa-145">Aktionen, die mit einem Docker-Registrierung, z. B. ein Bild Push authentifiziert wird, hängt erfordern, dass Sie ein Docker Registrierung-Verbindung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="0d5aa-146">Die Visual Studio Team Services-Docker-Erweiterung installiert die folgenden Komponenten in Ihrem Visual Studio Team Services-Konto:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-146">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="0d5aa-147">Ein Dienstendpunkt für die Verbindung mit einem Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="0d5aa-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="0d5aa-148">Ein Dienstendpunkt für die Verbindung mit einem Docker-Container-Host</span><span class="sxs-lookup"><span data-stu-id="0d5aa-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="0d5aa-149">Eine Docker Aufgabe die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="0d5aa-150">Erstellen Sie ein Bild</span><span class="sxs-lookup"><span data-stu-id="0d5aa-150">Build an image</span></span>

-   <span data-ttu-id="0d5aa-151">Übertragen Sie ein Bild oder ein Repository mit einer Registrierung mithilfe von Push</span><span class="sxs-lookup"><span data-stu-id="0d5aa-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="0d5aa-152">Führen Sie ein Bild in einem container</span><span class="sxs-lookup"><span data-stu-id="0d5aa-152">Run an image in a container</span></span>

-   <span data-ttu-id="0d5aa-153">Führen Sie einen Docker-Befehl</span><span class="sxs-lookup"><span data-stu-id="0d5aa-153">Run a Docker command</span></span>

-   <span data-ttu-id="0d5aa-154">Eine Aufgabe Docker Compose einen Docker Compose-Befehl ausführen</span><span class="sxs-lookup"><span data-stu-id="0d5aa-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="0d5aa-155">Diese Aufgaben Visual Studio Team Services einen Build Linux-Docker-Host/VM bereitgestellt, in Azure und Ihrer bevorzugten Docker-Registrierung (Azure-Containerregistrierung, Docker Hub, private Docker DTR oder anderen Docker-Registrierung) können Ihre Docker CI Pipeline Zusammenstellen einer sehr einheitlich.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-155">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="0d5aa-156">***Anforderungen:***</span><span class="sxs-lookup"><span data-stu-id="0d5aa-156">***Requirements:***</span></span>

-   <span data-ttu-id="0d5aa-157">Visual Studio Team Services oder bei lokalen Installationen muss Team Foundation Server 2015 Update 3 oder höher.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-157">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="0d5aa-158">Ein Visual Studio Team Services-Agent, der Docker-Binärdateien verfügt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-158">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="0d5aa-159">Eine einfache Möglichkeit zum Erstellen einer davon ist Docker verwenden, um einen Container, basierend auf dem Visual Studio Team Services-Agent-Docker-Image auszuführen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-159">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="0d5aa-160">**Weitere Informationen** , lesen Weitere Informationen zum Zusammenstellen einer Visual Studio Team Services Docker CI pipeline und Anzeigen von exemplarischen Vorgehensweisen, finden Sie auf den folgenden Websites:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-160">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="0d5aa-161">Ausführen eines Visual Studio Team Services-Agents als einen Docker-Container: [ https://hub.docker.com/r/\ Microsoft/Vsts-Agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="0d5aa-161">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="0d5aa-162">VSTS Docker-Erweiterung: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="0d5aa-162">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="0d5aa-163">Erstellen von .NET Core-Linux-Docker-Images mit Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="0d5aa-163">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="0d5aa-164">Erstellen einen Linux-basierten Dienst Visual Studio Team Buildcomputer mit Docker-Unterstützung: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="0d5aa-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="0d5aa-165">Integrieren Sie, testen Sie und validieren Sie multicontainer Docker-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="0d5aa-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="0d5aa-166">In der Regel die meisten Docker Anwendungen mehrere Container anstatt von einem einzelnen Container bestehen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="0d5aa-167">Ein gutes Beispiel ist eine Microservices-orientierten-Anwendung, die für die Sie einen Container pro Microservice verfügen würde.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="0d5aa-168">Aber auch ohne streng folgenden Microservices Ansatz Muster, es ist sehr wahrscheinlich, dass die Docker-Anwendung von mehreren Containern oder Diensten zusammengesetzt werden würde.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="0d5aa-169">Aus diesem Grund müssen nach dem Erstellen der Anwendungscontainer in der CI-Pipeline, Sie auch integrieren, bereitstellen und Testen der Anwendung als Ganzes mit alle dessen Container innerhalb einer Integration Docker-Host oder sogar in einem Testcluster, auf das die Container sind verteilt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="0d5aa-170">Wenn Sie einem Einzelhost verwenden, können Sie Docker-Befehle wie Docker-zum Erstellen und Bereitstellen der zugehörigen Container zum Testen und überprüfen die Docker-Umgebung auf einem einzelnen virtuellen Computer zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="0d5aa-171">Aber wenn Sie mit einem Orchestrator-Cluster wie DC/OS, Kubernetes oder Docker Containerhostclustern arbeiten, müssen Sie über einen anderen Mechanismus oder Orchestrator, je nach den ausgewählten Cluster/Planer-Container bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="0d5aa-172">Es folgen verschiedene Arten von Tests, die für Docker-Container ausgeführt werden können:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="0d5aa-173">Komponententests für Docker-Containern</span><span class="sxs-lookup"><span data-stu-id="0d5aa-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="0d5aa-174">Testen die Gruppen von miteinander verwandter Anwendungen oder microservices</span><span class="sxs-lookup"><span data-stu-id="0d5aa-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="0d5aa-175">Testen Sie in Produktions-als auch "Kanarischen" Versionen</span><span class="sxs-lookup"><span data-stu-id="0d5aa-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="0d5aa-176">Der wichtige Punkt ist, dass bei der Integration und Funktionstests ausgeführt werden, diese Tests von außerhalb der Container ausgeführt werden muss.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="0d5aa-177">Tests müssen nicht definiert und innerhalb des Containers, die Sie bereitstellen, ausgeführt werden, da die Container für statische Bilder basieren, die genau sein soll, die Sie in die Produktion bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="0d5aa-178">Sehr möglich beim Testen von komplexeren Szenarien, wie viele Clustern (testen, staging Cluster, und Produktionscluster) testen ist so veröffentlichen Sie die Bilder auf eine Registrierung in verschiedenen Clustern zu testen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="0d5aa-179">Mithilfe von Push übertragen Sie die benutzerdefinierte Anwendung Docker Bild in der globalen Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="0d5aa-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="0d5aa-180">Nachdem der Docker-Images getestet und überprüft wurde, sollten Sie kennzeichnen und veröffentlichen Sie sie auf der Docker-Registrierung.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="0d5aa-181">Die Docker-Registrierung ist ein wichtiger Teil des Lebenszyklus der Docker-Anwendung, da sie zentraler Ort ist, in dem Sie Ihre benutzerdefinierte Tests (d. h. "Verbürgtes Images") in QA und Produktions-Umgebungen bereitgestellt werden gespeichert.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="0d5aa-182">Ähnlich wie der Anwendungscode in Ihre SCC-Repository (Git usw.) gespeichert Ihre "Source of Truth" ist, wird die Docker-Registrierung die "Source of Truth" für Ihre binäre Anwendung oder die Bits in den Umgebungen QA- oder-produktionsumgebung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="0d5aa-183">In der Regel sollten Sie Ihre privaten Repositorys bei benutzerdefinierten Images entweder in einem privaten-Repository in der Registrierung für Azure-Container oder in einer lokalen Registrierung wie Docker Trusted Registry oder in einer öffentlichen Cloud-Registrierung mit eingeschränktem Zugriff (z. B. haben Docker Hub), müssen auch in diesem Fall ist der Code nicht als open Source-Sie Sicherheit des Herstellers vertrauen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="0d5aa-184">In beiden Fällen ist die Methode mit der in diesem Fall sehr ähnlich und letztlich basierend auf den Befehl "Docker Push", wie in Abbildung 5-4 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="0d5aa-185">Abbildung 5-4: Veröffentlichen benutzerdefinierter Abbilder in Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="0d5aa-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="0d5aa-186">Es sind mehrere Produkte für Docker-Registrierungen von Cloud-Anbieter, wie Azure Containerregistrierung, Amazon Web Services Containerregistrierung, Google Containerregistrierung, Kai Registrierung usw. ein.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="0d5aa-187">Die Visual Studio Team Services-Docker-Erweiterung verwenden, können Sie einen Satz von Bereitstellen von Images von einer Datei Docker compose.yml mehrere Tags dar, eine authentifizierte Docker-Registrierung (z. B. Azure-Containerregistrierung) definiert push, wie in Abbildung 5 – 5 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-187">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="0d5aa-188">Abbildung 5 – 5: Verwenden von Visual Studio Team Services zum Veröffentlichen benutzerdefinierter Images mit einer Docker-Registrierung</span><span class="sxs-lookup"><span data-stu-id="0d5aa-188">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="0d5aa-189">**Weitere Informationen** Weitere Informationen über die Docker-Erweiterung für Visual Studio Team Services, wechseln Sie zu <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-189">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="0d5aa-190">Wechseln Sie zu, um weitere Informationen zum Azure-Containerregistrierung <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="0d5aa-191">Schritt 4: CD, bereitstellen</span><span class="sxs-lookup"><span data-stu-id="0d5aa-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="0d5aa-192">Die Unveränderlichkeit von Docker-Images wird sichergestellt, dass eine wiederholbare Bereitstellungen mit wurde entwickelt, getestet über CI sowie unter Produktionsbedingungen ausführen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="0d5aa-193">Nachdem Sie die Anwendung Docker-Images, die in der Docker-Registrierung (private oder öffentliche) veröffentlicht haben, können Sie diese bereitstellen, auf die mehrere Umgebungen, die Sie möglicherweise (Produktion, QA, staging usw.) von der CD-Pipeline mit Visual Studio Team Services Pipeline-Vorgänge oder Visual Studio Team Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="0d5aa-194">Allerdings hängt an diesem Punkt welche Art von Docker-Anwendung, die Sie bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="0d5aa-195">Bereitstellen einer einfachen Anwendung (aus einer Zusammensetzung und Bereitstellung der Sicht) wie eine monolithischen Anwendung umfasst einige Container oder Dienste und bereitgestellten auf einigen Servern oder virtuellen Computern unterscheidet sich von der Bereitstellung von eine komplexere Anwendung wie eine Microservices dienstorientierten Anwendung mit hyperskalaren-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="0d5aa-196">In den folgenden Abschnitten werden diese beiden Szenarien erläutert.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="0d5aa-197">Bereitstellen von Docker-Anwendungen in mehreren Umgebungen von Docker zusammengesetzt</span><span class="sxs-lookup"><span data-stu-id="0d5aa-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="0d5aa-198">Sehen wir uns zunächst an, die weniger komplexe-Szenario: einfache Docker-Hosts (virtuelle Computer oder Server) in einer einzigen Umgebung oder in mehreren Umgebungen bereitstellen (QA, Staging und Produktion).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="0d5aa-199">In diesem Szenario intern die CD-Pipeline können Docker-verfassen (aus der Visual Studio Team Services-Bereitstellungsaufgaben) zum Bereitstellen von Docker-Anwendungen mit einer verwandten Gruppe von Containern oder Diensten, wie in Abbildung 5 bis 6 veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-199">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="0d5aa-200">Abbildung 5 – 6: Bereitstellen von Anwendungscontainer für einfache Umgebungen Registrierung des Docker-Hosts</span><span class="sxs-lookup"><span data-stu-id="0d5aa-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="0d5aa-201">Abbildung 5-7 hebt hervor, wie Sie Ihre Builds CI, QA und testumgebungen über Visual Studio Team Services verbinden können, durch Klicken auf Docker Compose im Dialogfeld Task hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="0d5aa-202">Allerdings beim Staging-oder produktionsumgebung bereitstellen, Sie würden normalerweise verwenden Release Management-Funktionen, die Behandlung von Umgebungen mit mehreren (z. B. QA, Staging und Produktion).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="0d5aa-203">Wenn Sie auf eine Docker-Host bereitstellen, die Visual Studio Team Services verwendeten Task "Docker Compose" (das ist das Aufrufen der Docker-Befehl hinter den Kulissen verfassen).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-203">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="0d5aa-204">Wenn Sie Azure-Container-Dienst bereitstellen, verwendet der Docker-Bereitstellungsaufgabe, wie im Abschnitt erläutert, die folgt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="0d5aa-205">Abbildung 5-7: Hinzufügen einer Docker Compose Aufgabe in einer Visual Studio Team Services-pipeline</span><span class="sxs-lookup"><span data-stu-id="0d5aa-205">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="0d5aa-206">Beim Erstellen einer Version in Visual Studio Team Services dauert es einen Satz von Eingabedaten Artefakte.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-206">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="0d5aa-207">Diese sollten unveränderlich während der gesamten Lebensdauer der Version in mehreren Umgebungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="0d5aa-208">Wenn Sie Container einführen, identifizieren die Eingabe Artefakte Bilder in einer Registrierung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="0d5aa-209">Je nachdem, wie diese identifiziert sind werden sie nicht garantiert bleiben unverändert im Verlauf der Version der offensichtlichste Fall, wenn Sie aus einer Datei Docker-compose "Myimage:latest" verweisen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="0d5aa-210">Die Docker-Erweiterung für Visual Studio Team Services gibt Ihnen die Möglichkeit, Buildartefakte zu generieren, die spezifischen Registrierungszeichenfolgen-Image enthalten Übersichten, die zur eindeutigen Identifizierung des gleichen Images binäre garantiert werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-210">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="0d5aa-211">Dies sind, was Sie tatsächlich als Eingabe für eine Version verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="0d5aa-212">Verwalten von Versionen in Docker-Umgebungen mithilfe von Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="0d5aa-212">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="0d5aa-213">Über die Visual Studio Team Services-Erweiterungen, Sie können ein neues Image erstellen, veröffentlichen einen Docker-Registrierung führen Sie es auf Linux- oder Windows-Hosts und verwenden Sie Befehle wie Docker-zum Bereitstellen von mehreren Containern als eine gesamte Anwendung, über das visuelle Element erstellen Studio Team Services Release Management-Funktionen für mehrere Umgebungen bestimmt, wie in Abbildung 5 bis 8 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-213">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="0d5aa-214">Abbildung 5 bis 8: Konfigurieren von Visual Studio Team Services Docker Compose Aufgaben von Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="0d5aa-214">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="0d5aa-215">Beachten Sie, dass das Szenario in Abbildung 5 bis 6 dargestellt und in Abbildung 5 bis 8 implementiert ziemlich einfach ist, (er wird bereitgestellt, um einfache Docker-Hosts und virtuellen Computer, und es wird einen einzelnen Container oder eine Instanz pro Bild) und wahrscheinlich nur für Entwicklungs- oder Testserver sc verwendet werden sollte jedoch beibehalten. Enarios.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="0d5aa-216">In den meisten Unternehmen Produktionsszenarien sollten damit hohe Verfügbarkeit (HA) und leicht zu verwaltende Skalierbarkeit von Lastenausgleich über mehrere Knoten, Servern und virtuellen Computern sowie "intelligent Failover" daher, die, wenn ein Server oder den Knoten ein Fehler auftritt, seine Dienste und Container werden in einem anderen Server mit dem Host oder virtuellen Computer verschoben.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="0d5aa-217">In diesem Fall benötigen Sie komplexere Technologien wie Container Clustern Orchestrators und Planer.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="0d5aa-218">Daher ist die Möglichkeit, die für diesen Cluster bereitstellen, genau über die erweiterten Szenarien, die im nächsten Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="0d5aa-219">Bereitstellen von komplexen Docker-Anwendungen für Docker-Clustern (DC/OS, Kubernetes und Docker Containerhostclustern)</span><span class="sxs-lookup"><span data-stu-id="0d5aa-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="0d5aa-220">Die Art der verteilten Anwendung erfordert Serverressourcen, die auch verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="0d5aa-221">Zur Produktion Funktionen verfügen, benötigen Sie Funktionen, die hohe Skalierbarkeit bieten clustering und hohe Verfügbarkeit auf der Grundlage von in einem Pool zusammengefasste Ressourcen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="0d5aa-222">Sie können die Bereitstellung Container manuell zu diesen Clustern von einem CLI-Tool, z. B. Docker Containerhostclustern (z. B. mit [Docker-Dienst erstellen](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) oder einer Webbenutzeroberfläche wie z. B. [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) für DC/OS-Clustern, aber Sie sollten Reservieren Sie, die nur zu Testzwecken punctual Bereitstellung oder zu Verwaltungszwecken wie dezentrale Skalierung oder Überwachungszwecken.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="0d5aa-223">Aus Sicht einer CD, und Visual Studio Team Services insbesondere führen speziell erstellte Bereitstellungsaufgaben aus Ihrer Visual Studio Team Services Release Management-Umgebungen Sie Ihre Sammelartikeleinheit für verteilte Cluster in bereitgestellt wird Containerdienst, wie in Abbildung 5 bis 9 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-223">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="0d5aa-224">Abbildung 5 – 9: Bereitstellung von verteilten Anwendungen Containerdienst</span><span class="sxs-lookup"><span data-stu-id="0d5aa-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="0d5aa-225">Zu Beginn beim Bereitstellen auf bestimmte Cluster oder Orchestrators verwenden traditionell bestimmte Bereitstellungsskripts und Mechanismen pro jedes Orchestrator (d. h. Mesosphere DC/OS oder Kubernetes haben unterschiedliche Bereitstellungsmechanismen als Docker als auch Docker Sie Containerhostclustern) anstelle von einfacher und einfach zu bedienenden Docker-verfassen Tool basierend auf den Docker-compose.yml-Definitionsdatei.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="0d5aa-226">Allerdings Dank der Microsoft Visual Studio Team Services Docker Deploy-Aufgabe gezeigt in Abbildung 5 bis 10, Sie jetzt auch können bereitstellen, DC-Betriebssystem durch die einfache Verwendung der vertrauten Docker-compose.yml-Datei, da Microsoft diese "Übersetzung" für Sie ausführt (aus der Docker-compose.yml-Datei in andere Formate von DC/OS benötigt).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-226">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="0d5aa-227">Abbildung 5 bis 10: Hinzufügen der Docker-Bereitstellungstask zu Ihrer Umgebung RM</span><span class="sxs-lookup"><span data-stu-id="0d5aa-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="0d5aa-228">Abbildung 5 bis 11 wird veranschaulicht, wie Sie den Docker-Bereitstellungstask bearbeiten und geben Sie den Zieltyp (Azure Container Dienst DC/OS, in diesem Fall), die Dockerfile-Datei zu erstellen und die Registrierung der Docker-Verbindung (z. B. Azure-Containerregistrierung oder Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="0d5aa-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="0d5aa-229">Dies ist, in dem der Task kann jetzt zu verwendenden benutzerdefinierten Docker Images als Container im Cluster DC/OS bereitgestellt werden abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="0d5aa-230">Abbildung 5 – 11: Bereitstellen von Docker Aufgabe Definition Bereitstellen von Azure Container Dienst DC/OS</span><span class="sxs-lookup"><span data-stu-id="0d5aa-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="0d5aa-231">**Weitere Informationen** Weitere Informationen finden Sie Informationen zu CD Pipeline mit Visual Studio Team Services als auch Docker an, auf den folgenden Websites:</span><span class="sxs-lookup"><span data-stu-id="0d5aa-231">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="0d5aa-232">Visual Studio Team Services-Erweiterung für Docker und Azure-Container-Dienst: [ https://aka.ms/\ Vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="0d5aa-232">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="0d5aa-233">Azure-Container-Dienst: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="0d5aa-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="0d5aa-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="0d5aa-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="0d5aa-235">Schritt 5: Ausführen und verwalten</span><span class="sxs-lookup"><span data-stu-id="0d5aa-235">Step 5: Run and manage</span></span>

<span data-ttu-id="0d5aa-236">Da ausführen und Verwalten von Anwendungen an Enterprise-Production-Ebene eine Hauptthema in und von sich selbst und aufgrund der Art der Vorgänge und Personen, die auf dieser Ebene (IT-Betrieb) sowie des großen Bereichs dieses Bereichs arbeiten, wir haben die aggregationsverarbeitung verwendet der gesamtes weiter Kapitel verlagern Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="0d5aa-237">Schritt 6: Überwachen und zu diagnostizieren</span><span class="sxs-lookup"><span data-stu-id="0d5aa-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="0d5aa-238">In diesem Thema wird auch im nächsten Kapitel behandelt, als Teil der Aufgaben, die IT-Betrieb in Produktionssystemen führt; Allerdings ist wichtig, markieren Sie, dass die Einsichten, die in diesem Schritt erhaltenen zurück an das Entwicklungsteam feed müssen, damit die Anwendung ständig verbessert wird.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="0d5aa-239">Aus dieser Sicht ist es ebenfalls Teil der DevOps, obwohl die Tasks und Vorgänge in der Regel ausgeführt werden IT.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="0d5aa-240">Nur bei der Überwachung und Diagnose zu 100 % in den Bereich des DevOps sind sind die Überwachungsfunktionen Prozesse und Analysen, die vom Entwicklungsteam für Test- oder Beta-Umgebungen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="0d5aa-241">Dies erfolgt durch Ausführen von ladetests oder einfach durch Überwachung Beta oder QA-Umgebungen, in denen Betatester die neuen Versionen versuchen.</span><span class="sxs-lookup"><span data-stu-id="0d5aa-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0d5aa-242">[Zurück](index.md)
[Weiter](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="0d5aa-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>
