---
title: "Datenstrukturen für die parallele Programmierung"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
caps.latest.revision: "15"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: f35c5382455021f0a001604367e59204ce4ad93c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2017
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="68559-102">Datenstrukturen für die parallele Programmierung</span><span class="sxs-lookup"><span data-stu-id="68559-102">Data Structures for Parallel Programming</span></span>
<span data-ttu-id="68559-103">.NET Framework, Version 4 verschiedene neue Typen eingeführt werden, die in der parallelen Programmierung, darunter eine Gruppe von gleichzeitigen Auflistungsklassen, einfache Synchronisierungsprimitiven und Typen für verzögerte Initialisierung nützlich sind.</span><span class="sxs-lookup"><span data-stu-id="68559-103">The .NET Framework version 4 introduces several new types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="68559-104">Sie können diese Typen mit einer Multithreadanwendungscode, einschließlich der Task Parallel Library und PLINQ verwenden.</span><span class="sxs-lookup"><span data-stu-id="68559-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="68559-105">Gleichzeitigen Auflistungsklassen</span><span class="sxs-lookup"><span data-stu-id="68559-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="68559-106">Die Auflistungsklassen den <xref:System.Collections.Concurrent?displayProperty=nameWithType> Namespace bereit, Thread-sichere hinzufügen und Entfernen von Vorgängen, die Sperren möglichst zu vermeiden aus, und verwenden Sie die differenzierte Sperre, in denen Sperren erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="68559-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="68559-107">Im Gegensatz zu Sammlungen, die in .NET Framework-Versionen 1.0 und 2.0 eingeführt wurden, erfordert gleichzeitigen Auflistungsklassen keine Benutzercode zu sperren, wenn sie Elemente zugreift.</span><span class="sxs-lookup"><span data-stu-id="68559-107">Unlike collections that were introduced in the .NET Framework versions 1.0 and 2.0, a concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="68559-108">Die gleichzeitigen Auflistungsklassen können die Leistung erheblich verbessern über Typen wie z. B. <xref:System.Collections.ArrayList?displayProperty=nameWithType> und <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (mit Sperren Benutzer implementiert) in Szenarien, in denen mehrere Threads hinzufügen und Entfernen von Elementen aus einer Auflistung.</span><span class="sxs-lookup"><span data-stu-id="68559-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="68559-109">In der folgenden Tabelle sind die neuen gleichzeitigen Auflistungsklassen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="68559-109">The following table lists the new concurrent collection classes:</span></span>  
  
|<span data-ttu-id="68559-110">Typ</span><span class="sxs-lookup"><span data-stu-id="68559-110">Type</span></span>|<span data-ttu-id="68559-111">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="68559-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="68559-112">Stellt Sperr- und Begrenzungsfunktionen für threadsichere Auflistungen bereit, die <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType> implementieren.</span><span class="sxs-lookup"><span data-stu-id="68559-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="68559-113">Producerthreads blockiert, wenn keine Slots verfügbar sind oder wenn die Auflistung voll ist.</span><span class="sxs-lookup"><span data-stu-id="68559-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="68559-114">Consumer Threads blockiert, wenn die Auflistung leer ist.</span><span class="sxs-lookup"><span data-stu-id="68559-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="68559-115">Dieser Typ unterstützt auch nicht blockierend Zugriff durch Verbraucher und Hersteller.</span><span class="sxs-lookup"><span data-stu-id="68559-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="68559-116"><xref:System.Collections.Concurrent.BlockingCollection%601>kann als Basisklasse verwendet werden oder Sicherungsspeicher bieten blockieren und für jede Auflistungsklasse, die unterstützt umgebende <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="68559-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="68559-117">Eine Thread-sichere Behälter-Implementierung, die skalierbare bietet hinzufügen und get-Operationen.</span><span class="sxs-lookup"><span data-stu-id="68559-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="68559-118">Ein für parallele und skalierbare-Wörterbuchtyp.</span><span class="sxs-lookup"><span data-stu-id="68559-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="68559-119">Eine gleichzeitige und skalierbare FIFO-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="68559-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="68559-120">Ein gleichzeitiger und skalierbarer LIFO-Stapel.</span><span class="sxs-lookup"><span data-stu-id="68559-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="68559-121">Weitere Informationen finden Sie unter [Threadsichere Auflistungen](../../../docs/standard/collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="68559-121">For more information, see [Thread-Safe Collections](../../../docs/standard/collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="68559-122">Synchronisierungsprimitiven</span><span class="sxs-lookup"><span data-stu-id="68559-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="68559-123">Die neue Synchronisierungsprimitiven in die <xref:System.Threading?displayProperty=nameWithType> Namespace ermöglichen eine differenzierte Parallelität und schnellere Leistung durch das Vermeiden der ressourcenintensive Sperrmechanismen in Legacycode multithreading.</span><span class="sxs-lookup"><span data-stu-id="68559-123">The new synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span> <span data-ttu-id="68559-124">Einige neuen Typen, wie z. B. <xref:System.Threading.Barrier?displayProperty=nameWithType> und <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> gibt es keine Entsprechung in früheren Versionen von .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="68559-124">Some of the new types, such as <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> have no counterparts in earlier releases of the .NET Framework.</span></span>  
  
 <span data-ttu-id="68559-125">Die folgende Tabelle enthält die neue Synchronisierungstypen:</span><span class="sxs-lookup"><span data-stu-id="68559-125">The following table lists the new synchronization types:</span></span>  
  
|<span data-ttu-id="68559-126">Typ</span><span class="sxs-lookup"><span data-stu-id="68559-126">Type</span></span>|<span data-ttu-id="68559-127">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="68559-127">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="68559-128">Ermöglicht mehrere Threads arbeiten an einem Algorithmus parallel durch einen Punkt, an dem jeder Task signalisieren der Eingang und dann blockieren, bis einige oder alle Aufgaben angekommen sind kann, bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="68559-128">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="68559-129">Weitere Informationen finden Sie unter [Barrier](../../../docs/standard/threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="68559-129">For more information, see [Barrier](../../../docs/standard/threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="68559-130">Vereinfacht die Zweig- und Joinknoten Szenarien durch eine einfache Rendezvous-Mechanismus.</span><span class="sxs-lookup"><span data-stu-id="68559-130">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="68559-131">Weitere Informationen finden Sie unter [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="68559-131">For more information, see [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="68559-132">Ein Synchronisierungsprimitiver, der ähnlich wie <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="68559-132">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="68559-133"><xref:System.Threading.ManualResetEventSlim>ist jedoch nur für die prozessinterne Kommunikation verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="68559-133"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span> <span data-ttu-id="68559-134">Weitere Informationen finden Sie unter [ManualResetEvent und ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span><span class="sxs-lookup"><span data-stu-id="68559-134">For more information, see [ManualResetEvent and ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="68559-135">Ein Synchronisierungsprimitiver, der die Anzahl der Threads, die gleichzeitig auf eine Ressource zugreifen können oder einen Pool von Ressourcen beschränkt.</span><span class="sxs-lookup"><span data-stu-id="68559-135">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="68559-136">Weitere Informationen finden Sie unter [Semaphore und SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="68559-136">For more information, see [Semaphore and SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="68559-137">Ein gegenseitige Sperrprimitiven, die dem Thread, wodurch der versucht, der eine Sperre in einer Schleife wartet oder *Drehfeld*, für einen Zeitraum vor der Rückgabe sein Quantum.</span><span class="sxs-lookup"><span data-stu-id="68559-137">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="68559-138">In Szenarien, in denen die Latenzzeit für die Sperre wird erwartet kurz <xref:System.Threading.SpinLock> bietet eine bessere Leistung als andere Arten von Sperren.</span><span class="sxs-lookup"><span data-stu-id="68559-138">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="68559-139">Weitere Informationen finden Sie unter [SpinLock](../../../docs/standard/threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="68559-139">For more information, see [SpinLock](../../../docs/standard/threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="68559-140">Ein kleiner, einfacher Typ, der rotiert wird innerhalb eines angegebenen Zeitraums und versetzt den Thread in einen Wartezustand versetzt, falls die Spinninganzahl überschritten wird.</span><span class="sxs-lookup"><span data-stu-id="68559-140">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="68559-141">Weitere Informationen finden Sie unter [SpinWait](../../../docs/standard/threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="68559-141">For more information, see [SpinWait](../../../docs/standard/threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="68559-142">Weitere Informationen finden Sie unter:</span><span class="sxs-lookup"><span data-stu-id="68559-142">For more information, see:</span></span>  
  
-   [<span data-ttu-id="68559-143">Gewusst wie: Synchronisierung auf niedriger Ebene mit SpinLock</span><span class="sxs-lookup"><span data-stu-id="68559-143">How to: Use SpinLock for Low-Level Synchronization</span></span>](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
-   <span data-ttu-id="68559-144">[Vorgehensweise: Synchronisieren gleichzeitiger Vorgänge mit einer Barriere](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="68559-144">[How to: Synchronize Concurrent Operations with a Barrier](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="68559-145">Verzögerte Initialisierung-Klassen</span><span class="sxs-lookup"><span data-stu-id="68559-145">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="68559-146">Bei einer verzögerten Initialisierung wird der Speicher für ein Objekt nicht zugeordnet, bis diese benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="68559-146">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="68559-147">Verzögerter Initialisierung kann die Leistung verbessern, indem gleichmäßig objektzuweisungen über die Lebensdauer eines Programms.</span><span class="sxs-lookup"><span data-stu-id="68559-147">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="68559-148">Sie können die verzögerte Initialisierung für jeden benutzerdefinierten Typ aktivieren, indem Sie umschließt den Typ <xref:System.Lazy%601>.</span><span class="sxs-lookup"><span data-stu-id="68559-148">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="68559-149">Die folgende Tabelle enthält die Typen für verzögerte Initialisierung:</span><span class="sxs-lookup"><span data-stu-id="68559-149">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="68559-150">Typ</span><span class="sxs-lookup"><span data-stu-id="68559-150">Type</span></span>|<span data-ttu-id="68559-151">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="68559-151">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="68559-152">Stellt einfachen, Thread-sichere verzögerte Initialisierung bereit.</span><span class="sxs-lookup"><span data-stu-id="68559-152">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="68559-153">Jeder Thread verzögert-Aufrufen die Initialisierungsfunktion bietet einen verzögert initialisierten Wert auf der Grundlage einer pro Thread.</span><span class="sxs-lookup"><span data-stu-id="68559-153">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="68559-154">Stellt statische Methoden, die die Notwendigkeit, eine dedizierte Instanz verzögerte Initialisierung zuordnen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="68559-154">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="68559-155">Verwenden sie stattdessen Verweise, um sicherzustellen, dass Ziele initialisiert wurden, wie darauf zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="68559-155">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="68559-156">Weitere Informationen finden Sie unter [Verzögerte Initialisierung](../../../docs/framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="68559-156">For more information, see [Lazy Initialization](../../../docs/framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="68559-157">Aggregieren von Ausnahmen</span><span class="sxs-lookup"><span data-stu-id="68559-157">Aggregate Exceptions</span></span>  
 <span data-ttu-id="68559-158">Die <xref:System.AggregateException?displayProperty=nameWithType> -Typ kann verwendet werden, um mehrere Ausnahmen zu erfassen, die in separaten Threads gleichzeitig ausgelöst werden und an den Verbindungsthread als eine einzelne Ausnahme zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="68559-158">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="68559-159">Die <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> und <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> verwenden Sie Typen und PLINQ <xref:System.AggregateException> sehr häufig zu diesem Zweck.</span><span class="sxs-lookup"><span data-stu-id="68559-159">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="68559-160">Weitere Informationen finden Sie unter [NIB: Vorgehensweise: Behandeln Ausnahmen, die von Aufgaben ausgelöste](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) und [wie: Behandeln von Ausnahmen in einer PLINQ-Abfrage](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="68559-160">For more information, see [NIB: How to: Handle Exceptions Thrown by Tasks](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) and [How to: Handle Exceptions in a PLINQ Query](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="68559-161">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="68559-161">See Also</span></span>  
 <xref:System.Collections.Concurrent?displayProperty=nameWithType>  
 <xref:System.Threading?displayProperty=nameWithType>  
 [<span data-ttu-id="68559-162">Parallele Programmierung</span><span class="sxs-lookup"><span data-stu-id="68559-162">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
