---
title: 'Exemplarische Vorgehensweise: Erstellen einer Datenflusspipeline'
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: d63fb872382bfc0a3ba3b8637c7357ab65c58fbf
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/18/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="76cdc-102">Exemplarische Vorgehensweise: Erstellen einer Datenflusspipeline</span><span class="sxs-lookup"><span data-stu-id="76cdc-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="76cdc-103">Sie können zwar die <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, und <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> -Methode zum Empfangen von Nachrichten von quellblöcken, Sie können auch Nachrichtenblöcke verbinden, in Form einer *Datenflusspipeline*.</span><span class="sxs-lookup"><span data-stu-id="76cdc-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="76cdc-104">Eine Datenpipeline besteht aus einer Reihe von Komponenten, oder *Datenflussblöcke*, von denen jede eine bestimmte Aufgabe, die zu einem größeren Ziel beiträgt ausführt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="76cdc-105">Jeder Datenflussblock in einer Datenflusspipeline erledigt eine Aufgabe, wenn er eine Meldung von einem anderen Datenflussblock empfangen hat.</span><span class="sxs-lookup"><span data-stu-id="76cdc-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="76cdc-106">Eine Analogie hierzu ist eine Fertigungsstraße eines Fahrzeugherstellers.</span><span class="sxs-lookup"><span data-stu-id="76cdc-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="76cdc-107">Jedes Fahrzeug durchläuft die Fertigungsstraße: In einer Station wird das Fahrgestell montiert, in der nächsten wird der Motor eingebaut usw.</span><span class="sxs-lookup"><span data-stu-id="76cdc-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="76cdc-108">Da eine Fertigungsstraße ermöglicht, dass mehrere Fahrzeuge gleichzeitig montiert werden, bietet sie einen besseren Durchsatz als eine Einzelmontage eines vollständigen Fahrzeugs.</span><span class="sxs-lookup"><span data-stu-id="76cdc-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="76cdc-109">Die TPL-Datenflussbibliothek (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType>-Namespace) ist nicht in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] enthalten.</span><span class="sxs-lookup"><span data-stu-id="76cdc-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="76cdc-110">Öffnen Sie zum Installieren des <xref:System.Threading.Tasks.Dataflow>-Namespace das Projekt in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], wählen Sie im Menü "Projekt" die Option **NuGet-Pakete verwalten** aus, und suchen Sie online nach dem `Microsoft.Tpl.Dataflow` -Paket.</span><span class="sxs-lookup"><span data-stu-id="76cdc-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="76cdc-111">Dieses Dokument veranschaulicht eine Datenflusspipeline, die das Buch downloads *The Iliad of Homer* aus einer Website und Suchvorgänge Wörter der Text, der mit einzelnen Wörtern, Reverse das erste Wort Zeichen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="76cdc-112">Die Entwicklung der Datenflusspipeline in diesem Dokument besteht aus den folgenden Schritten:</span><span class="sxs-lookup"><span data-stu-id="76cdc-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="76cdc-113">Erstellen Sie die Datenflussblöcke, die Bestandteile der Pipeline sein sollen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="76cdc-114">Verbinden Sie jeden Datenflussblock mit dem nächsten Block in der Pipeline.</span><span class="sxs-lookup"><span data-stu-id="76cdc-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="76cdc-115">Jeder Block empfängt als Eingabe die Ausgabe des jeweils vorherigen Blocks in der Pipeline.</span><span class="sxs-lookup"><span data-stu-id="76cdc-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="76cdc-116">Erstellen Sie für jeden Datenflussblock eine Fortsetzungsaufgabe, die den nächsten Datenblock in den Zustand Abgeschlossen schaltet, nachdem der vorherige Block beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="76cdc-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="76cdc-117">Senden Sie Daten an den Anfang der Pipeline.</span><span class="sxs-lookup"><span data-stu-id="76cdc-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="76cdc-118">Kennzeichnen Sie den Anfang der Pipeline als abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="76cdc-119">Warten Sie, bis die Pipeline alle Aufgaben ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="76cdc-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="76cdc-120">Erforderliche Komponenten</span><span class="sxs-lookup"><span data-stu-id="76cdc-120">Prerequisites</span></span>  
 <span data-ttu-id="76cdc-121">Lesen Sie das Thema [Datenfluss](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md), bevor Sie mit dieser exemplarischen Vorgehensweise beginnen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="76cdc-122">Erstellen einer Konsolenanwendung</span><span class="sxs-lookup"><span data-stu-id="76cdc-122">Creating a Console Application</span></span>  
 <span data-ttu-id="76cdc-123">Erstellen Sie in [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] ein [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]- oder ein [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]-Konsolenanwendungsprojekt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="76cdc-124">Fügen Sie einen Verweis auf „System.Threading.Tasks.Dataflow.dll“ hinzu.</span><span class="sxs-lookup"><span data-stu-id="76cdc-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="76cdc-125">Alternativ können Sie eine Datei erstellen, und nennen Sie sie `ReverseWords.cs` (`ReverseWords.vb` für [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), und führen Sie dann den folgenden Befehl in einem Visual Studio-Eingabeaufforderung Fenster, um das Projekt zu kompilieren.</span><span class="sxs-lookup"><span data-stu-id="76cdc-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="76cdc-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="76cdc-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="76cdc-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="76cdc-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="76cdc-128">Fügen Sie Ihrem Projekt den folgenden Code hinzu , um die Grundanwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="76cdc-129">Erstellen der Datenflussblöcke</span><span class="sxs-lookup"><span data-stu-id="76cdc-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="76cdc-130">Fügen Sie der `Main`-Methode den folgenden Code hinzu, um die Datenflussblöcke zu erstellen, die Bestandteile der Pipeline sein sollen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="76cdc-131">Die folgende Tabelle enthält eine Übersicht über die Rollen, die die Elemente (Member) der Pipeline haben.</span><span class="sxs-lookup"><span data-stu-id="76cdc-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="76cdc-132">Member</span><span class="sxs-lookup"><span data-stu-id="76cdc-132">Member</span></span>|<span data-ttu-id="76cdc-133">Typ</span><span class="sxs-lookup"><span data-stu-id="76cdc-133">Type</span></span>|<span data-ttu-id="76cdc-134">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="76cdc-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="76cdc-135">Lädt den Text des Buchs aus dem Internet herunter.</span><span class="sxs-lookup"><span data-stu-id="76cdc-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="76cdc-136">Trennt den Text des Buchs in ein Array aus einzelnen Wörtern.</span><span class="sxs-lookup"><span data-stu-id="76cdc-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="76cdc-137">Entfernt kurze Wörter aus dem Wortarray, sortiert die verbliebenen Wörter alphabetisch und entfernt Duplikate.</span><span class="sxs-lookup"><span data-stu-id="76cdc-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="76cdc-138">Sucht in der gefilterten Wortarrayauflistung nach allen Wörtern, deren Umkehrung ebenfalls im Wortarray enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="76cdc-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="76cdc-139">Zeigt die jeweiligen Wörter und die entsprechenden Umkehrwörter in der Konsole an.</span><span class="sxs-lookup"><span data-stu-id="76cdc-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="76cdc-140">Obwohl Sie mehrere Schritte in der Datenflusspipeline in diesem Beispiel in einem einzigen Schritt kombinieren könnten, veranschaulicht dieses Beispiel das Konzept des Zusammenstellens mehrerer unabhängiger Datenflussaufgaben, um eine größere Aufgabe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="76cdc-141">In dem Beispiel wird <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> verwendet, damit jedes Element der Pipeline einen Vorgang für seine Eingabedaten ausführen und die Ergebnisse an den nächsten Schritt in der Pipeline senden kann.</span><span class="sxs-lookup"><span data-stu-id="76cdc-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="76cdc-142">Das `findReversedWords`-Element der Pipeline ist ein <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>-Objekt, da es für jede Eingabe mehrere unabhängige Ausgaben erzeugt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="76cdc-143">Das Ende der Pipeline, `printReversedWords`, ist ein <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>-Objekt, weil es eine Aktion für seine Eingabe ausführt und kein Ergebnis erzeugt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="76cdc-144">Aufbauen der Pipeline</span><span class="sxs-lookup"><span data-stu-id="76cdc-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="76cdc-145">Fügen Sie den folgenden Code ein, um jeden Block mit dem nächsten Block in der Pipeline zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="76cdc-146">Wenn Sie die <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A>-Methode aufrufen, um einen Quelldatenflussblock mit einem Zieldatenflussblock zu verbinden, überträgt der Quelldatenflussblock Daten an den Zielblock, sobald Daten verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="76cdc-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="76cdc-147">Erstellen der Abschlussaufgaben (Completion-Aufgaben)</span><span class="sxs-lookup"><span data-stu-id="76cdc-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="76cdc-148">Fügen Sie den folgenden Code hinzu, damit jeder Datenflussblock eine abschließende Aktion ausführt, nachdem er alle Daten verarbeitet hat.</span><span class="sxs-lookup"><span data-stu-id="76cdc-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="76cdc-149">Um den Abschluss durch die Pipeline zu übermitteln, legt jede Abschlussaufgabe den nächsten Datenflussblock auf den Zustand Abgeschlossen (Completed) fest.</span><span class="sxs-lookup"><span data-stu-id="76cdc-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="76cdc-150">Wird beispielsweise der Anfang der Pipeline auf den Zustand Abgeschlossen festgelegt, verarbeitet er alle verbliebenen gepufferten Nachrichten und führt dann seine Abschlussaufgabe aus, die das zweite Element der Pipeline auf den Zustand Abgeschlossen festlegt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="76cdc-151">Das zweite Element der Pipeline verarbeitet wiederum alle verbliebenen gepufferten Nachrichten und führt dann seine Abschlussaufgabe aus, die das dritte Element der Pipeline auf den Zustand Abgeschlossen festlegt.</span><span class="sxs-lookup"><span data-stu-id="76cdc-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="76cdc-152">Diese Vorgehensweise wird fortgesetzt, bis alle Elemente der Pipeline abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="76cdc-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="76cdc-153">In diesem Beispiel wird das Schlüsselwort `delegate` (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) verwendet, um die Fortsetzungsaufgaben zu definieren.</span><span class="sxs-lookup"><span data-stu-id="76cdc-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="76cdc-154">Senden von Daten an die Pipeline</span><span class="sxs-lookup"><span data-stu-id="76cdc-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="76cdc-155">Fügen Sie folgenden Code, um die URL des Buchs buchen *The Iliad of Homer* an den Anfang der Datenflusspipeline zu senden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="76cdc-156">In diesem Beispiel wird <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> verwendet, damit die Daten synchron an den Anfang der Pipeline gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="76cdc-157">Verwenden Sie die <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType>-Methode, wenn Sie Daten asynchron an einen Datenflussknoten senden müssen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="76cdc-158">Abschließen der Pipelineaktivität</span><span class="sxs-lookup"><span data-stu-id="76cdc-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="76cdc-159">Fügen Sie den folgenden Code ein, um den Anfang der Pipeline als abgeschlossen zu kennzeichnen.</span><span class="sxs-lookup"><span data-stu-id="76cdc-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="76cdc-160">Der Anfang der Pipeline führt seine Fortsetzungsaufgabe aus, nachdem er alle gepufferten Nachrichten verarbeitet hat.</span><span class="sxs-lookup"><span data-stu-id="76cdc-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="76cdc-161">Diese Fortsetzungsaufgabe überträgt den Zustand Abgeschlossen durch die Pipeline.</span><span class="sxs-lookup"><span data-stu-id="76cdc-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="76cdc-162">In diesem Beispiel wird eine URL durch die Datenflusspipeline gesendet, um verarbeitet zu werden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="76cdc-163">Wenn Sie mehrere Eingaben durch eine Pipeline senden, rufen Sie die <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType>-Methode auf, nachdem Sie alle Eingaben übertragen haben.</span><span class="sxs-lookup"><span data-stu-id="76cdc-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="76cdc-164">Sie können auf diesen Schritt verzichten, wenn Ihre Anwendung keinen wohldefinierten Punkt hat, an dem keine Daten mehr verfügbar sind, oder wenn die Anwendung nicht warten muss, bis die Pipeline beendet ist.</span><span class="sxs-lookup"><span data-stu-id="76cdc-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="76cdc-165">Warten bis zum Beenden der Pipeline</span><span class="sxs-lookup"><span data-stu-id="76cdc-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="76cdc-166">Fügen Sie den folgenden Code hinzu, damit gewartet wird, bis die Pipeline beendet ist.</span><span class="sxs-lookup"><span data-stu-id="76cdc-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="76cdc-167">Da in diesem Beispiel Fortsetzungsaufgaben verwendet werden, um Abschluss durch die Pipeline zu übertragen, ist der gesamte Vorgang abgeschlossen, wenn das Ende der Pipeline abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="76cdc-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="76cdc-168">Sie können von jedem Thread oder von mehreren Threads gleichzeitig auf den Datenflussabschluss warten.</span><span class="sxs-lookup"><span data-stu-id="76cdc-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="76cdc-169">Vollständiges Beispiel</span><span class="sxs-lookup"><span data-stu-id="76cdc-169">The Complete Example</span></span>  
 <span data-ttu-id="76cdc-170">Das folgende Beispiel enthält den vollständigen Code für diese exemplarische Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="76cdc-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="76cdc-171">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="76cdc-171">Next Steps</span></span>  
 <span data-ttu-id="76cdc-172">In diesem Beispiel wird eine zu verarbeitende URL durch die Datenflusspipeline gesendet.</span><span class="sxs-lookup"><span data-stu-id="76cdc-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="76cdc-173">Wenn Sie mehrere Eingabewerte durch eine Pipeline senden, können Sie eine Form von Parallelität in Ihrer Anwendung implementieren, die der Art und Weise ähnelt, wie Teile durch eine Automobilfabrik bewegt werden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="76cdc-174">Wenn das erste Element der Pipeline sein Ergebnis an das zweite Element gesendet hat, kann es parallel ein weiteres Objekt verarbeiten, während das zweite Element das erste Ergebnis verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="76cdc-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="76cdc-175">Die Parallelität, die durch Verwenden von datenflusspipelines erreicht wird, wird als bezeichnet *grobmaschige Parallelität* , da es in der Regel weniger, größere Aufgaben besteht.</span><span class="sxs-lookup"><span data-stu-id="76cdc-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="76cdc-176">Sie können auch eine *eine differenzierte Parallelität* von kleineren Aufgaben mit kurzer Ausführungszeit in einer Datenflusspipeline.</span><span class="sxs-lookup"><span data-stu-id="76cdc-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="76cdc-177">In diesem Beispiel wird für das `findReversedWords`-Element der Pipeline die <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>-Methode verwendet, um mehrere Elemente in der Arbeitsliste parallel zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="76cdc-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="76cdc-178">Die Verwendung von feinmaschiger Parallelität in einer grobmaschigen Pipeline kann den Gesamtdurchsatz verbessern.</span><span class="sxs-lookup"><span data-stu-id="76cdc-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="76cdc-179">Sie können auch einen quelldatenflussblock mit mehreren Zielblöcken erstellen Verbinden einer *Datenflussnetzwerk*.</span><span class="sxs-lookup"><span data-stu-id="76cdc-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="76cdc-180">Die überladene Version der <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A>-Methode übernimmt ein <xref:System.Predicate%601>-Objekt, das definiert, ob der Zielblock jede Nachricht anhand dessen Wert akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="76cdc-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="76cdc-181">Die meisten Datenflussblocktypen, die als Quellen fungieren, senden Nachrichten an alle verbundenen Zielblöcke in der Reihenfolge, in der sie verbunden wurden, bis einer der Blöcke die jeweilige Nachricht akzeptiert hat.</span><span class="sxs-lookup"><span data-stu-id="76cdc-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="76cdc-182">Durch Verwenden dieser Filtermechanismus können Sie Systeme von verbundenen Datenflussblöcken erstellen, mit denen bestimmte Daten durch einen Pfad und andere Daten durch einen anderen Pfad geleitet werden.</span><span class="sxs-lookup"><span data-stu-id="76cdc-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="76cdc-183">Ein Beispiel für die Filterung verwendet wird, um ein Datenflussnetzwerk zu erstellen, finden Sie unter [Exemplarische Vorgehensweise: Datenfluss in einer Windows Forms-Anwendung](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="76cdc-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="76cdc-184">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="76cdc-184">See Also</span></span>  
 [<span data-ttu-id="76cdc-185">Dataflow (Datenfluss)</span><span class="sxs-lookup"><span data-stu-id="76cdc-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
