---
title: Mergeoptionen in PLINQ
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: PLINQ queries, merge options
ms.assetid: e8f7be3b-88de-4f33-ab14-dc008e76c1ba
caps.latest.revision: "10"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: e9bf586c1805fc5b5f1cc5f96f4e6b08d80c199a
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2017
---
# <a name="merge-options-in-plinq"></a><span data-ttu-id="5daad-102">Mergeoptionen in PLINQ</span><span class="sxs-lookup"><span data-stu-id="5daad-102">Merge Options in PLINQ</span></span>
<span data-ttu-id="5daad-103">Wenn eine Abfrage als parallele, PLINQ Partitionen die Quellsequenz ausgeführt wird, damit mehrere Threads auf verschiedene Teile gleichzeitig, in der Regel in separaten Threads arbeiten können.</span><span class="sxs-lookup"><span data-stu-id="5daad-103">When a query is executing as parallel, PLINQ partitions the source sequence so that multiple threads can work on different parts concurrently, typically on separate threads.</span></span> <span data-ttu-id="5daad-104">Wenn die Ergebnisse in einem Thread genutzt werden z. B. in einem `foreach` (`For Each` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)])-Schleife befindet, und klicken Sie dann die Ergebnisse von jedem Thread wieder zu einer einzigen Sequenz zusammengeführt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="5daad-104">If the results are to be consumed on one thread, for example, in a `foreach` (`For Each` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) loop, then the results from every thread must be merged back into one sequence.</span></span> <span data-ttu-id="5daad-105">Die Art der Mergereplikation, die PLINQ führt hängt die Operatoren, die in der Abfrage vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="5daad-105">The kind of merge that PLINQ performs depends on the operators that are present in the query.</span></span> <span data-ttu-id="5daad-106">Operatoren, die vorgeben eine neue Bestellung auf die Ergebnisse müssen z. B. alle Elemente aus allen Threads gepuffert.</span><span class="sxs-lookup"><span data-stu-id="5daad-106">For example, operators that impose a new order on the results must buffer all elements from all threads.</span></span> <span data-ttu-id="5daad-107">Aus der Perspektive eines im Consumerthread (also auch die des Anwendungsbenutzers) kann eine vollständig gepufferte Abfrage ausführen, für einen deutlichen Zeitraum, bevor sie das erste Ergebnis erzeugt.</span><span class="sxs-lookup"><span data-stu-id="5daad-107">From the perspective of the consuming thread (which is also that of the application user) a fully buffered query might run for a noticeable period of time before it produces its first result.</span></span> <span data-ttu-id="5daad-108">Andere Operatoren sind teilweise standardmäßig gepuffert. Sie führen ihre Ergebnisse batchweise.</span><span class="sxs-lookup"><span data-stu-id="5daad-108">Other operators, by default, are partially buffered; they yield their results in batches.</span></span> <span data-ttu-id="5daad-109">Ein Operator, <xref:System.Linq.ParallelEnumerable.ForAll%2A> wird nicht standardmäßig gepuffert.</span><span class="sxs-lookup"><span data-stu-id="5daad-109">One operator, <xref:System.Linq.ParallelEnumerable.ForAll%2A> is not buffered by default.</span></span> <span data-ttu-id="5daad-110">Er gibt alle Elemente aus allen Threads sofort.</span><span class="sxs-lookup"><span data-stu-id="5daad-110">It yields all elements from all threads immediately.</span></span>  
  
 <span data-ttu-id="5daad-111">Mithilfe der <xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A> -Methode, wie im folgenden Beispiel gezeigt Sie bieten einen Hinweis für PLINQ, die die Art der Zusammenführung angibt.</span><span class="sxs-lookup"><span data-stu-id="5daad-111">By using the <xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A> method, as shown in the following example, you can provide a hint to PLINQ that indicates what kind of merging to perform.</span></span>  
  
 [!code-csharp[PLINQ#26](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/plinqsamples.cs#26)]
 [!code-vb[PLINQ#26](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/plinq2_vb.vb#26)]  
  
 <span data-ttu-id="5daad-112">Das vollständige Beispiel finden Sie unter [Vorgehensweise: Angeben von Zusammenführungsoptionen in PLINQ](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="5daad-112">For the complete example, see [How to: Specify Merge Options in PLINQ](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md).</span></span>  
  
 <span data-ttu-id="5daad-113">Wenn die betreffende Abfrage die angeforderte Option nicht unterstützt, wird die Option einfach ignoriert.</span><span class="sxs-lookup"><span data-stu-id="5daad-113">If the particular query cannot support the requested option, then the option will just be ignored.</span></span> <span data-ttu-id="5daad-114">In den meisten Fällen müssen Sie keinen Zusammenführungsoption für eine PLINQ-Abfrage angeben.</span><span class="sxs-lookup"><span data-stu-id="5daad-114">In most cases, you do not have to specify a merge option for a PLINQ query.</span></span> <span data-ttu-id="5daad-115">Jedoch in einigen Fällen möglicherweise durch Testen und Messung, die am besten eine Abfrage in einem nicht standardmäßigen Modus ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="5daad-115">However, in some cases you may find by testing and measurement that a query executes best in a non-default mode.</span></span> <span data-ttu-id="5daad-116">Eine übliche Verwendung dieser Option wird einen Block Zusammenführen-Operator, um seine Ergebnisse zu streamen, um eine Reaktionsgeschwindigkeit Benutzeroberfläche bereitstellen erzwungen.</span><span class="sxs-lookup"><span data-stu-id="5daad-116">A common use of this option is to force a chunk-merging operator to stream its results in order to provide a more responsive user interface.</span></span>  
  
## <a name="parallelmergeoptions"></a><span data-ttu-id="5daad-117">ParallelMergeOptions</span><span class="sxs-lookup"><span data-stu-id="5daad-117">ParallelMergeOptions</span></span>  
 <span data-ttu-id="5daad-118">Die <xref:System.Linq.ParallelMergeOptions> Enumeration enthält die folgenden Optionen, die für unterstützte Abfrageformen angeben, wie die endgültige Ausgabe der Abfrage ausgegeben wird, wenn die Ergebnisse in einem Thread verarbeitet werden:</span><span class="sxs-lookup"><span data-stu-id="5daad-118">The <xref:System.Linq.ParallelMergeOptions> enumeration includes the following options that specify, for supported query shapes, how the final output of the query is yielded when the results are consumed on one thread:</span></span>  
  
-   `Not Buffered`  
  
     <span data-ttu-id="5daad-119">Die <xref:System.Linq.ParallelMergeOptions.NotBuffered> Option bewirkt, dass jedes verarbeitete Element aus jeder Thread zurückgegeben werden, sobald es erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="5daad-119">The <xref:System.Linq.ParallelMergeOptions.NotBuffered> option causes each processed element to be returned from each thread as soon as it is produced.</span></span> <span data-ttu-id="5daad-120">Dieses Verhalten ist analog zu "streaming" die Ausgabe.</span><span class="sxs-lookup"><span data-stu-id="5daad-120">This behavior is analogous to "streaming" the output.</span></span> <span data-ttu-id="5daad-121">Wenn die <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> Operator fehlt in der Abfrage `NotBuffered` behält die Reihenfolge der Elemente der Quelle.</span><span class="sxs-lookup"><span data-stu-id="5daad-121">If the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator is present in the query, `NotBuffered` preserves the order of the source elements.</span></span> <span data-ttu-id="5daad-122">Obwohl `NotBuffered` beginnt, die keine Ergebnisse aus, sobald sie verfügbar sind, die die Gesamtzeit für alle zu erzeugen, die Ergebnisse möglicherweise dennoch, nicht länger als mit einer der anderen Zusammenführungsoptionen.</span><span class="sxs-lookup"><span data-stu-id="5daad-122">Although `NotBuffered` starts yielding results as soon as they're available,, the total time to produce all the results might still be longer than using one of the other merge options.</span></span>  
  
-   `Auto Buffered`  
  
     <span data-ttu-id="5daad-123">Die <xref:System.Linq.ParallelMergeOptions.AutoBuffered> Option bewirkt, dass die Abfrage zum Sammeln von Elementen in einen Puffer und klicken Sie dann in regelmäßigen Abständen den Pufferinhalt alle auf einmal auf dem Consumerthread.</span><span class="sxs-lookup"><span data-stu-id="5daad-123">The <xref:System.Linq.ParallelMergeOptions.AutoBuffered> option causes the query to collect elements into a buffer and then periodically yield the buffer contents all at once to the consuming thread.</span></span> <span data-ttu-id="5daad-124">Dies ist analog zu und gibt die Quelldaten in "datenrationen" anstelle der "streamingverhalten" des `NotBuffered`.</span><span class="sxs-lookup"><span data-stu-id="5daad-124">This is analogous to yielding the source data in "chunks" instead of using the "streaming" behavior of `NotBuffered`.</span></span> <span data-ttu-id="5daad-125">`AutoBuffered`dauert möglicherweise länger als `NotBuffered` um das erste Element im Consumerthread verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="5daad-125">`AutoBuffered` may take longer than `NotBuffered` to make the first element available on the consuming thread.</span></span> <span data-ttu-id="5daad-126">Die Größe des Puffers und das genaue Ausgabeverhalten sind nicht konfigurierbar und variieren abhängig von verschiedenen Faktoren ab, die für die Abfrage sind.</span><span class="sxs-lookup"><span data-stu-id="5daad-126">The size of the buffer and the exact yielding behavior are not configurable and may vary, depending on various factors that relate to the query.</span></span>  
  
-   `FullyBuffered`  
  
     <span data-ttu-id="5daad-127">Die <xref:System.Linq.ParallelMergeOptions.FullyBuffered> Option bewirkt, dass die Ausgabe der gesamten Abfrage gepuffert werden, bevor Sie eines der Elemente zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="5daad-127">The <xref:System.Linq.ParallelMergeOptions.FullyBuffered> option causes the output of the whole query to be buffered before any of the elements are yielded.</span></span> <span data-ttu-id="5daad-128">Wenn Sie diese Option verwenden, dauert länger vor das erste Element im Consumerthread verfügbar ist, jedoch möglicherweise dennoch die vollständigen Ergebnisse erzeugt werden schneller als mit den anderen Optionen.</span><span class="sxs-lookup"><span data-stu-id="5daad-128">When you use this option, it can take longer before the first element is available on the consuming thread, but the complete results might still be produced faster than by using the other options.</span></span>  
  
## <a name="query-operators-that-support-merge-options"></a><span data-ttu-id="5daad-129">Abfrageoperatoren, die Unterstützung von Zusammenführungsoptionen</span><span class="sxs-lookup"><span data-stu-id="5daad-129">Query Operators that Support Merge Options</span></span>  
 <span data-ttu-id="5daad-130">Die folgende Tabelle enthält die Operatoren, die alle Merge-Option-Modi, unterliegen den angegebenen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="5daad-130">The following table lists the operators that support all merge option modes, subject to the specified restrictions.</span></span>  
  
|<span data-ttu-id="5daad-131">Operator</span><span class="sxs-lookup"><span data-stu-id="5daad-131">Operator</span></span>|<span data-ttu-id="5daad-132">Beschränkungen</span><span class="sxs-lookup"><span data-stu-id="5daad-132">Restrictions</span></span>|  
|--------------|------------------|  
|<xref:System.Linq.ParallelEnumerable.AsEnumerable%2A>|<span data-ttu-id="5daad-133">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-133">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Cast%2A>|<span data-ttu-id="5daad-134">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-134">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Concat%2A>|<span data-ttu-id="5daad-135">Nicht geordnete Abfragen, die nur eine Array- oder Listenelemente Datenquelle verfügen.</span><span class="sxs-lookup"><span data-stu-id="5daad-135">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.DefaultIfEmpty%2A>|<span data-ttu-id="5daad-136">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-136">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.OfType%2A>|<span data-ttu-id="5daad-137">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-137">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Reverse%2A>|<span data-ttu-id="5daad-138">Nicht geordnete Abfragen, die nur eine Array- oder Listenelemente Datenquelle verfügen.</span><span class="sxs-lookup"><span data-stu-id="5daad-138">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Select%2A>|<span data-ttu-id="5daad-139">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-139">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.SelectMany%2A>|<span data-ttu-id="5daad-140">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-140">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Skip%2A>|<span data-ttu-id="5daad-141">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-141">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Take%2A>|<span data-ttu-id="5daad-142">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-142">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Where%2A>|<span data-ttu-id="5daad-143">Keine</span><span class="sxs-lookup"><span data-stu-id="5daad-143">None</span></span>|  
  
 <span data-ttu-id="5daad-144">Alle anderen PLINQ-Abfrageoperatoren möglicherweise vom Benutzer bereitgestellte Zusammenführungsoptionen ignorieren.</span><span class="sxs-lookup"><span data-stu-id="5daad-144">All other PLINQ query operators might ignore user-provided merge options.</span></span> <span data-ttu-id="5daad-145">Einige Abfrageoperatoren, z. B. <xref:System.Linq.ParallelEnumerable.Reverse%2A> und <xref:System.Linq.ParallelEnumerable.OrderBy%2A>, alle Elemente können nicht ausgegeben werden, bis erzeugt und neu angeordnet wurden.</span><span class="sxs-lookup"><span data-stu-id="5daad-145">Some query operators, for example, <xref:System.Linq.ParallelEnumerable.Reverse%2A> and <xref:System.Linq.ParallelEnumerable.OrderBy%2A>, cannot yield any elements until all have been produced and reordered.</span></span> <span data-ttu-id="5daad-146">Aus diesem Grund, dass bei <xref:System.Linq.ParallelMergeOptions> wird verwendet, in einer Abfrage, die einen Operator wie z. B. auch enthält <xref:System.Linq.ParallelEnumerable.Reverse%2A>, das Verhalten der Merge werden nicht in der Abfrage erst angewendet, nachdem dieser Operator Ergebnisse erzeugt hat.</span><span class="sxs-lookup"><span data-stu-id="5daad-146">Therefore, when <xref:System.Linq.ParallelMergeOptions> is used in a query that also contains an operator such as <xref:System.Linq.ParallelEnumerable.Reverse%2A>, the merge behavior will not be applied in the query until after that operator has produced its results.</span></span>  
  
 <span data-ttu-id="5daad-147">Die Fähigkeit einiger Operatoren, Zusammenführungsoptionen verarbeiten hängt vom Typ der Quellsequenz, und gibt an, ob die <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> Operator weiter oben in der Abfrage verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="5daad-147">The ability of some operators to handle merge options depends on the type of the source sequence, and whether the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator was used earlier in the query.</span></span> <span data-ttu-id="5daad-148"><xref:System.Linq.ParallelEnumerable.ForAll%2A>ist immer <xref:System.Linq.ParallelMergeOptions.NotBuffered> ; er seine Elemente sofort ergibt.</span><span class="sxs-lookup"><span data-stu-id="5daad-148"><xref:System.Linq.ParallelEnumerable.ForAll%2A> is always <xref:System.Linq.ParallelMergeOptions.NotBuffered> ; it yields its elements immediately.</span></span> <span data-ttu-id="5daad-149"><xref:System.Linq.ParallelEnumerable.OrderBy%2A>ist immer <xref:System.Linq.ParallelMergeOptions.FullyBuffered>; es muss die gesamte Liste sortieren, bevor es ergibt.</span><span class="sxs-lookup"><span data-stu-id="5daad-149"><xref:System.Linq.ParallelEnumerable.OrderBy%2A> is always <xref:System.Linq.ParallelMergeOptions.FullyBuffered>; it must sort the whole list before it yields.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5daad-150">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="5daad-150">See Also</span></span>  
 [<span data-ttu-id="5daad-151">Parallel LINQ (PLINQ) (Paralleles LINQ (PLINQ))</span><span class="sxs-lookup"><span data-stu-id="5daad-151">Parallel LINQ (PLINQ)</span></span>](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)  
 [<span data-ttu-id="5daad-152">Gewusst wie: Angeben von Mergeoptionen in PLINQ</span><span class="sxs-lookup"><span data-stu-id="5daad-152">How to: Specify Merge Options in PLINQ</span></span>](../../../docs/standard/parallel-programming/how-to-specify-merge-options-in-plinq.md)
