---
title: SpinWait
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: synchronization primitives, SpinWait
ms.assetid: 36012f42-34e5-4f86-adf4-973f433ed6c6
caps.latest.revision: "9"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: cfaf85c0fe1de3be89618ae540e9c183b66a11eb
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2017
---
# <a name="spinwait"></a><span data-ttu-id="b2f13-102">SpinWait</span><span class="sxs-lookup"><span data-stu-id="b2f13-102">SpinWait</span></span>
<span data-ttu-id="b2f13-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType>ist ein einfacher Synchronisierungstyp, den Sie in der Low-Level-Szenarien verwenden können, um zu vermeiden, die teure Kontextwechsel und Kernelübergänge, die für Kernelereignisse erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="b2f13-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType> is a lightweight synchronization type that you can use in low-level scenarios to avoid the expensive context switches and kernel transitions that are required for kernel events.</span></span> <span data-ttu-id="b2f13-104">Multicore-Computer Wenn eine Ressource nicht erwartungsgemäß für längere Zeit aufrechterhalten werden kann es effizienter sein für einen wartenden Thread im Benutzermodus für ein paar Dutzend oder wenigen Hundert Zyklen zu starten, und wiederholen Sie dann zum Abrufen der Ressourcenanbieters.</span><span class="sxs-lookup"><span data-stu-id="b2f13-104">On multicore computers, when a resource is not expected to be held for long periods of time, it can be more efficient for a waiting thread to spin in user mode for a few dozen or a few hundred cycles, and then retry to acquire the resource.</span></span> <span data-ttu-id="b2f13-105">Wenn die Ressource nach Spinvorgänge verfügbar ist, haben Sie mehrere Tausend Zyklen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b2f13-105">If the resource is available after spinning, then you have saved several thousand cycles.</span></span> <span data-ttu-id="b2f13-106">Wenn die Ressource immer noch nicht verfügbar ist, dann haben nur wenige Zyklen verbracht und weiterhin eine kernelbasierten Wartevorgangs eingeben.</span><span class="sxs-lookup"><span data-stu-id="b2f13-106">If the resource is still not available, then you have spent only a few cycles and can still enter a kernel-based wait.</span></span> <span data-ttu-id="b2f13-107">Diese Kombination Spinvorgänge dann wartenden wird manchmal als bezeichnet eine *zweiphasigen "Wait"-Vorgang*.</span><span class="sxs-lookup"><span data-stu-id="b2f13-107">This spinning-then-waiting combination is sometimes referred to as a *two-phase wait operation*.</span></span>  
  
 <span data-ttu-id="b2f13-108"><xref:System.Threading.SpinWait>Dient in Verbindung mit .NET Framework-Typen verwendet werden, die Kernelereignisse, z. B. umschließen <xref:System.Threading.ManualResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="b2f13-108"><xref:System.Threading.SpinWait> is designed to be used in conjunction with the .NET Framework types that wrap kernel events such as <xref:System.Threading.ManualResetEvent>.</span></span> <span data-ttu-id="b2f13-109"><xref:System.Threading.SpinWait>kann auch eigenständig für grundlegende Spinvorgänge-Funktionalität in nur einem Programm verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="b2f13-109"><xref:System.Threading.SpinWait> can also be used by itself for basic spinning functionality in just one program.</span></span>  
  
 <span data-ttu-id="b2f13-110"><xref:System.Threading.SpinWait>ist mehr als nur eine leere Schleife an.</span><span class="sxs-lookup"><span data-stu-id="b2f13-110"><xref:System.Threading.SpinWait> is more than just an empty loop.</span></span> <span data-ttu-id="b2f13-111">Wird sorgfältig implementiert, um die richtige Spinvorgänge Verhalten für die allgemeine Groß-/Kleinschreibung bereitzustellen, und selbst gestartet Kontextwechsel vorkommen, wenn es einen ausreichend langen Zeitraum stößt (ungefähr die Zeitdauer für einen Kernelübergang erforderlich).</span><span class="sxs-lookup"><span data-stu-id="b2f13-111">It is carefully implemented to provide correct spinning behavior for the general case, and will itself initiate context switches if it spins long enough (roughly the length of time required for a kernel transition).</span></span> <span data-ttu-id="b2f13-112">Z. B. auf Single-Core-Computer <xref:System.Threading.SpinWait> ergibt die Zeitscheibe des Threads sofort verwendet werden, da sich drehenden Blöcke Status für alle Threads weiterleiten.</span><span class="sxs-lookup"><span data-stu-id="b2f13-112">For example, on single-core computers, <xref:System.Threading.SpinWait> yields the time slice of the thread immediately because spinning blocks forward progress on all threads.</span></span> <span data-ttu-id="b2f13-113"><xref:System.Threading.SpinWait>sogar auf einem Computer mit mehreren Kernen, um zu verhindern, dass den wartende Thread blockierende Threads mit höherer Priorität oder den Garbage Collector auch ergibt.</span><span class="sxs-lookup"><span data-stu-id="b2f13-113"><xref:System.Threading.SpinWait> also yields even on multi-core machines to prevent the waiting thread from blocking higher-priority threads or the garbage collector.</span></span> <span data-ttu-id="b2f13-114">Aus diesem Grund bei Verwendung einer <xref:System.Threading.SpinWait> in einem Vorgang Wartevorgängen wird empfohlen, dass Sie die Kernel-Wartezeit vor dem Aufrufen der <xref:System.Threading.SpinWait> selbst einen Kontextwechsel initiiert.</span><span class="sxs-lookup"><span data-stu-id="b2f13-114">Therefore, if you are using a <xref:System.Threading.SpinWait> in a two-phase wait operation, we recommend that you invoke the kernel wait before the <xref:System.Threading.SpinWait> itself initiates a context switch.</span></span> <span data-ttu-id="b2f13-115"><xref:System.Threading.SpinWait>Stellt die <xref:System.Threading.SpinWait.NextSpinWillYield%2A> -Eigenschaft, die Sie, bevor jedem Aufruf von überprüfen können <xref:System.Threading.SpinWait.SpinOnce%2A>.</span><span class="sxs-lookup"><span data-stu-id="b2f13-115"><xref:System.Threading.SpinWait> provides the <xref:System.Threading.SpinWait.NextSpinWillYield%2A> property, which you can check before every call to <xref:System.Threading.SpinWait.SpinOnce%2A>.</span></span> <span data-ttu-id="b2f13-116">Wenn die Eigenschaft zurückgibt `true`, eigene "Wait"-Vorgang zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="b2f13-116">When the property returns `true`, initiate your own Wait operation.</span></span> <span data-ttu-id="b2f13-117">Ein Beispiel finden Sie unter [Vorgehensweise: SpinWait verwenden, um einen zwei-Phasen-Vorgang warten implementieren](../../../docs/standard/threading/how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span><span class="sxs-lookup"><span data-stu-id="b2f13-117">For an example, see [How to: Use SpinWait to Implement a Two-Phase Wait Operation](../../../docs/standard/threading/how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span></span>  
  
 <span data-ttu-id="b2f13-118">Wenn Sie eine zwei-Phasen "Wait"-Vorgang nicht ausführen, aber einfach drehen sind, bis eine Bedingung wahr ist, können Sie aktivieren <xref:System.Threading.SpinWait> auszuführenden seines Kontexts wechselt, damit es eine gute Bürger in der Windows-Umgebung ist.</span><span class="sxs-lookup"><span data-stu-id="b2f13-118">If you are not performing a two-phase wait operation but are just spinning until some condition is true, you can enable <xref:System.Threading.SpinWait> to perform its context switches so that it is a good citizen in the Windows operating system environment.</span></span> <span data-ttu-id="b2f13-119">Das folgende grundlegende Beispiel zeigt eine <xref:System.Threading.SpinWait> in einem Stapel sperrenfreie.</span><span class="sxs-lookup"><span data-stu-id="b2f13-119">The following basic example shows a <xref:System.Threading.SpinWait> in a lock-free stack.</span></span> <span data-ttu-id="b2f13-120">Wenn Sie einen hohe Leistung, threadsicheren Stapel benötigen, erwägen Sie <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b2f13-120">If you require a high-performance, thread-safe stack, consider using <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[CDS_SpinWait#05](../../../samples/snippets/csharp/VS_Snippets_Misc/cds_spinwait/cs/spinwait.cs#05)]
 [!code-vb[CDS_SpinWait#05](../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_spinwait/vb/cds_spinwait1.vb#05)]  
  
## <a name="see-also"></a><span data-ttu-id="b2f13-121">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="b2f13-121">See Also</span></span>  
 <xref:System.Threading.Thread.SpinWait%2A>  
 [<span data-ttu-id="b2f13-122">Threading Objects and Features (Threadingobjekte und -funktionen)</span><span class="sxs-lookup"><span data-stu-id="b2f13-122">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)
