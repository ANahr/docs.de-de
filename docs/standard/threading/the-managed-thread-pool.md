---
title: Verwalteter Threadpool
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- thread pooling [.NET Framework]
- thread pools [.NET Framework]
- threading [.NET Framework], thread pool
- threading [.NET Framework], pooling
ms.assetid: 2be05b06-a42e-4c9d-a739-96c21d673927
caps.latest.revision: "24"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 38032fccce1a8f6f7cbcb3bbd3d3f9d008a74141
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2017
---
# <a name="the-managed-thread-pool"></a><span data-ttu-id="f8fbd-102">Verwalteter Threadpool</span><span class="sxs-lookup"><span data-stu-id="f8fbd-102">The Managed Thread Pool</span></span>
<span data-ttu-id="f8fbd-103">Die <xref:System.Threading.ThreadPool>-Klasse stellt einer Anwendung einen Pool von Arbeitsthreads bereit, die vom System verwaltet werden und Ihnen die Möglichkeit bieten, sich mehr auf Anwendungsaufgaben als auf die Threadverwaltung zu konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-103">The <xref:System.Threading.ThreadPool> class provides your application with a pool of worker threads that are managed by the system, allowing you to concentrate on application tasks rather than thread management.</span></span> <span data-ttu-id="f8fbd-104">Für kurze Aufgaben, bei denen Hintergrundverarbeitung erforderlich ist, bietet sich der verwaltete Threadpool als einfache Lösung für den Umgang mit mehreren Threads an.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-104">If you have short tasks that require background processing, the managed thread pool is an easy way to take advantage of multiple threads.</span></span> <span data-ttu-id="f8fbd-105">Zum Beispiel können Sie, beginnend mit [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], <xref:System.Threading.Tasks.Task>- und <xref:System.Threading.Tasks.Task%601>-Objekte erstellen, die asynchrone Aufgaben in Threads im Threadpool ausführen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-105">For example, beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] you can create <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects, which perform asynchronous tasks on thread pool threads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f8fbd-106">In [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)] wurde der Durchsatz des Threadpools in drei wichtigen Bereichen, die in früheren Versionen von [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] als Engpässe galten, deutlich gesteigert: Einfügen von Aufgaben in die Warteschlange, Weiterleitung von Threads im Threadpool und Weiterleitung von E/A-Abschlussthreads.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-106">Starting with the [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], the throughput of the thread pool is significantly improved in three key areas that were identified as bottlenecks in previous releases of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: queuing tasks, dispatching thread pool threads, and dispatching I/O completion threads.</span></span> <span data-ttu-id="f8fbd-107">Zur Verwendung dieser Funktionen sollte die Anwendung für [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] oder höher ausgelegt sein. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-107">To use this functionality, your application should target the [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] or later.</span></span>  
  
 <span data-ttu-id="f8fbd-108">In .NET Framework 2.0 steht für Hintergrundaufgaben, die mit der Benutzeroberfläche interagieren, auch die <xref:System.ComponentModel.BackgroundWorker>-Klasse zur Verfügung, die mithilfe von Ereignissen kommuniziert, die für den Benutzeroberflächenthread ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-108">For background tasks that interact with the user interface, the .NET Framework version 2.0 also provides the <xref:System.ComponentModel.BackgroundWorker> class, which communicates using events raised on the user interface thread.</span></span>  
  
 <span data-ttu-id="f8fbd-109">Threadpoolthreads werden in .NET Framework zu verschiedenen Zwecken eingesetzt, z. B. für asynchrone E/A-Komplettierung, Timerrückrufe, registrierte Wartevorgänge, asynchrone Methodenaufrufe mithilfe von Delegaten und <xref:System.Net>-Socketverbindungen. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-109">The .NET Framework uses thread pool threads for many purposes, including asynchronous I/O completion, timer callbacks, registered wait operations, asynchronous method calls using delegates, and <xref:System.Net> socket connections.</span></span>  
  
## <a name="when-not-to-use-thread-pool-threads"></a><span data-ttu-id="f8fbd-110">Gründe, die gegen die Verwendung von Threadpools sprechen</span><span class="sxs-lookup"><span data-stu-id="f8fbd-110">When Not to Use Thread Pool Threads</span></span>  
 <span data-ttu-id="f8fbd-111">In einigen Szenarien ist die Erstellung und Verwaltung eigener Threads der Verwendung von Threadpoolthreads vorzuziehen:</span><span class="sxs-lookup"><span data-stu-id="f8fbd-111">There are several scenarios in which it is appropriate to create and manage your own threads instead of using thread pool threads:</span></span>  
  
-   <span data-ttu-id="f8fbd-112">Sie benötigen einen Vordergrundthread.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-112">You require a foreground thread.</span></span>  
  
-   <span data-ttu-id="f8fbd-113">Sie benötigen einen Thread mit einer bestimmten Priorität.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-113">You require a thread to have a particular priority.</span></span>  
  
-   <span data-ttu-id="f8fbd-114">Es gibt Aufgaben, die den Thread über einen längeren Zeitraum blockieren.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-114">You have tasks that cause the thread to block for long periods of time.</span></span> <span data-ttu-id="f8fbd-115">Da die Anzahl der Threads im Threadpool begrenzt ist, kann eine hohe Anzahl blockierter Threadpoolthreads das Starten von Aufgaben verhindern.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-115">The thread pool has a maximum number of threads, so a large number of blocked thread pool threads might prevent tasks from starting.</span></span>  
  
-   <span data-ttu-id="f8fbd-116">Sie müssen Threads in ein Singlethread-Apartment einfügen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-116">You need to place threads into a single-threaded apartment.</span></span> <span data-ttu-id="f8fbd-117">Alle <xref:System.Threading.ThreadPool>-Threads befinden sich im Multithread-Apartment.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-117">All <xref:System.Threading.ThreadPool> threads are in the multithreaded apartment.</span></span>  
  
-   <span data-ttu-id="f8fbd-118">Dem Thread muss eine stabile Identität zugeordnet werden, oder ein Thread soll einer Aufgabe zugeordnet werden. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-118">You need to have a stable identity associated with the thread, or to dedicate a thread to a task.</span></span>  
  
## <a name="thread-pool-characteristics"></a><span data-ttu-id="f8fbd-119">Eigenschaften von Threadpools</span><span class="sxs-lookup"><span data-stu-id="f8fbd-119">Thread Pool Characteristics</span></span>  
 <span data-ttu-id="f8fbd-120">Threadpoolthreads sind Hintergrundthreads.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-120">Thread pool threads are background threads.</span></span> <span data-ttu-id="f8fbd-121">Finden Sie unter [Vordergrund- und Hintergrundthreads](../../../docs/standard/threading/foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="f8fbd-121">See [Foreground and Background Threads](../../../docs/standard/threading/foreground-and-background-threads.md).</span></span> <span data-ttu-id="f8fbd-122">Jeder Thread verwendet die standardmäßige Stapelgröße, wird mit Standardpriorität ausgeführt und befindet sich im Multithread-Apartment.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-122">Each thread uses the default stack size, runs at the default priority, and is in the multithreaded apartment.</span></span>  
  
 <span data-ttu-id="f8fbd-123">Pro Prozess gibt es nur einen Threadpool.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-123">There is only one thread pool per process.</span></span>  
  
### <a name="exceptions-in-thread-pool-threads"></a><span data-ttu-id="f8fbd-124">Ausnahmen in Threadpoolthreads</span><span class="sxs-lookup"><span data-stu-id="f8fbd-124">Exceptions in Thread Pool Threads</span></span>  
 <span data-ttu-id="f8fbd-125">Nicht behandelte Ausnahmen in Threadpoolthreads beenden den Prozess.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-125">Unhandled exceptions on thread pool threads terminate the process.</span></span> <span data-ttu-id="f8fbd-126">Für diese Regel gelten jedoch die folgenden drei Ausnahmen:</span><span class="sxs-lookup"><span data-stu-id="f8fbd-126">There are three exceptions to this rule:</span></span>  
  
-   <span data-ttu-id="f8fbd-127">In einem Threadpoolthread wird eine <xref:System.Threading.ThreadAbortException> ausgelöst, da <xref:System.Threading.Thread.Abort%2A> aufgerufen wurde. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-127">A <xref:System.Threading.ThreadAbortException> is thrown in a thread pool thread, because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
-   <span data-ttu-id="f8fbd-128">In einem Threadpoolthread wird eine <xref:System.AppDomainUnloadedException> ausgelöst, da die Anwendungsdomäne entladen wird.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-128">An <xref:System.AppDomainUnloadedException> is thrown in a thread pool thread, because the application domain is being unloaded.</span></span>  
  
-   <span data-ttu-id="f8fbd-129">Der Prozess wurde durch die Common Language Runtime oder einen Hostprozess beendet.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-129">The common language runtime or a host process terminates the thread.</span></span>  
  
 <span data-ttu-id="f8fbd-130">Weitere Informationen finden Sie unter [Ausnahmen in verwalteten Threads](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="f8fbd-130">For more information, see [Exceptions in Managed Threads](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f8fbd-131">In den .NET Framework-Versionen 1.0 und 1.1 erfasst die Common Language Runtime automatisch nicht behandelte Ausnahmen in Threadpoolthreads.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-131">In the .NET Framework versions 1.0 and 1.1, the common language runtime silently traps unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="f8fbd-132">Dies kann den Anwendungszustand beschädigen und dazu führen, dass die Anwendung nicht mehr reagiert. Das Debuggen kann erhebliche Schwierigkeiten bereiten.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-132">This might corrupt application state and eventually cause applications to hang, which might be very difficult to debug.</span></span>  
  
### <a name="maximum-number-of-thread-pool-threads"></a><span data-ttu-id="f8fbd-133">Maximale Anzahl von Threads im Threadpool</span><span class="sxs-lookup"><span data-stu-id="f8fbd-133">Maximum Number of Thread Pool Threads</span></span>  
 <span data-ttu-id="f8fbd-134">Die Anzahl von Vorgängen, die für den Threadpool in die Warteschlange aufgenommen werden, ist zwar nur durch den verfügbaren Speicher begrenzt, der Threadpool kann jedoch nur eine bestimmte Anzahl von Threads enthalten, die gleichzeitig im Prozess aktiv sind.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-134">The number of operations that can be queued to the thread pool is limited only by available memory; however, the thread pool limits the number of threads that can be active in the process simultaneously.</span></span> <span data-ttu-id="f8fbd-135">Ab [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] ist die Standardgröße des Threadpools für einen Prozess von mehreren Faktoren abhängig, z. B. von der Größe des virtuellen Adressraums.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-135">Beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], the default size of the thread pool for a process depends on several factors, such as the size of the virtual address space.</span></span> <span data-ttu-id="f8fbd-136">Ein Prozess kann die <xref:System.Threading.ThreadPool.GetMaxThreads%2A>-Methode aufrufen, um die Anzahl der Threads zu bestimmen. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-136">A process can call the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> method to determine the number of threads.</span></span>  
  
 <span data-ttu-id="f8fbd-137">Sie können die maximale Anzahl von Threads mithilfe der <xref:System.Threading.ThreadPool.GetMaxThreads%2A>-Methode und der <xref:System.Threading.ThreadPool.SetMaxThreads%2A>-Methode steuern. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-137">You can control the maximum number of threads by using the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> and <xref:System.Threading.ThreadPool.SetMaxThreads%2A> methods.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f8fbd-138">In den .NET Framework-Versionen 1.0 und 1.1 kann die Größe des Threadpools nicht über verwalteten Code festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-138">In the .NET Framework versions 1.0 and 1.1, the size of the thread pool cannot be set from managed code.</span></span> <span data-ttu-id="f8fbd-139">Code, der die Common Language Runtime hostet, kann die Größe anhand von `CorSetMaxThreads` festlegen, das in mscoree.h definiert wird.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-139">Code that hosts the common language runtime can set the size using `CorSetMaxThreads`, defined in mscoree.h.</span></span>  
  
### <a name="thread-pool-minimums"></a><span data-ttu-id="f8fbd-140">Threadpoolmindestwerte</span><span class="sxs-lookup"><span data-stu-id="f8fbd-140">Thread Pool Minimums</span></span>  
 <span data-ttu-id="f8fbd-141">Der Threadpool stellt bei Bedarf neue Arbeitsthreads oder E/A-Abschlussthreads bereit, bis ein angegebener Mindestwert für jede Kategorie erreicht ist.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-141">The thread pool provides new worker threads or I/O completion threads on demand until it reaches a specified minimum for each category.</span></span> <span data-ttu-id="f8fbd-142">Sie können die <xref:System.Threading.ThreadPool.GetMinThreads%2A>-Methode verwenden, um diese Mindestwerte abzurufen. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-142">You can use the <xref:System.Threading.ThreadPool.GetMinThreads%2A> method to obtain these minimum values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f8fbd-143">Wenn die Anforderungen niedrig sind, kann die tatsächliche Anzahl der Threads im Threadpool unterhalb der Mindestwerte liegen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-143">When demand is low, the actual number of thread pool threads can fall below the minimum values.</span></span>  
  
 <span data-ttu-id="f8fbd-144">Wenn ein Minimum erreicht wird, kann der Threadpool weitere Threads erstellen oder warten, bis einige Aufgaben abgeschlossen sind.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-144">When a minimum is reached, the thread pool can create additional threads or wait until some tasks complete.</span></span> <span data-ttu-id="f8fbd-145">Ab [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] erstellt und zerstört der Threadpool Arbeitsthreads, um den Durchsatz zu optimieren. Der Durchsatz ist als die Anzahl der Aufgaben definiert, die pro Zeiteinheit abgeschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-145">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the thread pool creates and destroys worker threads in order to optimize throughput, which is defined as the number of tasks that complete per unit of time.</span></span> <span data-ttu-id="f8fbd-146">Bei zu wenigen Threads werden die verfügbaren Ressourcen möglicherweise nicht optimal genutzt, wohingegen bei zu vielen Threads Ressourcenkonflikte auftreten können. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-146">Too few threads might not make optimal use of available resources, whereas too many threads could increase resource contention.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="f8fbd-147">Sie können die <xref:System.Threading.ThreadPool.SetMinThreads%2A>-Methode verwenden, um die Mindestanzahl an Threads im Leerlauf zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-147">You can use the <xref:System.Threading.ThreadPool.SetMinThreads%2A> method to increase the minimum number of idle threads.</span></span> <span data-ttu-id="f8fbd-148">Allerdings kann ein unnötiges Erhöhen dieses Wertes zu Leistungsproblemen führen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-148">However, unnecessarily increasing these values can cause performance problems.</span></span> <span data-ttu-id="f8fbd-149">Wenn zu viele Aufgaben gleichzeitig gestartet werden, werden möglicherweise alle Aufgaben zu langsam ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-149">If too many tasks start at the same time, all of them might appear to be slow.</span></span> <span data-ttu-id="f8fbd-150">In den meisten Fällen erreicht der Threadpool mit dem eigenen Algorithmus für die Zuordnung von Threads eine bessere Leistung.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-150">In most cases the thread pool will perform better with its own algorithm for allocating threads.</span></span>  
  
## <a name="skipping-security-checks"></a><span data-ttu-id="f8fbd-151">Überschreiben von Sicherheitsüberprüfungen</span><span class="sxs-lookup"><span data-stu-id="f8fbd-151">Skipping Security Checks</span></span>  
 <span data-ttu-id="f8fbd-152">Der Threadpool stellt auch die <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType>-Methode und die <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType>-Methode bereit.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-152">The thread pool also provides the <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> and <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="f8fbd-153">Verwenden Sie diese Methoden nur, wenn Sie sicher sind, dass der Stapel des Aufrufers irrelevant für die Sicherheitsüberprüfungen ist, die während der Ausführung der in der Warteschlange stehenden Aufgabe stattfinden.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-153">Use these methods only when you are certain that the caller's stack is irrelevant to any security checks performed during the execution of the queued task.</span></span> <span data-ttu-id="f8fbd-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A>und <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> erfassen beide den Stapel des Aufrufers, der mit dem Stapel des Threadpoolthreads zusammengeführt wird, wenn der Thread beginnt, eine Aufgabe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> and <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> both capture the caller's stack, which is merged into the stack of the thread pool thread when the thread begins to execute a task.</span></span> <span data-ttu-id="f8fbd-155">Wenn eine Sicherheitsüberprüfung erforderlich ist, muss der gesamte Stapel überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-155">If a security check is required, the entire stack must be checked.</span></span> <span data-ttu-id="f8fbd-156">Obwohl die Überprüfung Sicherheit gewährleistet, wird dadurch auch die Leistung beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-156">Although the check provides safety, it also has a performance cost.</span></span>  
  
## <a name="using-the-thread-pool"></a><span data-ttu-id="f8fbd-157">Verwenden des Threadpools</span><span class="sxs-lookup"><span data-stu-id="f8fbd-157">Using the Thread Pool</span></span>  
 <span data-ttu-id="f8fbd-158">Beginnend mit der [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], der Threadpool am einfachsten ist die Verwendung der [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="f8fbd-158">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the easiest way to use the thread pool is to use the [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span></span> <span data-ttu-id="f8fbd-159">Standardmäßig verwenden parallele Bibliothekstypen wie <xref:System.Threading.Tasks.Task> und <xref:System.Threading.Tasks.Task%601> Threadpoolthreads, um Aufgaben auszuführen.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-159">By default, parallel library types like <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> use thread pool threads to run tasks.</span></span> <span data-ttu-id="f8fbd-160">Sie können den Threadpool auch verwenden, indem Sie in verwaltetem Code <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> aufrufen (oder `CorQueueUserWorkItem` in nicht verwaltetem Code) und einen <xref:System.Threading.WaitCallback>-Delegaten übergeben, der die Methode darstellt, die die Aufgabe ausführt.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-160">You can also use the thread pool by calling <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> from managed code (or `CorQueueUserWorkItem` from unmanaged code) and passing a <xref:System.Threading.WaitCallback> delegate representing the method that performs the task.</span></span> <span data-ttu-id="f8fbd-161">Eine andere Möglichkeit, den Threadpool zu verwenden, ist, Arbeitsaufgaben, die mit einem Wartevorgang verknüpft sind, mit der <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType>-Methode in die Warteschlange zu stellen und ein <xref:System.Threading.WaitHandle> zu übergeben, das bei einer Signalisierung oder einem Timeout die Methode aufruft, die vom <xref:System.Threading.WaitOrTimerCallback>-Delegaten dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-161">Another way to use the thread pool is to queue work items that are related to a wait operation by using the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method and passing a <xref:System.Threading.WaitHandle> that, when signaled or when timed out, calls the method represented by the <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span> <span data-ttu-id="f8fbd-162">Threadpoolthreads werden zum Aufrufen von Rückrufmethoden verwendet. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-162">Thread pool threads are used to invoke callback methods.</span></span>  
  
## <a name="threadpool-examples"></a><span data-ttu-id="f8fbd-163">Threadpool-Beispiele</span><span class="sxs-lookup"><span data-stu-id="f8fbd-163">ThreadPool Examples</span></span>  
 <span data-ttu-id="f8fbd-164">Die Codebeispiele in diesem Abschnitt veranschaulichen den Threadpool bei Verwendung der <xref:System.Threading.Tasks.Task>-Klasse, der <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType>-Methode und der <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType>-Methode. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-164">The code examples in this section demonstrate the thread pool by using the <xref:System.Threading.Tasks.Task> class, the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> method, and the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method.</span></span>  
  
-   [<span data-ttu-id="f8fbd-165">Ausführen von asynchronen Aufgaben mit der Task Parallel Library</span><span class="sxs-lookup"><span data-stu-id="f8fbd-165">Executing Asynchronous Tasks with the Task Parallel Library</span></span>](#TaskParallelLibrary)  
  
-   [<span data-ttu-id="f8fbd-166">Ausführen von Code mit "QueueUserWorkItem"</span><span class="sxs-lookup"><span data-stu-id="f8fbd-166">Executing Code Asynchronously with QueueUserWorkItem</span></span>](#ExecuteCodeWithQUWI)  
  
-   [<span data-ttu-id="f8fbd-167">Bereitstellen von Aufgabendaten für "QueueUserWorkItem"</span><span class="sxs-lookup"><span data-stu-id="f8fbd-167">Supplying Task Data for QueueUserWorkItem</span></span>](#TaskDataForQUWI)  
  
-   [<span data-ttu-id="f8fbd-168">Verwenden von RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="f8fbd-168">Using RegisterWaitForSingleObject</span></span>](#RegisterWaitForSingleObject)  
  
<a name="TaskParallelLibrary"></a>   
### <a name="executing-asynchronous-tasks-with-the-task-parallel-library"></a><span data-ttu-id="f8fbd-169">Ausführen von asynchronen Aufgaben mit der Task Parallel Library</span><span class="sxs-lookup"><span data-stu-id="f8fbd-169">Executing Asynchronous Tasks with the Task Parallel Library</span></span>  
 <span data-ttu-id="f8fbd-170">Im folgenden Beispiel wird veranschaulicht, wie mit einem Aufruf der <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType>-Methode ein <xref:System.Threading.Tasks.Task>-Objekt erstellt und verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-170">The following example shows how to create and use a <xref:System.Threading.Tasks.Task> object by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="f8fbd-171">Ein Beispiel, verwendet der <xref:System.Threading.Tasks.Task%601> Klasse, um einen Wert aus einer asynchronen Aufgabe zurückzugeben, finden Sie unter [wie: Zurückgeben eines Werts aus einer Aufgabe](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="f8fbd-171">For an example that uses the <xref:System.Threading.Tasks.Task%601> class to return a value from an asynchronous task, see [How to: Return a Value from a Task](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span></span>  
  
 [!code-csharp[System.Threading.Tasks.Task#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.task/cs/startnew.cs#01)]
 [!code-vb[System.Threading.Tasks.Task#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.task/vb/startnew.vb#01)]  
  
<a name="ExecuteCodeWithQUWI"></a>   
### <a name="executing-code-asynchronously-with-queueuserworkitem"></a><span data-ttu-id="f8fbd-172">Asynchrones Ausführen von Code mit "QueueUserWorkItem"</span><span class="sxs-lookup"><span data-stu-id="f8fbd-172">Executing Code Asynchronously with QueueUserWorkItem</span></span>  
 <span data-ttu-id="f8fbd-173">Im folgenden Beispiel wird mithilfe der <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A>-Methode eine sehr einfache Aufgabe, die durch die `ThreadProc`-Methode dargestellt wird, in die Warteschlange eingefügt. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-173">The following example queues a very simple task, represented by the `ThreadProc` method, using the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#1](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source1.cpp#1)]
 [!code-csharp[Conceptual.ThreadPool#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source1.cs#1)]
 [!code-vb[Conceptual.ThreadPool#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source1.vb#1)]  
  
<a name="TaskDataForQUWI"></a>   
### <a name="supplying-task-data-for-queueuserworkitem"></a><span data-ttu-id="f8fbd-174">Bereitstellen von Aufgabendaten für „QueueUserWorkItem“</span><span class="sxs-lookup"><span data-stu-id="f8fbd-174">Supplying Task Data for QueueUserWorkItem</span></span>  
 <span data-ttu-id="f8fbd-175">Im folgenden Codebeispiel wird eine Aufgabe mithilfe der <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A>-Methode in die Warteschlange eingefügt, und es werden die Daten für die Aufgabe bereitgestellt. </span><span class="sxs-lookup"><span data-stu-id="f8fbd-175">The following code example uses the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method to queue a task and supply the data for the task.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#2](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source2.cpp#2)]
 [!code-csharp[Conceptual.ThreadPool#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source2.cs#2)]
 [!code-vb[Conceptual.ThreadPool#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source2.vb#2)]  
  
<a name="RegisterWaitForSingleObject"></a>   
### <a name="using-registerwaitforsingleobject"></a><span data-ttu-id="f8fbd-176">Verwenden von RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="f8fbd-176">Using RegisterWaitForSingleObject</span></span>  
 <span data-ttu-id="f8fbd-177">Im folgenden Beispiel werden verschiedene Threadingfeatures dargestellt.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-177">The following example demonstrates several threading features.</span></span>  
  
-   <span data-ttu-id="f8fbd-178">Aufnehmen einer Aufgabe in die Warteschlange mithilfe der <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A>-Methode zur Ausführung durch <xref:System.Threading.ThreadPool>-Threads.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-178">Queuing a task for execution by <xref:System.Threading.ThreadPool> threads, with the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> method.</span></span>  
  
-   <span data-ttu-id="f8fbd-179">Auslösen der Ausführung einer Aufgabe mithilfe von <xref:System.Threading.AutoResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-179">Signaling a task to execute, with <xref:System.Threading.AutoResetEvent>.</span></span> <span data-ttu-id="f8fbd-180">Finden Sie unter [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span><span class="sxs-lookup"><span data-stu-id="f8fbd-180">See [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span></span>  
  
-   <span data-ttu-id="f8fbd-181">Behandeln von Timeouts und Signalen mit einem <xref:System.Threading.WaitOrTimerCallback>-Delegaten</span><span class="sxs-lookup"><span data-stu-id="f8fbd-181">Handling both time-outs and signals with a <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span>  
  
-   <span data-ttu-id="f8fbd-182">Abbrechen einer in die Warteschlange eingefügten Aufgabe mithilfe von <xref:System.Threading.RegisteredWaitHandle>.</span><span class="sxs-lookup"><span data-stu-id="f8fbd-182">Canceling a queued task with <xref:System.Threading.RegisteredWaitHandle>.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#3](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source3.cpp#3)]
 [!code-csharp[Conceptual.ThreadPool#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source3.cs#3)]
 [!code-vb[Conceptual.ThreadPool#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source3.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="f8fbd-183">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="f8fbd-183">See Also</span></span>  
 <xref:System.Threading.ThreadPool>  
 <xref:System.Threading.Tasks.Task>  
 <xref:System.Threading.Tasks.Task%601>  
 [<span data-ttu-id="f8fbd-184">Task Parallel Library (TPL)</span><span class="sxs-lookup"><span data-stu-id="f8fbd-184">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="f8fbd-185">Task Parallel Library (TPL)</span><span class="sxs-lookup"><span data-stu-id="f8fbd-185">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="f8fbd-186">Gewusst wie: Zurückgeben eines Werts aus einer Aufgabe</span><span class="sxs-lookup"><span data-stu-id="f8fbd-186">How to: Return a Value from a Task</span></span>](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md)  
 [<span data-ttu-id="f8fbd-187">Threading Objects and Features (Threadingobjekte und -funktionen)</span><span class="sxs-lookup"><span data-stu-id="f8fbd-187">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)  
 [<span data-ttu-id="f8fbd-188">Threads and Threading (Threads und Threading)</span><span class="sxs-lookup"><span data-stu-id="f8fbd-188">Threads and Threading</span></span>](../../../docs/standard/threading/threads-and-threading.md)  
 [<span data-ttu-id="f8fbd-189">Asynchrone Datei-E/A</span><span class="sxs-lookup"><span data-stu-id="f8fbd-189">Asynchronous File I/O</span></span>](../../../docs/standard/io/asynchronous-file-i-o.md)  
 [<span data-ttu-id="f8fbd-190">Timer</span><span class="sxs-lookup"><span data-stu-id="f8fbd-190">Timers</span></span>](../../../docs/standard/threading/timers.md)
