---
title: Allgemeine Web-Anwendungsarchitektur
description: Innovative Webanwendungen mit ASP.NET Core und Microsoft Azure konzipiert | Allgemeine Web-Anwendungsarchitektur
author: ardalis
ms.author: wiwagn
ms.date: 10/06/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: dc5580d38ac29a5e923a4b7d84f9d7e077d5cdb2
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/23/2017
---
#<a name="common-web-application-architectures"></a><span data-ttu-id="0aa5e-103">Allgemeine Web-Anwendungsarchitektur</span><span class="sxs-lookup"><span data-stu-id="0aa5e-103">Common Web Application Architectures</span></span>

> <span data-ttu-id="0aa5e-104">"Wenn Sie, dass guten Architektur aufwändig ist glauben, wiederholen Sie den fehlerhaften Architektur."</span><span class="sxs-lookup"><span data-stu-id="0aa5e-104">"If you think good architecture is expensive, try bad architecture."</span></span>  
> <span data-ttu-id="0aa5e-105">_-Brian Agenturen Foote und Joseph Yoder_</span><span class="sxs-lookup"><span data-stu-id="0aa5e-105">_- Brian Foote and Joseph Yoder_</span></span>

## <a name="summary"></a><span data-ttu-id="0aa5e-106">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="0aa5e-106">Summary</span></span>

<span data-ttu-id="0aa5e-107">Den meisten herkömmliche-.NET-Anwendungen bereitgestellt werden als einzelne Einheiten, die für eine ausführbare Datei oder eine einzelne Webanwendung, die in einer einzelnen IIS-Appdomain ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-107">Most traditional .NET applications are deployed as single units corresponding to an executable or a single web application running within a single IIS appdomain.</span></span> <span data-ttu-id="0aa5e-108">Dies ist das einfachste Bereitstellungsmodell und viele interne und kleinere öffentliche Anwendungen sehr gut dient.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-108">This is the simplest deployment model and serves many internal and smaller public applications very well.</span></span> <span data-ttu-id="0aa5e-109">Allerdings vorteilhaft, selbst wenn dieser Einheit der Bereitstellung, die meisten nicht-trivialen Geschäftsanwendungen eine logische Trennung in mehreren Ebenen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-109">However, even given this single unit of deployment, most non-trivial business applications benefit from some logical separation into several layers.</span></span>

## <a name="what-is-a-monolithic-application"></a><span data-ttu-id="0aa5e-110">Was ist eine Anwendung aufgrund eines monolithischen?</span><span class="sxs-lookup"><span data-stu-id="0aa5e-110">What is a monolithic application?</span></span>

<span data-ttu-id="0aa5e-111">Eine Anwendung aufgrund eines monolithischen ist vollständig eigenständige, im Hinblick auf das Verhalten ist.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-111">A monolithic application is one that is entirely self-contained, in terms of its behavior.</span></span> <span data-ttu-id="0aa5e-112">Es möglicherweise mit anderen Diensten oder Datenspeichern im Verlauf seiner Vorgänge interagieren, aber der Kern des Verhaltens in einem eigenen Prozess ausgeführt wird, und die gesamte Anwendung in der Regel als einzelne Einheit bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-112">It may interact with other services or data stores in the course of performing its operations, but the core of its behavior runs within its own process and the entire application is typically deployed as a single unit.</span></span> <span data-ttu-id="0aa5e-113">Wenn eine solche Anwendung horizontal skalieren muss, wird die gesamte Anwendung in der Regel auf mehreren Servern oder virtuellen Computern dupliziert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-113">If such an application needs to scale horizontally, typically the entire application is duplicated across multiple servers or virtual machines.</span></span>

## <a name="all-in-one-applications"></a><span data-ttu-id="0aa5e-114">: 1-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-114">All-in-One applications</span></span>

<span data-ttu-id="0aa5e-115">Der kleinste darstellbare Zahl von Projekten für eine Anwendungsarchitektur ist eine.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-115">The smallest possible number of projects for an application architecture is one.</span></span> <span data-ttu-id="0aa5e-116">In dieser Architektur ist die gesamte Logik der Anwendung in einem einzelnen Projekt enthalten sind, in einer einzelnen Assembly kompiliert und als einzelne Einheit bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-116">In this architecture, the entire logic of the application is contained in a single project, compiled to a single assembly, and deployed as a single unit.</span></span>

<span data-ttu-id="0aa5e-117">Ein neues Projekt für ASP.NET Core beginnt, ob in Visual Studio oder über die Befehlszeile erstellt als eine einfache "all-in-One" Monolith.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-117">A new ASP.NET Core project, whether created in Visual Studio or from the command line, starts out as a simple "all-in-one" monolith.</span></span> <span data-ttu-id="0aa5e-118">Er enthält alle des Verhaltens der Anwendung, einschließlich der Präsentations-, Geschäftslogik- und Data Access-Logik.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-118">It contains all of the behavior of the application, including presentation, business, and data access logic.</span></span> <span data-ttu-id="0aa5e-119">Abbildung 5 – 1 zeigt die Dateistruktur Einzelprojekt--App.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-119">Figure 5-1 shows the file structure of a single-project app.</span></span>

<span data-ttu-id="0aa5e-120">**Abbildung 5 – 1.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-120">**Figure 5-1.**</span></span> <span data-ttu-id="0aa5e-121">Ein einzelnes Projekt ASP.NET Core-app</span><span class="sxs-lookup"><span data-stu-id="0aa5e-121">A single project ASP.NET Core app</span></span>

![](./media/image5-1.png)

<span data-ttu-id="0aa5e-122">In einem einzelnen Projekt Szenario erfolgt die Abgrenzung von Problemen durch die Verwendung von Ordnern.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-122">In a single project scenario, separation of concerns is achieved through the use of folders.</span></span> <span data-ttu-id="0aa5e-123">Die Standardvorlage enthält separate Ordner für MVC-Muster Aufgaben der Modelle, Ansichten und Controllern sowie zusätzliche Ordner für Daten und Dienste.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-123">The default template includes separate folders for MVC pattern responsibilities of Models, Views, and Controllers, as well as additional folders for Data and Services.</span></span> <span data-ttu-id="0aa5e-124">In dieser Anordnung Präsentation Details in den Ordner Views so weit wie möglich eingeschränkt sein, und Data Access-Implementierungsdetails sollte auf Klassen, die im Ordner "Daten" beibehalten beschränkt sein.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-124">In this arrangement, presentation details should be limited as much as possible to the Views folder, and data access implementation details should be limited to classes kept in the Data folder.</span></span> <span data-ttu-id="0aa5e-125">Geschäftslogik muss sich im Dienste und Klassen im Ordner Models befinden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-125">Business logic should reside in services and classes within the Models folder.</span></span>

<span data-ttu-id="0aa5e-126">Die monolithische Einzelprojekt--Lösung umfasst einige Nachteile, zwar einfach.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-126">Although simple, the single-project monolithic solution has some disadvantages.</span></span> <span data-ttu-id="0aa5e-127">Mit zunehmender Größe und Komplexität des Projekts wird die Anzahl der Dateien und Ordner sowie vergrößert werden fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-127">As the project's size and complexity grows, the number of files and folders will continue to grow as well.</span></span> <span data-ttu-id="0aa5e-128">UI-Probleme (Modelle, Ansichten, Controller) befinden sich in mehrere Ordner, in denen nicht in alphabetischer Reihenfolge gruppiert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-128">UI concerns (models, views, controllers) reside in multiple folders, which are not grouped together alphabetically.</span></span> <span data-ttu-id="0aa5e-129">Dieses Problem schlimmer nur, wenn zusätzliche Konstrukte für den UI-Ebene, z. B. Filter oder ModelBinders, in die eigenen Ordner hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-129">This issue only gets worse when additional UI-level constructs, such as Filters or ModelBinders, are added in their own folders.</span></span> <span data-ttu-id="0aa5e-130">Geschäftslogik wird zwischen Ordnern Modelle und Dienste verschoben, und es gibt keine deutlich wird, welche die Klassen, in welchen Ordnern auf welche anderen abhängen sollten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-130">Business logic is scattered between the Models and Services folders, and there is no clear indication of which classes in which folders should depend on which others.</span></span> <span data-ttu-id="0aa5e-131">Diese mangelnde Organisation auf Projektebene führt häufig zu [Spaghetti Code](http://deviq.com/spaghetti-code/).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-131">This lack of organization at the project level frequently leads to [spaghetti code](http://deviq.com/spaghetti-code/).</span></span>

<span data-ttu-id="0aa5e-132">Um diese Probleme zu beheben, Anwendungen häufig weiterentwickelt in Projektmappen mit mehreren Projekten, in dem jedes Projekt in einer bestimmten befinden gilt *Ebene* der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-132">In order to address these issues, applications often evolve into multi-project solutions, where each project is considered to reside in a particular *layer* of the application.</span></span>

## <a name="what-are-layers"></a><span data-ttu-id="0aa5e-133">Welche Ebenen sind?</span><span class="sxs-lookup"><span data-stu-id="0aa5e-133">What are layers?</span></span>

<span data-ttu-id="0aa5e-134">Eine Möglichkeit zum Verwalten dieser Komplexität werden wie Anwendungen Komplexität zunehmen, die Anwendung gemäß seiner Zuständigkeiten oder Bedenken zusammensetzen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-134">As applications grow in complexity, one way to manage that complexity is to break the application up according to its responsibilities or concerns.</span></span> <span data-ttu-id="0aa5e-135">Dies folgt die Trennung von Anliegen-Prinzip und gewährleisten eine wachsende Codebasis organisiert, sodass Entwickler leicht finden können, in denen bestimmte Funktionen implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-135">This follows the separation of concerns principle, and can help keep a growing codebase organized so that developers can easily find where certain functionality is implemented.</span></span> <span data-ttu-id="0aa5e-136">Mehrschicht-Architektur bietet eine Reihe von Vorteilen außerhalb der Organisation nur Code, jedoch an.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-136">Layered architecture offers a number of advantages beyond just code organization, though.</span></span>

<span data-ttu-id="0aa5e-137">Indem Code in Ebenen organisiert, kann die allgemeine Low-Level-Funktionen in der gesamten Anwendung wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-137">By organizing code into layers, common low-level functionality can be reused throughout the application.</span></span> <span data-ttu-id="0aa5e-138">Die Wiederverwendung ist nützlich, da es bedeutet, dass weniger Code geschrieben werden muss und es der Anwendung auf eine einzelne Implementierung, befolgen das Prinzip TROCKENEN standardisieren ermöglichen kann.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-138">This reuse is beneficial because it means less code needs to be written and because it can allow the application to standardize on a single implementation, following the DRY principle.</span></span>

<span data-ttu-id="0aa5e-139">Mit einer mehrstufigen Architektur können Anwendungen Einschränkungen erzwingen, für die Ebenen mit anderen Ebenen kommunizieren können.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-139">With a layered architecture, applications can enforce restrictions on which layers can communicate with other layers.</span></span> <span data-ttu-id="0aa5e-140">Dadurch wird um die Kapselung zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-140">This helps to achieve encapsulation.</span></span> <span data-ttu-id="0aa5e-141">Wenn eine Ebene geändert oder ersetzt wird, sollte nur diese Ebenen, die Arbeit mit beeinträchtigt werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-141">When a layer is changed or replaced, only those layers that work with it should be impacted.</span></span> <span data-ttu-id="0aa5e-142">Durch die Begrenzung der abhängen Ebenen an, auf denen andere Ebenen, die Auswirkungen von Änderungen gemindert werden können, sodass eine einzelne Änderung keine Auswirkungen auf die gesamte Anwendung hat.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-142">By limiting which layers depend on which other layers, the impact of changes can be mitigated so that a single change doesn't impact the entire application.</span></span>

<span data-ttu-id="0aa5e-143">Ebenen (und Kapselung) erleichtern Funktionen innerhalb der Anwendung zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-143">Layers (and encapsulation) make it much easier to replace functionality within the application.</span></span> <span data-ttu-id="0aa5e-144">Z. B. eine Anwendung möglicherweise zunächst eine eigene SQL Server-Datenbank für Persistenz verwenden, sondern kann später zu einer Strategie für die Cloud-basierten Persistenz, hinter einer Web-API verwenden, oder auswählen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-144">For example, an application might initially use its own SQL Server database for persistence, but later could choose to use a cloud-based persistence strategy, or one behind a web API.</span></span> <span data-ttu-id="0aa5e-145">Wenn die Anwendung ordnungsgemäß seine dauerhaftigkeitsimplementierung innerhalb einer logischen Ebene gekapselt ist, könnte, dass bestimmte SQL Server-Ebene durch eine neue Implementierung der gleichen öffentlichen Schnittstelle ersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-145">If the application has properly encapsulated its persistence implementation within a logical layer, that SQL Server specific layer could be replaced by a new one implementing the same public interface.</span></span>

<span data-ttu-id="0aa5e-146">Zusätzlich zu das Potenzial der Auslagerung Implementierungen als Antwort auf zukünftige Änderungen der Anforderungen erleichtern Anwendungsebenen auch Implementierungen für Testzwecke austauschen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-146">In addition to the potential of swapping out implementations in response to future changes in requirements, application layers can also make it easier to swap out implementations for testing purposes.</span></span> <span data-ttu-id="0aa5e-147">Anstatt Tests schreiben, die für die Ebene um echte Daten bzw. den UI-Ebene der Anwendung ausgeführt werden, können diese Ebenen zum Zeitpunkt der Test mit gefälschten Implementierungen ersetzt werden, die bekannte Antworten auf Anforderungen zu bieten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-147">Instead of having to write tests that operate against the real data layer or UI layer of the application, these layers can be replaced at test time with fake implementations that provide known responses to requests.</span></span> <span data-ttu-id="0aa5e-148">In der Regel dadurch Tests viel einfacher schreiben und viel schneller ausführen, Vergleich für die Ausführung der tests erneut real Anwendungsinfrastruktur.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-148">This typically makes tests much easier to write and much faster to run when compared to running tests again the application's real infrastructure.</span></span>

<span data-ttu-id="0aa5e-149">Logische Anordnung ist ein gängiges Verfahren zum Verbessern der Organisation des Codes im Enterprise-softwareanwendungen, und es gibt mehrere Möglichkeiten, die in denen Code in Ebenen organisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-149">Logical layering is a common technique for improving the organization of code in enterprise software applications, and there are several ways in which code can be organized into layers.</span></span>

> [!NOTE]
> <span data-ttu-id="0aa5e-150">*Ebenen* logische Trennung innerhalb der Anwendung darstellen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-150">*Layers* represent logical separation within the application.</span></span> <span data-ttu-id="0aa5e-151">Falls bei der Anwendungslogik physisch separaten Servern oder Prozesse verteilt wird, diese separaten physischen Bereitstellungsziele bezeichnet als *Ebenen*.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-151">In the event that application logic is physically distributed to separate servers or processes, these separate physical deployment targets are referred to as *tiers*.</span></span> <span data-ttu-id="0aa5e-152">Es ist möglich und recht häufig vorkommt, damit eine N-Ebenen-Anwendung, die auf einer einzelnen Ebene bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-152">It's possible, and quite common, to have an N-Layer application that is deployed to a single tier.</span></span>

## <a name="traditional-n-layer-architecture-applications"></a><span data-ttu-id="0aa5e-153">Herkömmliche "N-Ebene" Architektur Anwendungen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-153">Traditional "N-Layer" architecture applications</span></span>

<span data-ttu-id="0aa5e-154">Die am häufigsten verwendete Organisation der Anwendungslogik in Ebenen er die in Abbildung 5 – 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-154">The most common organization of application logic into layers it shown in Figure 5-2.</span></span>

<span data-ttu-id="0aa5e-155">**Abbildung 5-2.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-155">**Figure 5-2.**</span></span> <span data-ttu-id="0aa5e-156">Typische Anwendungsebenen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-156">Typical application layers.</span></span>

![](./media/image5-2.png)

<span data-ttu-id="0aa5e-157">Diese Ebenen werden als Benutzeroberfläche, häufig abgekürzt BLL (Business Logic Layer) und Datenzugriffsschicht (Data Access Layer).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-157">These layers are frequently abbreviated as UI, BLL (Business Logic Layer), and DAL (Data Access Layer).</span></span> <span data-ttu-id="0aa5e-158">Mit dieser Architektur, stellen Benutzer Anforderungen über die Benutzeroberfläche der Ebene nur mit der BLL interagiert.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-158">Using this architecture, users make requests through the UI layer, which interacts only with the BLL.</span></span> <span data-ttu-id="0aa5e-159">Die BLL kann wiederum die DAL für zugriffsanforderungen Daten aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-159">The BLL, in turn, can call the DAL for data access requests.</span></span> <span data-ttu-id="0aa5e-160">Die Benutzeroberflächenebene nicht nehmen alle Anforderungen an die DAL direkt, noch sollte sie interagieren mit Persistenz direkt über andere Mittel.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-160">The UI layer should not make any requests to the DAL directly, nor should it interact with persistence directly through other means.</span></span> <span data-ttu-id="0aa5e-161">Entsprechend sollte die BLL nur Persistenz interagieren mit der DAL durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-161">Likewise, the BLL should only interact with persistence by going through the DAL.</span></span> <span data-ttu-id="0aa5e-162">Auf diese Weise ist jede Ebene einen eigenen bekannten verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-162">In this way, each layer has its own well-known responsibility.</span></span>

<span data-ttu-id="0aa5e-163">Ein Nachteil dieses Ansatzes herkömmlichen Strukturlayout ist, dass die Kompilierung Abhängigkeiten von oben nach unten ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-163">One disadvantage of this traditional layering approach is that compile-time dependencies run from the top to the bottom.</span></span> <span data-ttu-id="0aa5e-164">D. h. hängt die Benutzeroberflächenebene die BLL, abhängig von der DAL.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-164">That is, the UI layer depends on the BLL, which depends on the DAL.</span></span> <span data-ttu-id="0aa5e-165">Dies bedeutet, dass die BLL, der in der Regel die wichtigste Programmlogik in der Anwendung enthält, abhängige auf "Details" Data Access-Implementierung (und häufig auf das Vorhandensein einer Datenbank).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-165">This means that the BLL, which usually holds the most important logic in the application, is dependent on data access implementation details (and often on the existence of a database).</span></span> <span data-ttu-id="0aa5e-166">Testen von Geschäftslogik in einer solchen Architektur ist häufig schwierig ist, erfordern eine Testdatenbank.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-166">Testing business logic in such an architecture is often difficult, requiring a test database.</span></span> <span data-ttu-id="0aa5e-167">Das Prinzip der Abhängigkeit Umkehrung kann verwendet werden, um dieses Problem zu beheben, wie Sie im nächsten Abschnitt sehen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-167">The dependency inversion principle can be used to address this issue, as you'll see in the next section.</span></span>

<span data-ttu-id="0aa5e-168">Abbildung 5 – 3 zeigt eine beispiellösung, die Unterbrechung von der Anwendung in drei Projekte durch Verantwortung (oder Ebene).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-168">Figure 5-3 shows an example solution, breaking the application into three projects by responsibility (or layer).</span></span>

<span data-ttu-id="0aa5e-169">**Abbildung 5-3.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-169">**Figure 5-3.**</span></span> <span data-ttu-id="0aa5e-170">Eine einfache monolithischen Anwendung mit drei Projekte.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-170">A simple monolithic application with three projects.</span></span>

![](./media/image5-3.png)

<span data-ttu-id="0aa5e-171">Obwohl diese Anwendung mehrere Projekte zu organisatorischen Zwecken verwendet wird, wird weiterhin als einzelne Einheit bereitgestellt und seinen Clients als eine einzelne Web-app mit ihm interagieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-171">Although this application uses several projects for organizational purposes, it is still deployed as a single unit and its clients will interact with it as a single web app.</span></span> <span data-ttu-id="0aa5e-172">Dies ermöglicht sehr einfachen Bereitstellungsverfahrens.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-172">This allows for very simple deployment process.</span></span> <span data-ttu-id="0aa5e-173">Abbildung 5-4 zeigt, wie eine solche Anwendung möglicherweise mit Windows Azure gehostet.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-173">Figure 5-4 shows how such an app might be hosted using Windows Azure.</span></span>

![](./media/image5-4.png)

<span data-ttu-id="0aa5e-174">**Abbildung 5-4.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-174">**Figure 5-4.**</span></span> <span data-ttu-id="0aa5e-175">Einfache Bereitstellung von Azure-Web-App</span><span class="sxs-lookup"><span data-stu-id="0aa5e-175">Simple deployment of Azure Web App</span></span>

<span data-ttu-id="0aa5e-176">Wie die Anwendung muss wachsen, möglicherweise komplexen und robusten bereitstellungslösungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-176">As application needs grow, more complex and robust deployment solutions may be required.</span></span> <span data-ttu-id="0aa5e-177">Abbildung 5 – 5 zeigt ein Beispiel für eine komplexere Bereitstellungsplan, der zusätzliche Funktionen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-177">Figure 5-5 shows an example of a more complex deployment plan that supports additional capabilities.</span></span>

![](./media/image5-5.png)

<span data-ttu-id="0aa5e-178">**Abbildung 5 bis 5.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-178">**Figure 5-5.**</span></span> <span data-ttu-id="0aa5e-179">Bereitstellen von einer Web-app in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="0aa5e-179">Deploying a web app to an Azure App Service</span></span>

<span data-ttu-id="0aa5e-180">Intern wird dieses Projekt Organisation in mehrere Projekte, die basierend auf Verantwortung die Verwaltbarkeit der Anwendung verbessert.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-180">Internally, this project's organization into multiple projects based on responsibility improves the maintainability of the application.</span></span>

<span data-ttu-id="0aa5e-181">Diese Einheit kann Skalierbarkeit für Cloud-basierte bei Bedarf nutzen oder skalieren skaliert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-181">This unit can be scaled up or out to take advantage of cloud-based on-demand scalability.</span></span> <span data-ttu-id="0aa5e-182">Zentrales Skalieren bedeutet das Hinzufügen von zusätzlichen CPU, Arbeitsspeicher, Speicherplatz auf dem Datenträger oder andere Ressourcen auf den Servern, hosten Ihre app.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-182">Scaling up means adding additional CPU, memory, disk space, or other resources to the server(s) hosting your app.</span></span> <span data-ttu-id="0aa5e-183">Horizontales Skalieren bedeutet, ob diese physische oder virtuelle Computer sind solche Server zusätzliche Instanzen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-183">Scaling out means adding additional instances of such servers, whether these are physical servers or virtual machines.</span></span> <span data-ttu-id="0aa5e-184">Wenn Ihre app über mehrere Instanzen gehostet wird, ist ein Lastenausgleich zum Zuweisen von Anforderungen auf individuellen app-Instanzen verwendet.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-184">When your app is hosted across multiple instances, a load balancer is used to assign requests to individual app instances.</span></span>

<span data-ttu-id="0aa5e-185">Die einfachste Vorgehensweise zum Skalieren einer Webanwendung in Azure besteht darin, in der Anwendungsverzeichnis App Service-Plan manuell skalieren zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-185">The simplest approach to scaling a web application in Azure is to configure scaling manually in the application's App Service Plan.</span></span> <span data-ttu-id="0aa5e-186">Abbildung 5 bis 6 zeigen den entsprechenden Azure-Dashboard-Bildschirm, um konfigurieren, wie viele Instanzen eine app betreuen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-186">Figure 5-6 show the appropriate Azure dashboard screen to configure how many instances are serving an app.</span></span>

![](./media/image5-6.png)

<span data-ttu-id="0aa5e-187">**Abbildung 5 bis 6.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-187">**Figure 5-6.**</span></span> <span data-ttu-id="0aa5e-188">Skalierung in Azure App Service-Plan.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-188">App Service Plan scaling in Azure.</span></span>

## <a name="clean-architecture"></a><span data-ttu-id="0aa5e-189">Bereinigen der Architektur</span><span class="sxs-lookup"><span data-stu-id="0aa5e-189">Clean architecture</span></span>

<span data-ttu-id="0aa5e-190">Anwendungen, die die Abhängigkeit Umkehrung Prinzip sowie Driven Design (DDD) Prinzipien folgen tendenziell eine ähnliche Architektur ankommen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-190">Applications that follow the Dependency Inversion Principle as well as Domain-Driven Design (DDD) principles tend to arrive at a similar architecture.</span></span> <span data-ttu-id="0aa5e-191">Diese Architektur ist im Laufe der Jahre viele Namen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-191">This architecture has gone by many names over the years.</span></span> <span data-ttu-id="0aa5e-192">Einer der ersten Namen wurde Sechseckige Architektur verteilter Transaktionen, gefolgt von Ports und Adaptern.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-192">One of the first names was Hexagonal Architecture, followed by Ports-and-Adapters.</span></span> <span data-ttu-id="0aa5e-193">Udate wird als genannten wurden die [Onion Architektur](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) oder [bereinigen Architektur](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-193">More recently, it's been cited as the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) or [Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span></span> <span data-ttu-id="0aa5e-194">Es ist dieser Nachname Clean-Architektur, die als Grundlage zum Beschreiben der in diesem e-Book-Architektur verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-194">It is this last name, Clean Architecture, that is used as the basis for describing the architecture in this e-book.</span></span>

> [!NOTE]
> <span data-ttu-id="0aa5e-195">Der Begriff, den bereinigen Architektur auf Anwendungen angewendet werden können, die mit DDD Prinzipien auch auf solche, die nicht erstellt werden, mit DDD erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-195">The term Clean Architecture can be applied to applications that are built using DDD Principles as well as to those that are not built using DDD.</span></span> <span data-ttu-id="0aa5e-196">Im Fall der erste Wert diese Kombination kann bezeichnet werden als "Clean DDD Architecture".</span><span class="sxs-lookup"><span data-stu-id="0aa5e-196">In the case of the former, this combination may be referred to as "Clean DDD Architecture".</span></span>

<span data-ttu-id="0aa5e-197">Clean-Architektur setzt das Geschäftsmodell Logik und die Anwendung in der Mitte der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-197">Clean architecture puts the business logic and application model at the center of the application.</span></span> <span data-ttu-id="0aa5e-198">Anstatt von Geschäftslogik, die Datenzugriff oder Bedenken Infrastruktur abhängig sind, wird diese Abhängigkeit invertiert: Infrastruktur und die Implementierung richten sich nach den Kern der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-198">Instead of having business logic depend on data access or other infrastructure concerns, this dependency is inverted: infrastructure and implementation details depend on the Application Core.</span></span> <span data-ttu-id="0aa5e-199">Dies erfolgt durch die Definition von Abstraktionen oder Schnittstellen, in der Anwendung, die dann durch die in die Infrastrukturebene definierten Typen implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-199">This is achieved by defining abstractions, or interfaces, in the Application Core, which are then implemented by types defined in the Infrastructure layer.</span></span> <span data-ttu-id="0aa5e-200">Eine gängige Methode der Visualisierung dieser Architektur ist eine Reihe von konzentrische Kreise, ähnlich wie eine Onion verwenden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-200">A common way of visualizing this architecture is to use a series of concentric circles, similar to an onion.</span></span> <span data-ttu-id="0aa5e-201">Abbildung 5 X zeigt ein Beispiel für diese Art der Darstellung von Architektur.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-201">Figure 5-X shows an example of this style of architectural representation.</span></span>

![](./media/image5-7.png)

<span data-ttu-id="0aa5e-202">**Abbildung 5-7.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-202">**Figure 5-7.**</span></span> <span data-ttu-id="0aa5e-203">Bereinigen Sie die Architektur; Onion anzeigen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-203">Clean Architecture; onion view</span></span>

<span data-ttu-id="0aa5e-204">In diesem Diagramm bedroht werden Abhängigkeiten in Richtung der innersten Kreis.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-204">In this diagram, dependencies flow toward the innermost circle.</span></span> <span data-ttu-id="0aa5e-205">Daher sehen Sie sich, dass der Anwendung-Core (die den Namen aus seiner Position im Kern dieses Diagramm annimmt) keine anderen Anwendungsebenen abhängt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-205">Thus, you can see that the Application Core (which takes its name from its position at the core of this diagram) has no dependencies on other application layers.</span></span> <span data-ttu-id="0aa5e-206">Sind Sie sehr zentriert Entitäten und die Schnittstellen der Anwendungsverzeichnis aus.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-206">At the very center are the application's entities and interfaces.</span></span> <span data-ttu-id="0aa5e-207">Nur außerhalb, jedoch noch in der Anwendung Core sind Domänendienste, die in der Regel in der inneren Kreis definierte Schnittstellen implementieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-207">Just outside, but still in the Application Core, are domain services, which typically implement interfaces defined in the inner circle.</span></span> <span data-ttu-id="0aa5e-208">Außerhalb der Anwendung Core richten sich die Benutzeroberfläche und den infrastrukturschichten auf Anwendung Core, jedoch nicht auf anderen (unbedingt).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-208">Outside of the Application Core, both the User Interface and the Infrastructure layers depend on the Application Core, but not on one another (necessarily).</span></span>

<span data-ttu-id="0aa5e-209">Abbildung 5 X herkömmlicheren horizontale Ebenendiagramm, die die Abhängigkeit zwischen der Benutzeroberfläche und anderen Ebenen besser wiedergibt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-209">Figure 5-X shows a more traditional horizontal layer diagram that better reflects the dependency between the UI and other layers.</span></span>

![](./media/image5-8.png)

<span data-ttu-id="0aa5e-210">**Abbildung 5 bis 8.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-210">**Figure 5-8.**</span></span> <span data-ttu-id="0aa5e-211">Bereinigen Sie die Architektur; horizontale Ebene anzeigen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-211">Clean Architecture; horizontal layer view</span></span>

<span data-ttu-id="0aa5e-212">Beachten Sie, dass das ausgefüllte Pfeile Kompilierzeit Abhängigkeiten darstellen, während der gestrichelte Pfeil stellt eine Abhängigkeit nur das Laufzeitmodul dar.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-212">Note that the solid arrows represent compile-time dependencies, while the dashed arrow represents a runtime-only dependency.</span></span> <span data-ttu-id="0aa5e-213">Verwenden die clean-Architektur, die Benutzeroberflächenebene funktioniert mit Schnittstellen, die in der Anwendung zum Zeitpunkt der Kompilierung definiert und im Idealfall sollte kein Kenntnis von den Implementierungstypen definiertes in die Infrastrukturebene.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-213">Using the clean architecture, the UI layer works with interfaces defined in the Application Core at compile time, and ideally should not have any knowledge of the implementation types defined in the Infrastructure layer.</span></span> <span data-ttu-id="0aa5e-214">Zur Laufzeit jedoch werden diese Implementierungstypen für die app ausgeführt wird, benötigt, damit er vorhanden und bis zu der Anwendung Core Schnittstellen über Abhängigkeitsinjektion kabelgebundenen sein muss.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-214">At runtime, however, these implementation types will be required for the app to execute, so they will need to be present and wired up to the Application Core interfaces via dependency injection.</span></span>

<span data-ttu-id="0aa5e-215">Abbildung 5 – 9 zeigt eine ausführlichere Ansicht eines ASP.NET Core der Architektur einer Anwendung nach dieser Empfehlungen erstellt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-215">Figure 5-9 shows a more detailed view of an ASP.NET Core application's architecture when built following these recommendations.</span></span>

![ASPNET Kernarchitektur](./media/image5-9.png)

<span data-ttu-id="0aa5e-217">**Abbildung 5 bis 9.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-217">**Figure 5-9.**</span></span> <span data-ttu-id="0aa5e-218">ASP.NET Core-Architekturdiagramm bereinigen Architektur befolgen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-218">ASP.NET Core architecture diagram following Clean Architecture.</span></span>

<span data-ttu-id="0aa5e-219">Da das Kernstück der Anwendung nicht von Infrastruktur abhängig ist, ist es sehr einfach, automatisierte Komponententests für diese Ebene zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-219">Because the Application Core doesn't depend on Infrastructure, it is very easy to write automated unit tests for this layer.</span></span> <span data-ttu-id="0aa5e-220">Zahlen 5 bis 10 und 5 bis 11 zeigen an, wie die Tests in dieser Architektur passen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-220">Figures 5-10 and 5-11 show how tests fit into this architecture.</span></span>

![UnitTestCore](./media/image5-10.png)

<span data-ttu-id="0aa5e-222">**Abbildung 5 bis 10.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-222">**Figure 5-10.**</span></span> <span data-ttu-id="0aa5e-223">UnitTests Application Core isoliert.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-223">Unit testing Application Core in isolation.</span></span>

![IntegrationTests](./media/image5-11.png)

<span data-ttu-id="0aa5e-225">**Abbildung 5-11.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-225">**Figure 5-11.**</span></span> <span data-ttu-id="0aa5e-226">Integrationstests Infrastruktur Implementierungen mit externen Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-226">Integration testing Infrastructure implementations with external dependencies.</span></span>

<span data-ttu-id="0aa5e-227">Da die Benutzeroberflächenebene für Typen, die in der Infrastructure-Projekt definiert direkte Abhängigkeit besitzt, ist es ebenso sehr einfach out Implementierungen, entweder testen zu vereinfachen oder als Reaktion auf die sich ändernden anwendungsanforderungen ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-227">Since the UI layer doesn't have any direct dependency on types defined in the Infrastructure project, it is likewise very easy to swap out implementations, either to facilitate testing or in response to changing application requirements.</span></span> <span data-ttu-id="0aa5e-228">ASP.NET Core des integrierten Verwendung von und Unterstützung für Abhängigkeitsinjektion macht diese Architektur die am besten geeignete Möglichkeit, die Struktur nicht triviale monolithischen Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-228">ASP.NET Core's built-in use of and support for dependency injection makes this architecture the most appropriate way to structure non-trivial monolithic applications.</span></span>

<span data-ttu-id="0aa5e-229">Für monolithischen Anwendungen werden alle Projekte Anwendung Kern, der Infrastruktur und der Benutzeroberfläche als eine einzelne Anwendung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-229">For monolithic applications the Application Core, Infrastructure, and User Interface projects are all run as a single application.</span></span> <span data-ttu-id="0aa5e-230">Die Common Language Runtime-Anwendungsarchitektur sieht möglicherweise etwas wie Abbildung 5 – 12.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-230">The runtime application architecture might look something like Figure 5-12.</span></span>

![ASPNET Kernarchitektur 2](./media/image5-12.png)

<span data-ttu-id="0aa5e-232">**Abbildung 5 – 12.**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-232">**Figure 5-12.**</span></span> <span data-ttu-id="0aa5e-233">Ein Beispiel ASP.NET Core-app-Runtime-Architektur.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-233">A sample ASP.NET Core app's runtime architecture.</span></span>

### <a name="organizing-code-in-clean-architecture"></a><span data-ttu-id="0aa5e-234">Organisieren von Code in Clean-Architektur</span><span class="sxs-lookup"><span data-stu-id="0aa5e-234">Organizing Code in Clean Architecture</span></span>

<span data-ttu-id="0aa5e-235">In einer Projektmappe bereinigen Architektur hat jedes Projekt löschen Aufgaben.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-235">In a Clean Architecture solution, each project has clear responsibilities.</span></span> <span data-ttu-id="0aa5e-236">Als solche in jedem Projekt angelegt werden, bestimmte Typen gehören, und finden Sie häufig Ordnern, die auf diese Typen in das entsprechende Projekt entspricht.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-236">As such, certain types will belong in each project and you'll frequently find folders corresponding to these types in the appropriate project.</span></span>

<span data-ttu-id="0aa5e-237">Den Kern der Anwendung enthält die Geschäftsmodell, das Entitäten, Diensten und Schnittstellen enthält.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-237">The Application Core holds the business model, which includes entities, services, and interfaces.</span></span> <span data-ttu-id="0aa5e-238">Zu diesen Schnittstellen gehören Abstraktionen für Vorgänge, die anhand von Infrastruktur, z. B. den Datenzugriff, Dateisystemzugriff, Netzwerkaufrufe usw. gesucht werden soll. In einigen Fällen müssen Diensten oder Schnittstellen definiert, die auf dieser Ebene mit nicht-Entitätstypen arbeiten, die keine Abhängigkeiten auf der Benutzeroberfläche oder Infrastruktur haben.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-238">These interfaces include abstractions for operations that will be performed using Infrastructure, such as data access, file system access, network calls, etc. Sometimes services or interfaces defined at this layer will need to work with non-entity types that have no dependencies on UI or Infrastructure.</span></span> <span data-ttu-id="0aa5e-239">Diese können als einfache Daten übertragen Objekte (DTOs) definiert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-239">These can be defined as simple Data Transfer Objects (DTOs).</span></span>

> ### <a name="application-core-types"></a><span data-ttu-id="0aa5e-240">Core Anwendungstypen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-240">Application Core Types</span></span>
> -   <span data-ttu-id="0aa5e-241">Entitäten (Business Modellklassen, die beibehalten werden)</span><span class="sxs-lookup"><span data-stu-id="0aa5e-241">Entities (business model classes that are persisted)</span></span>
> -   <span data-ttu-id="0aa5e-242">Schnittstellen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-242">Interfaces</span></span>
> -   <span data-ttu-id="0aa5e-243">Dienste</span><span class="sxs-lookup"><span data-stu-id="0aa5e-243">Services</span></span>
> -   <span data-ttu-id="0aa5e-244">DTOs</span><span class="sxs-lookup"><span data-stu-id="0aa5e-244">DTOs</span></span>

<span data-ttu-id="0aa5e-245">Infrastructure-Projekt enthält in der Regel Data Access-Implementierungen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-245">The Infrastructure project will typically include data access implementations.</span></span> <span data-ttu-id="0aa5e-246">In einer typischen Webanwendung ASP.NET Core umfasst dies Entity Framework DbContext, alle EF-Core-Migrationen, die definiert wurden und Datenzugriffsklassen-Implementierung.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-246">In a typical ASP.NET Core web application, this will include the Entity Framework DbContext, any EF Core Migrations that have been defined, and data access implementation classes.</span></span> <span data-ttu-id="0aa5e-247">Die gängigste Methode zum abstrahieren Datenzugriffscode Implementierung wird durch Verwendung von der [Repository Entwurfsmuster](http://deviq.com/repository-pattern/).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-247">The most common way to abstract data access implementation code is through the use of the [Repository design pattern](http://deviq.com/repository-pattern/).</span></span>

<span data-ttu-id="0aa5e-248">Zusätzlich zu den Data Access-Implementierungen sollte das Infrastruktur-Projekt Implementierungen von Diensten enthalten, die mit der Infrastruktur Bedenken interagieren muss.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-248">In addition to data access implementations, the Infrastructure project should contain implementations of services that must interact with infrastructure concerns.</span></span> <span data-ttu-id="0aa5e-249">Diese Dienste sollten in den Kern der Anwendung definierte Schnittstellen implementieren und haben deshalb Infrastruktur sollte einen Verweis auf das Projekt Application Core.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-249">These services should implement interfaces defined in the Application Core, and so Infrastructure should have a reference to the Application Core project.</span></span>

> ### <a name="infrastructure-types"></a><span data-ttu-id="0aa5e-250">Infrastrukturtypen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-250">Infrastructure Types</span></span>
> -   <span data-ttu-id="0aa5e-251">EF Core Typen ("DbContext", "Migration")</span><span class="sxs-lookup"><span data-stu-id="0aa5e-251">EF Core types (DbContext, Migrations)</span></span>
> -   <span data-ttu-id="0aa5e-252">Datenzugriff Implementierungstypen (Repositorys)</span><span class="sxs-lookup"><span data-stu-id="0aa5e-252">Data access implementation types (Repositories)</span></span>
> -   <span data-ttu-id="0aa5e-253">Infrastruktur-spezifische Dienste ("FileLogger", SmtpNotifier usw.).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-253">Infrastructure-specific services (FileLogger, SmtpNotifier, etc.)</span></span>

<span data-ttu-id="0aa5e-254">Die Benutzeroberflächenebene in einer ASP.NET-MVC-Anwendung Core werden den Einstiegspunkt für die Anwendung, und es werden ein ASP.NET Core MVC-Projekt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-254">The user interface layer in an ASP.NET Core MVC application will be the entry point for the application, and will be an ASP.NET Core MVC project.</span></span> <span data-ttu-id="0aa5e-255">Dieses Projekt sollte die Anwendung Core-Projekt verweist, und die Typen sollten mit Infrastruktur ausschließlich über Schnittstellen, die in der Anwendung Core definiert interagieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-255">This project should reference the Application Core project, and its types should interact with infrastructure strictly through interfaces defined in Application Core.</span></span> <span data-ttu-id="0aa5e-256">Keine direkte Instanziierung von (oder statische Aufrufe) Ebene Infrastrukturtypen in der Benutzeroberflächenebene zugelassen werden sollte.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-256">No direct instantiation of (or static calls to) Infrastructure layer types should be permitted in the UI layer.</span></span>

> ### <a name="ui-layer-types"></a><span data-ttu-id="0aa5e-257">Benutzeroberflächentypen-Ebene</span><span class="sxs-lookup"><span data-stu-id="0aa5e-257">UI Layer Types</span></span>
> -   <span data-ttu-id="0aa5e-258">Controller</span><span class="sxs-lookup"><span data-stu-id="0aa5e-258">Controllers</span></span>
> -   <span data-ttu-id="0aa5e-259">Filter</span><span class="sxs-lookup"><span data-stu-id="0aa5e-259">Filters</span></span>
> -   <span data-ttu-id="0aa5e-260">Ansichten</span><span class="sxs-lookup"><span data-stu-id="0aa5e-260">Views</span></span>
> -   <span data-ttu-id="0aa5e-261">ViewModels</span><span class="sxs-lookup"><span data-stu-id="0aa5e-261">ViewModels</span></span>
> -   <span data-ttu-id="0aa5e-262">Start</span><span class="sxs-lookup"><span data-stu-id="0aa5e-262">Startup</span></span>

<span data-ttu-id="0aa5e-263">Die Startklasse ist verantwortlich für das Konfigurieren der Anwendung und verknüpft Implementierungstypen zu Schnittstellen, sodass Abhängigkeitsinjektion zur Laufzeit ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-263">The Startup class is responsible for configuring the application, and for wiring up implementation types to interfaces, allowing dependency injection to work properly at run time.</span></span>

> [!NOTE]
> <span data-ttu-id="0aa5e-264">Damit die Abhängigkeitsinjektion in ConfigureServices in der Startup.cs-Datei des Projekts Benutzeroberfläche zu verknüpfen, müssen das Projekt ggf. Infrastructure-Projekt zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-264">In order to wire up dependency injection in ConfigureServices in the Startup.cs file of the UI project, the project may need to reference the Infrastructure project.</span></span> <span data-ttu-id="0aa5e-265">Diese Abhängigkeit kann am einfachsten mithilfe eines benutzerdefinierten DI-Containers entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-265">This dependency can be eliminated, most easily by using a custom DI container.</span></span> <span data-ttu-id="0aa5e-266">Der einfachste Ansatz werden im Rahmen dieses Beispiels können die UI-Projekt, in das Infrastruktur-Projekt zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-266">For the purposes of this sample, the simplest approach is to allow the UI project to reference the Infrastructure project.</span></span>

## <a name="monolithic-applications-and-containers"></a><span data-ttu-id="0aa5e-267">Aufgrund eines monolithischen Anwendungen und Container</span><span class="sxs-lookup"><span data-stu-id="0aa5e-267">Monolithic Applications and Containers</span></span> 

<span data-ttu-id="0aa5e-268">Sie können einen einfachen und monolithischen Bereitstellung-basierten Web-Anwendung oder Dienst erstellen und als einen Container bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-268">You can build a single and monolithic-deployment based Web Application or Service and deploy it as a container.</span></span> <span data-ttu-id="0aa5e-269">In der Anwendung möglicherweise nicht aufgrund eines monolithischen jedoch in mehrere Bibliotheken, Komponenten oder Ebenen organisiert werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-269">Within the application, it might not be monolithic but organized into several libraries, components or layers.</span></span> <span data-ttu-id="0aa5e-270">Extern ist es einem einzelnen Container wie einen einzelnen Prozess, einzelne Webanwendung oder einzelnen Dienst.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-270">Externally it is a single container like a single process, single web application or single service.</span></span>

<span data-ttu-id="0aa5e-271">Um dieses Modell zu verwalten, stellen Sie einen einzelnen Container, um die Anwendung darzustellen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-271">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="0aa5e-272">Wenn skaliert werden sollen, fügen Sie einfach zusätzliche Kopien mit vorangestelltem einen Lastenausgleich hinzu.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-272">To scale, just add additional copies with a load balancer in front.</span></span> <span data-ttu-id="0aa5e-273">Die Einfachheit stammen aus eine einzelne Bereitstellung in einem einzelnen Container oder virtuellen Computer verwalten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-273">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image5-13.png)

<span data-ttu-id="0aa5e-274">Sie können mehrere Komponenten-Bibliotheken oder interne Ebenen innerhalb jeder Container einschließen, wie in Abbildung 5 X dargestellt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-274">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 5-X.</span></span> <span data-ttu-id="0aa5e-275">Folgt jedoch die Container-Prinzip des *"ein Container ist dabei, ein und in einem Prozess*", das monolithische Muster ist möglicherweise ein Konflikt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-275">But, following the container principal of *"a container does one thing, and does it in one process*", the monolithic pattern might be a conflict.</span></span>

<span data-ttu-id="0aa5e-276">Der Nachteil dieses Ansatzes stammen, wenn/die Anwendung wächst, erfordern sie skalieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-276">The downside of this approach comes if/when the application grows, requiring it to scale.</span></span> <span data-ttu-id="0aa5e-277">Wenn die gesamte Anwendung skaliert, ist es nicht tatsächlich ein Problem aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-277">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="0aa5e-278">In den meisten Fällen sind jedoch einige Teile der Anwendung, dass die Drossel Punkte, Skalierung, erfordern, während andere Komponenten sind kleiner verwendet.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-278">However, in most cases, a few parts of the application are the choke points requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="0aa5e-279">Verwenden Sie das Standard-e-Commerce-Beispiel; Was müssen Sie wahrscheinlich skalieren ist die Komponente der Informationen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-279">Using the typical eCommerce example; what you likely need to scale is the product information component.</span></span> <span data-ttu-id="0aa5e-280">Viele weitere Kunden durchsuchen Produkte, als sie erwerben.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-280">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="0aa5e-281">Verwenden Sie die Zahlung Pipeline verwenden mehr Kunden Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-281">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="0aa5e-282">Weniger Kunden Hinzufügen von Kommentaren oder ihre Bestellung Verlauf anzeigen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-282">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="0aa5e-283">Und Sie wahrscheinlich nur eine Handvoll Mitarbeiter in einer einzelnen Region, die den Inhalt und Marketingkampagnen verwalten müssen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-283">And you likely only have a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="0aa5e-284">Durch zentrales Skalieren der aufgrund eines monolithischen Entwurfs, wird der gesamte Code mehrmals bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-284">By scaling the monolithic design, all the code is deployed multiple times.</span></span>

<span data-ttu-id="0aa5e-285">Zusätzlich zu der Skala erfordern alles Problem, Änderungen an einer einzelnen Komponente vollständige ein erneuter Test die gesamte Anwendung und eine vollständige erneute Bereitstellung aller Instanzen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-285">In addition to the scale everything problem, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="0aa5e-286">Aufgrund eines monolithischen Ansatz ist, und viele Organisationen mit dieser Architektur Ansatz entwickeln.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-286">The monolithic approach is common, and many organizations are developing with this architectural approach.</span></span> <span data-ttu-id="0aa5e-287">Viele haben genügend Ergebnisse gut anzumelden, während andere Grenzwerte aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-287">Many are having good enough results, while others are hitting limits.</span></span> <span data-ttu-id="0aa5e-288">Viele entwickelt ihre Anwendungen in diesem Modell, da die Tools und Infrastruktur für Waren zu schwierig dienstorientierte Architektur (SOA) zu erstellen, und sie die Notwendigkeit - sehen haben nicht, bis vergrößert die app wurde.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-288">Many designed their applications in this model, because the tools and infrastructure were too difficult to build service oriented architectures (SOA), and they didn't see the need - until the app grew.</span></span> <span data-ttu-id="0aa5e-289">Wenn Sie, dass Sie die Grenzwerte des monolithischen Ansatzes auftreten feststellen, kann die Aufteilung der app auf Container und Microservices besser genutzt werden, damit ein logischen als Nächstes sein.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-289">If you find you're hitting the limits of the monolithic approach, breaking the app up to enable it to better leverage containers and microservices may be the next logical step.</span></span>

![](./media/image5-14.png)

<span data-ttu-id="0aa5e-290">Bereitstellen von monolithischen Anwendungen in Microsoft Azure kann mithilfe von dedizierten virtuellen Computern für jede Instanz erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-290">Deploying monolithic applications in Microsoft Azure can be achieved using dedicated VMs for each instance.</span></span> <span data-ttu-id="0aa5e-291">Mit [Azure VM-Skalierungsgruppen](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), können Sie die virtuellen Computer problemlos skalieren.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-291">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="0aa5e-292">[Azure App-Dienste](https://azure.microsoft.com/services/app-service/) monolithische Anwendungen ausführen können, und Instanzen problemlos zu skalieren, ohne den VMs verwalten zu müssen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-292">[Azure App Services](https://azure.microsoft.com/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="0aa5e-293">Azure App-Dienste können einzelne Instanzen von Docker-Containern ebenfalls ausführen, Vereinfachung der Bereitstellungsstatus.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-293">Azure App Services can run single instances of Docker containers as well, simplifying the deployment.</span></span> <span data-ttu-id="0aa5e-294">Mit Docker, können Sie eine einzelne virtuelle Maschine als Docker-Host bereitstellen und Ausführen mehrerer Instanzen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-294">Using Docker, you can deploy a single VM as a Docker host, and run multiple instances.</span></span> <span data-ttu-id="0aa5e-295">Der Azure-Lastenausgleich, können wie in Abbildung 5-14 gezeigt, Sie Skalierung verwalten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-295">Using the Azure balancer, as shown in the Figure 5-14, you can manage scaling.</span></span>

<span data-ttu-id="0aa5e-296">Mit herkömmlichen Bereitstellung Techniken kann die Bereitstellung für die verschiedenen Hosts verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-296">The deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="0aa5e-297">Die Docker-Hosts verwaltet werden können, mit Befehlen wie **"Docker run"** manuell oder durch die Automatisierung ausgeführt, z. B. pipelines Continuous Delivery (CD).</span><span class="sxs-lookup"><span data-stu-id="0aa5e-297">The Docker hosts can be managed with commands like **docker run** performed manually, or through automation such as Continuous Delivery (CD) pipelines.</span></span>

### <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="0aa5e-298">Aufgrund eines monolithischen Anwendung, die als Container bereitgestellt</span><span class="sxs-lookup"><span data-stu-id="0aa5e-298">Monolithic application deployed as a container</span></span>

<span data-ttu-id="0aa5e-299">Es sind Vorteile der Verwendung von Containern monolithischen anwendungsbereitstellungen zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-299">There are benefits of using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="0aa5e-300">Skalieren die Instanzen von Containern ist wesentlich schneller und einfacher als die Bereitstellung zusätzlicher VMs.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-300">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="0aa5e-301">Selbst wenn die VM-Skalierungsgruppen verwenden, um virtuelle Computer zu skalieren, Zeit dauern, bis diese Instanz.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-301">Even when using VM Scale Sets to scale VMs, they take time to instance.</span></span> <span data-ttu-id="0aa5e-302">Wenn als app-Instanzen bereitgestellt wird, wird die Konfiguration der app im Rahmen des virtuellen Computers verwaltet.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-302">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="0aa5e-303">Bereitstellen von Updates, wie Docker-Images ist wesentlich schneller und Netzwerk effizient.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-303">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="0aa5e-304">Docker-Images beginnen in der Regel in Sekunden, die Befehlseingabe Rollouts.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-304">Docker Images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="0aa5e-305">Beendet eine Instanz der Docker ist genauso einfach wie das Ausgeben einer **Docker Stop** Befehl ein, in der Regel in weniger als einer Sekunde abschließen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-305">Tearing down a Docker instance is as easy as issuing a **docker stop** command, typically completing in less than a second.</span></span>

<span data-ttu-id="0aa5e-306">Wie Container entwurfsbedingt grundsätzlich unveränderlich sind, müssen Sie nie fehlerhafte VMs zu kümmern, während der Update-Skripts vergessen haben möglicherweise für einige bestimmte Konfiguration oder die Datei Links auf dem Datenträger zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-306">As containers are inherently immutable by design, you never need to worry about corrupted VMs, whereas update scripts might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="0aa5e-307">Während monolithischen apps von Docker in Sub-Systeme, die skaliert werden kann die aufgrund eines monolithischen Anwendung unterbrechen profitieren können, entwickelt und einzeln bereitgestellt werden möglicherweise Ihre Einstiegspunkt außerhalb des Bereichs des Microservices.</span><span class="sxs-lookup"><span data-stu-id="0aa5e-307">While monolithic apps can benefit from Docker, breaking up the monolithic application into sub systems which can be scaled, developed and deployed individually may be your entry point into the realm of microservices.</span></span>

> ### <a name="references--common-web-architectures"></a><span data-ttu-id="0aa5e-308">Verweise – allgemeine Web-Architekturen</span><span class="sxs-lookup"><span data-stu-id="0aa5e-308">References – Common Web Architectures</span></span>
> - <span data-ttu-id="0aa5e-309">**Die Clean-Architektur**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-309">**The Clean Architecture**</span></span>  
> <span data-ttu-id="0aa5e-310"><https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html></span><span class="sxs-lookup"><span data-stu-id="0aa5e-310"><https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html></span></span>
> - <span data-ttu-id="0aa5e-311">**Die Onion-Architektur**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-311">**The Onion Architecture**</span></span>  
> <span data-ttu-id="0aa5e-312"><http://jeffreypalermo.com/blog/the-onion-architecture-part-1/></span><span class="sxs-lookup"><span data-stu-id="0aa5e-312"><http://jeffreypalermo.com/blog/the-onion-architecture-part-1/></span></span>
> - <span data-ttu-id="0aa5e-313">**Das Repositorymuster**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-313">**The Repository Pattern**</span></span>  
> <span data-ttu-id="0aa5e-314"><http://deviq.com/repository-pattern/></span><span class="sxs-lookup"><span data-stu-id="0aa5e-314"><http://deviq.com/repository-pattern/></span></span>
> - <span data-ttu-id="0aa5e-315">**Bereinigen der Architektur Lösung-Beispiel**</span><span class="sxs-lookup"><span data-stu-id="0aa5e-315">**Clean Architecture Solution Sample**</span></span>  
> <span data-ttu-id="0aa5e-316"><https://github.com/ardalis/cleanarchitecture></span><span class="sxs-lookup"><span data-stu-id="0aa5e-316"><https://github.com/ardalis/cleanarchitecture></span></span>
> - <span data-ttu-id="0aa5e-317">**Architektur Microservices e-Book** <http://aka.ms/MicroservicesEbook></span><span class="sxs-lookup"><span data-stu-id="0aa5e-317">**Architecting Microservices e-book** <http://aka.ms/MicroservicesEbook></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0aa5e-318">[Vorherigen] (architektonische principles.md) [weiter] (Common-Client-Side-Web-technologies.md)</span><span class="sxs-lookup"><span data-stu-id="0aa5e-318">[Previous] (architectural-principles.md) [Next] (common-client-side-web-technologies.md)</span></span>
