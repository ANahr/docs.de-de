---
title: Entwicklung von MVC-Apps mit ASP.NET Core
description: Innovative Webanwendungen mit ASP.NET Core und Azure Architekt | Entwickeln von ASP.NET Core MVC-Apps
author: ardalis
ms.author: wiwagn
ms.date: 10/07/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.openlocfilehash: 54e7ed6fff9ac709e411d0ac1e345c63fd753201
ms.sourcegitcommit: 43c656811dd38a66a6672084c65d10c0cbbf2015
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/22/2017
---
# <a name="develop-aspnet-core-mvc-apps"></a><span data-ttu-id="c7625-103">Entwickeln von ASP.NET Core MVC-Apps</span><span class="sxs-lookup"><span data-stu-id="c7625-103">Develop ASP.NET Core MVC Apps</span></span>

> <span data-ttu-id="c7625-104">"Es ist nicht wichtig, die es richtig erstmalig machen.</span><span class="sxs-lookup"><span data-stu-id="c7625-104">"It's not important to get it right the first time.</span></span> <span data-ttu-id="c7625-105">Es ist äußerst wichtig zum richtigen Zeitpunkt der letzten abrufen."</span><span class="sxs-lookup"><span data-stu-id="c7625-105">It's vitally important to get it right the last time."</span></span>  
> <span data-ttu-id="c7625-106">_-Andrew Jagd und David Thomas_</span><span class="sxs-lookup"><span data-stu-id="c7625-106">_- Andrew Hunt and David Thomas_</span></span>

## <a name="summary"></a><span data-ttu-id="c7625-107">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="c7625-107">Summary</span></span>

<span data-ttu-id="c7625-108">ASP.NET Core ist eine plattformübergreifende und Open Source-Framework zum Erstellen von modernen cloudoptimiertes Webanwendungen.</span><span class="sxs-lookup"><span data-stu-id="c7625-108">ASP.NET Core is a cross-platform, open-source framework for building modern cloud-optimized web applications.</span></span> <span data-ttu-id="c7625-109">ASP.NET Core-apps sind einfache und modulare, mit integrierter Unterstützung für zielabhängigkeit, in größere Prüfbarkeit und verwaltbarkeit zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-109">ASP.NET Core apps are lightweight and modular, with built-in support for dependency injection, enabling in greater testability and maintainability.</span></span> <span data-ttu-id="c7625-110">Kombiniert mit MVC, das Erstellen von modernen Web-APIs zusätzlich zum Anzeigen von datenbasierten apps unterstützt, ist ASP.NET Core ein leistungsfähiges Framework mit dem Enterprise-Webanwendungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-110">Combined with MVC, which supports building modern web APIs in addition to view-based apps, ASP.NET Core is a powerful framework with which to build enterprise web applications.</span></span>

## <a name="mapping-requests-to-responses"></a><span data-ttu-id="c7625-111">Zuordnen von Anforderungen zu Antworten</span><span class="sxs-lookup"><span data-stu-id="c7625-111">Mapping Requests to Responses</span></span>

<span data-ttu-id="c7625-112">ASP.NET Core apps wird der ausgehenden Antworten im Wesentlichen eingehende Anforderungen zuordnen.</span><span class="sxs-lookup"><span data-stu-id="c7625-112">At its heart, ASP.NET Core apps map incoming requests to outgoing responses.</span></span> <span data-ttu-id="c7625-113">Auf einer unteren Ebene Dies erfolgt mit Middleware und einfache ASP.NET Core-apps und Microservices ausschließlich aus benutzerdefinierten Middleware umfassen kann.</span><span class="sxs-lookup"><span data-stu-id="c7625-113">At a low level, this is done with middleware, and simple ASP.NET Core apps and microservices may be comprised solely of custom middleware.</span></span> <span data-ttu-id="c7625-114">Bei Verwendung von ASP.NET Core MVC können Arbeit auf einer etwas höheren Ebene im Sinne von denken *Routen*, *Controller*, und *Aktionen*.</span><span class="sxs-lookup"><span data-stu-id="c7625-114">When using ASP.NET Core MVC, you can work at a somewhat higher level, thinking in terms of *routes*, *controllers*, and *actions*.</span></span> <span data-ttu-id="c7625-115">Jede eingehende Anforderung ist mit der Anwendung Routingtabelle verglichen, und wenn eine übereinstimmende Route gefunden wird, wird die zugeordnete Aktionsmethode (gehört zu einem Domänencontroller) aufgerufen, um die Anforderung zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="c7625-115">Each incoming request is compared with the application's routing table, and if a matching route is found, the associated action method (belonging to a controller) is called to handle the request.</span></span> <span data-ttu-id="c7625-116">Wenn keine übereinstimmende Route gefunden wird, wird ein Fehlerhandler (in diesem Fall wird ein Ergebnis NotFound zurückgegeben) aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="c7625-116">If no matching route is found, an error handler (in this case, returning a NotFound result) is called.</span></span>

<span data-ttu-id="c7625-117">ASP.NET Core MVC-apps können herkömmliche Routen, attributenrouten oder beides verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7625-117">ASP.NET Core MVC apps can use conventional routes, attribute routes, or both.</span></span> <span data-ttu-id="c7625-118">Herkömmliche Routen werden im Code angeben, routing definiert *Konventionen* mithilfe von Syntax wie im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="c7625-118">Conventional routes are defined in code, specifying routing *conventions* using syntax like in the example below:</span></span>

```csharp
app.UseMvc(routes =>;
{
    routes.MapRoute("default","{controller=Home}/{action=Index}/{id?}");
});
```

<span data-ttu-id="c7625-119">In diesem Beispiel wurde der Routingtabelle eine Route mit dem Namen "Default" hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="c7625-119">In this example, a route named "default" has been added to the routing table.</span></span> <span data-ttu-id="c7625-120">Definiert eine routenvorlage mit Platzhaltern für *Controller*, *Aktion*, und *Id*. Die Platzhalter für Controller und Aktion Standardwert vorhanden sein ("Startseite" und "Index" bzw.), und die Platzhalter-Id ist optional (-ASP.NET-Kompatibilitätsmodus ein "?" angewendet wird).</span><span class="sxs-lookup"><span data-stu-id="c7625-120">It defines a route template with placeholders for *controller*, *action*, and *id*. The controller and action placeholders have default specified ("Home" and "Index", respectively), and the id placeholder is optional (by virtue of a "?" applied to it).</span></span> <span data-ttu-id="c7625-121">Die Konvention hier definierten Status, in denen der erste Teil einer Anforderung zu entsprechen, sollten auf den Namen des Controllers an, der zweite Teil der Aktion, und klicken Sie dann bei Bedarf eine dritte Teil repräsentiert einen Id-Parameter.</span><span class="sxs-lookup"><span data-stu-id="c7625-121">The convention defined here states that the first part of a request should correspond to the name of the controller, the second part to the action, and then if necessary a third part will represent an id parameter.</span></span> <span data-ttu-id="c7625-122">Herkömmliche Routen werden in der Regel an einem Ort für die Anwendung z. B. in der Methode konfigurieren, in der Start-Klasse definiert.</span><span class="sxs-lookup"><span data-stu-id="c7625-122">Conventional routes are typically defined in one place for the application, such as in the Configure method in the Startup class.</span></span>

<span data-ttu-id="c7625-123">Attributenrouten werden direkt auf Controllern und Aktionen angewendet, anstatt Global angegeben.</span><span class="sxs-lookup"><span data-stu-id="c7625-123">Attribute routes are applied to controllers and actions directly, rather than specified globally.</span></span> <span data-ttu-id="c7625-124">Dies hat den Vorteil, somit viel leichter auffindbar, wenn Sie sehen eine besondere Methode bedeutet, dass die Routinginformationen nicht an einer Stelle in der Anwendung beibehalten wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-124">This has the advantage of making them much more discoverable when you're looking at a particular method, but does mean that routing information is not kept in one place in the application.</span></span> <span data-ttu-id="c7625-125">Mit attributenrouten können Sie problemlos mehrere Routen für eine bestimmte Aktion angeben sowie Routen zwischen Controllern und Aktionen zu kombinieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-125">With attribute routes, you can easily specify multiple routes for a given action, as well as combine routes between controllers and actions.</span></span> <span data-ttu-id="c7625-126">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="c7625-126">For example:</span></span>

```csharp
[Route("Home")]
public class HomeController : Controller
{
    [Route("")] // Combines to define the route template "Home"
    [Route("Index")] // Combines to define route template "Home/Index"
    [Route("/")] // Does not combine, defines the route template ""
    public IActionResult Index() {}
```

<span data-ttu-id="c7625-127">Routen auf [HttpGet] angegeben werden können, und Trennen von ähnliche Attributen entfällt die Notwendigkeit hinzufügen [Route\] Attribute.</span><span class="sxs-lookup"><span data-stu-id="c7625-127">Routes can be specified on [HttpGet] and similar attributes, avoiding the need to add separate [Route\] attributes.</span></span> <span data-ttu-id="c7625-128">Attributenrouten können Token auch um die Notwendigkeit der Controller bzw. die Aktionsmethode Namen wiederholt zu verringern, wie unten dargestellt:</span><span class="sxs-lookup"><span data-stu-id="c7625-128">Attribute routes can also use tokens to reduce the need to repeat controller or action names, as shown below:</span></span>

```csharp
[Route("[controller\]")]
public class ProductsController : Controller
{
    [Route("")] // Matches 'Products'
    [Route("Index")] // Matches 'Products/Index'
    public IActionResult Index()
}
```

<span data-ttu-id="c7625-129">Core ASP.NET-MVC wird ausgeführt, sobald eine bestimmte Anforderung verfügt über eine Route zugeordnet wurde, aber bevor die Aktion wird aufgerufen, [modellbindung](https://docs.microsoft.com/aspnet/core/mvc/models/model-binding) und [modellüberprüfung](https://docs.microsoft.com/aspnet/core/mvc/models/validation) in der Anforderung.</span><span class="sxs-lookup"><span data-stu-id="c7625-129">Once a given request has been matched to a route, but before the action method is called, ASP.NET Core MVC will perform [model binding](https://docs.microsoft.com/aspnet/core/mvc/models/model-binding) and [model validation](https://docs.microsoft.com/aspnet/core/mvc/models/validation) on the request.</span></span> <span data-ttu-id="c7625-130">Wurden die modellbindung ist verantwortlich für das Konvertieren von eingehender HTTP-Daten in die Typen als Parameter der Aktionsmethode angegeben, die aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-130">Model binding is responsible for converting incoming HTTP data into the .NET types specified as parameters of the action method to be called.</span></span> <span data-ttu-id="c7625-131">Beispielsweise, wenn die Aktionsmethode einen Int-Id-Parameter erwartet, versucht wurden die modellbindung, geben Sie diesen Parameter aus einem Wert, der als Teil der Anforderung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="c7625-131">For example, if the action method expects an int id parameter, model binding will attempt to provide this parameter from a value provided as part of the request.</span></span> <span data-ttu-id="c7625-132">Sucht zu diesem Zweck wurden die modellbindung für Werte in ein bereitgestelltes Formular, Werte in der Route selbst und Abfragezeichenfolgen-Werte.</span><span class="sxs-lookup"><span data-stu-id="c7625-132">To do so, model binding looks for values in a posted form, values in the route itself, and query string values.</span></span> <span data-ttu-id="c7625-133">Angenommen, ein Id-Wert gefunden wird, wird es in eine ganze Zahl konvertiert werden vor der Aktionsmethode übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-133">Assuming an id value is found, it will be converted to an integer before being passed into the action method.</span></span>

<span data-ttu-id="c7625-134">Nach dem Binden des Modells, jedoch vor dem Aufrufen der Aktionsmethode erfolgt die modellüberprüfung.</span><span class="sxs-lookup"><span data-stu-id="c7625-134">After binding the model but before calling the action method, model validation occurs.</span></span> <span data-ttu-id="c7625-135">Modellvalidierung optionale Attribute auf den Typ des Modells verwendet und können Sie sicherstellen, dass das angegebene Modellobjekt bestimmte datenanforderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="c7625-135">Model validation uses optional attributes on the model type, and can help ensure that the provided model object conforms to certain data requirements.</span></span> <span data-ttu-id="c7625-136">Bestimmte Werte angegeben werden können, als erforderlich sind, oder auf eine bestimmte Länge oder einen numerischen Bereich beschränkt, usw.. Wenn Validierungsattribute angegeben sind, aber das Modell nicht der Anforderungen entspricht, die Eigenschaft ModelState.IsValid wird "false" sein und der Satz von Validierungsregeln fehlschlagen wird zum Senden an die anfordernde Client verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-136">Certain values may be specified as required, or limited to a certain length or numeric range, etc. If validation attributes are specified but the model does not conform to their requirements, the property ModelState.IsValid will be false, and the set of failing validation rules will be available to send to the client making the request.</span></span>

<span data-ttu-id="c7625-137">Bei Verwendung von modellvalidierung sollten Sie darauf achten, überprüfen Sie immer, dass das Modell gültig ist, vor dem Ausführen der Befehle Status ändern, um sicherzustellen, dass Ihre app durch ungültige Daten nicht beschädigt ist.</span><span class="sxs-lookup"><span data-stu-id="c7625-137">If you are using model validation, you should be sure to always check that the model is valid before performing any state-altering commands, to ensure your app is not corrupted by invalid data.</span></span> <span data-ttu-id="c7625-138">Sie können eine [Filter](https://docs.microsoft.com/aspnet/core/mvc/controllers/filters) neu hinzuzufügenden Code dafür in jeder Aktion zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="c7625-138">You can use a [filter](https://docs.microsoft.com/aspnet/core/mvc/controllers/filters) to avoid the need to add code for this in every action.</span></span> <span data-ttu-id="c7625-139">ASP.NET Core MVC-Filter bieten eine Möglichkeit, Gruppen von Anforderungen abfangen, damit allgemeine Richtlinien und querschnittliche Anmerkungen auf Basis eines targeted angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-139">ASP.NET Core MVC filters offer a way of intercepting groups of requests, so that common policies and cross-cutting concerns can be applied on a targeted basis.</span></span> <span data-ttu-id="c7625-140">Filter können auf einzelne Aktionen, die gesamte Controller oder global für eine Anwendung angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-140">Filters can be applied to individual actions, whole controllers, or globally for an application.</span></span>

<span data-ttu-id="c7625-141">Für Web-APIs, Core ASP.NET-MVC unterstützt [ *content-Aushandlung*](https://docs.microsoft.com/aspnet/core/mvc/models/formatting), sodass Anforderungen, um anzugeben, wie die Antworten formatiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="c7625-141">For web APIs, ASP.NET Core MVC supports [*content negotiation*](https://docs.microsoft.com/aspnet/core/mvc/models/formatting), allowing requests to specify how responses should be formatted.</span></span> <span data-ttu-id="c7625-142">Basierend auf den Header in der Anforderung angegeben, werden Aktionen, die Rückgabe von Daten die Antwort in XML, JSON oder ein anderes unterstütztes Format formatieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-142">Based on headers provided in the request, actions returning data will format the response in XML, JSON, or another supported format.</span></span> <span data-ttu-id="c7625-143">Dieses Feature ermöglicht die gleiche API von mehreren Clients mit verschiedenen datenformatanforderungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-143">This feature enables the same API to be used by multiple clients with different data format requirements.</span></span>

> ### <a name="references--mapping-requests-to-responses"></a><span data-ttu-id="c7625-144">Verweise – Zuordnen von Anforderungen zu Antworten</span><span class="sxs-lookup"><span data-stu-id="c7625-144">References – Mapping Requests to Responses</span></span>
> - <span data-ttu-id="c7625-145">**Routing zum Controlleraktionen**
> <https://docs.microsoft.com/aspnet/core/mvc/controllers/routing></span><span class="sxs-lookup"><span data-stu-id="c7625-145">**Routing to Controller Actions**
<https://docs.microsoft.com/aspnet/core/mvc/controllers/routing></span></span>
> - <span data-ttu-id="c7625-146">**Der modellbindung** https://docs.microsoft.com/aspnet/core/mvc/models/model-binding</span><span class="sxs-lookup"><span data-stu-id="c7625-146">**Model Binding** https://docs.microsoft.com/aspnet/core/mvc/models/model-binding</span></span>
> - <span data-ttu-id="c7625-147">**Modellüberprüfung**
> <https://docs.microsoft.com/aspnet/core/mvc/models/validation></span><span class="sxs-lookup"><span data-stu-id="c7625-147">**Model Validation**
<https://docs.microsoft.com/aspnet/core/mvc/models/validation></span></span>
> - <span data-ttu-id="c7625-148">**Filter** https://docs.microsoft.com/aspnet/core/mvc/controllers/filters</span><span class="sxs-lookup"><span data-stu-id="c7625-148">**Filters** https://docs.microsoft.com/aspnet/core/mvc/controllers/filters</span></span>

## <a name="working-with-dependencies"></a><span data-ttu-id="c7625-149">Arbeiten mit Abhängigkeiten</span><span class="sxs-lookup"><span data-stu-id="c7625-149">Working with Dependencies</span></span>

<span data-ttu-id="c7625-150">ASP.NET Core verfügt über integrierte Unterstützung für und intern nutzt eine als bekannte Technik [Abhängigkeitsinjektion](https://docs.microsoft.com/aspnet/core/fundamentals/dependency-injection).</span><span class="sxs-lookup"><span data-stu-id="c7625-150">ASP.NET Core has built-in support for and internally makes use of a technique known as [dependency injection](https://docs.microsoft.com/aspnet/core/fundamentals/dependency-injection).</span></span> <span data-ttu-id="c7625-151">Abhängigkeitsinjektion ist eine Technik, die losen Kopplung zwischen verschiedenen Teilen einer Anwendung aktiviert.</span><span class="sxs-lookup"><span data-stu-id="c7625-151">Dependency injection is a technique that enabled loose coupling between different parts of an application.</span></span> <span data-ttu-id="c7625-152">Großzügiger ist Kopplung ist wünschenswert, da es leichter, um Teile der Anwendung abfangen, indem zum Testen oder Austausch zu isolieren kann.</span><span class="sxs-lookup"><span data-stu-id="c7625-152">Looser coupling is desirable because it makes it easier to isolate parts of the application, allowing for testing or replacement.</span></span> <span data-ttu-id="c7625-153">Außerdem wird auch die Wahrscheinlichkeit, dass eine Änderung in einem Teil der Anwendung keine unerwarteten Auswirkungen, die an anderer Stelle in der Anwendung haben wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-153">It also makes it less likely that a change in one part of the application will have an unexpected impact somewhere else in the application.</span></span> <span data-ttu-id="c7625-154">Abhängigkeitsinjektion basiert auf dem Prinzip der Abhängigkeit Umkehrung und häufig Schlüssel zum Erreichen einer das Prinzip geöffnet bzw. geschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-154">Dependency injection is based on the dependency inversion principle, and is often key to achieving the open/closed principle.</span></span> <span data-ttu-id="c7625-155">Beim Auswerten der Funktionsweise der Anwendungsstatus mit seinen Abhängigkeiten, Vorsicht vor der [Fensterdekorationen](http://deviq.com/static-cling/) Geruch code, und speichern Sie die Aphorism "[neuerungen Kleben](http://ardalis.com/new-is-glue)."</span><span class="sxs-lookup"><span data-stu-id="c7625-155">When evaluating how your application works with its dependencies, beware of the [static cling](http://deviq.com/static-cling/) code smell, and remember the aphorism "[new is glue](http://ardalis.com/new-is-glue)."</span></span>

<span data-ttu-id="c7625-156">Fensterdekorationen tritt auf, wenn Ihre Klassen an statische Methoden Aufrufe oder Zugriff auf statische Eigenschaften, die möglichen Nebeneffekte bzw. Abhängigkeiten aufweisen.</span><span class="sxs-lookup"><span data-stu-id="c7625-156">Static cling occurs when your classes make calls to static methods, or access static properties, which have side effects or dependencies on infrastructure.</span></span> <span data-ttu-id="c7625-157">Beispielsweise haben eine Methode, die eine statische Methode, die wiederum mit einer Datenbank schreibt aufruft, ist die Methode, eng mit der Datenbank verbunden.</span><span class="sxs-lookup"><span data-stu-id="c7625-157">For example, if you have a method that calls a static method, which in turn writes to a database, your method is tightly coupled to the database.</span></span> <span data-ttu-id="c7625-158">Elemente, die diese Datenbankaufruf unterbrochen wird die Methode unterbrochen.</span><span class="sxs-lookup"><span data-stu-id="c7625-158">Anything that breaks that database call will break your method.</span></span> <span data-ttu-id="c7625-159">Testen von solchen Methoden ist bekanntermaßen schwierig, da es sich bei derartige Tests kommerziellen imitieren Bibliotheken zum Simulieren von statischen Aufrufe erfordern oder können nur mit einer Testdatenbank festliegen getestet werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-159">Testing such methods is notoriously difficult, since such tests either require commercial mocking libraries to mock the static calls, or can only be tested with a test database in place.</span></span> <span data-ttu-id="c7625-160">Statische aufrufen, deren Abhängigkeit von Infrastruktur, insbesondere solche, die nicht vollständig zustandslos sind sind in Ordnung, aufrufen und haben keinen Einfluss auf die Kopplung oder Prüfbarkeit (hinter Kopplung Code für den Aufruf der statischen selbst).</span><span class="sxs-lookup"><span data-stu-id="c7625-160">Static calls that don't have any dependence on infrastructure, especially those that are completely stateless, are fine to call and have no impact on coupling or testability (beyond coupling code to the static call itself).</span></span>

<span data-ttu-id="c7625-161">Viele Entwickler die Risiken einer Fensterdekorationen und globaler Zustand verstehen, aber Codeprobleme an bestimmte Implementierungen über die direkte Instanziierung werden weiterhin eng gekoppelt.</span><span class="sxs-lookup"><span data-stu-id="c7625-161">Many developers understand the risks of static cling and global state, but will still tightly couple their code to specific implementations through direct instantiation.</span></span> <span data-ttu-id="c7625-162">"Is Kleben neue" soll eine Erinnerung an diese Kopplung und nicht um eine allgemeine Condemnation die Verwendung des new-Schlüsselwort sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-162">"New is glue" is meant to be a reminder of this coupling, and not a general condemnation of the use of the new keyword.</span></span> <span data-ttu-id="c7625-163">Ebenso wie mit statischen Methodenaufrufen neue Instanzen von Typen, die keine externen Abhängigkeiten, in der Regel haben nicht eng Code zu verknüpfen, um Details zur Implementierung oder testen schwieriger machen.</span><span class="sxs-lookup"><span data-stu-id="c7625-163">Just as with static method calls, new instances of types that have no external dependencies typically do not tightly couple code to implementation details or make testing more difficult.</span></span> <span data-ttu-id="c7625-164">Aber jedes Mal, wenn eine Klasse instanziiert wird, nehmen nur einen kurzen Moment zu überlegen, ob er zum Programmieren der betreffenden Instanz in der jeweiligen Position sinnvoll ist, oder ob wäre es einen besseren Entwurf, um diese Instanz als Abhängigkeit anzufordern.</span><span class="sxs-lookup"><span data-stu-id="c7625-164">But each time a class is instantiated, take just a brief moment to consider whether it makes sense to hard-code that specific instance in that particular location, or if it would be a better design to request that instance as a dependency.</span></span>

### <a name="declare-your-dependencies"></a><span data-ttu-id="c7625-165">Deklarieren Sie die Abhängigkeiten</span><span class="sxs-lookup"><span data-stu-id="c7625-165">Declare Your Dependencies</span></span>

<span data-ttu-id="c7625-166">ASP.NET Core wird erstellt, um Methoden und Klassen deklarieren, ihre Abhängigkeiten, die sie als Argumente anfordern.</span><span class="sxs-lookup"><span data-stu-id="c7625-166">ASP.NET Core is built around having methods and classes declare their dependencies, requesting them as arguments.</span></span> <span data-ttu-id="c7625-167">ASP.NET-Anwendungen werden in der Regel in einer Startklasse eingerichtet. die selbst konfiguriert ist, um die Abhängigkeitsinjektion zu verschiedenen Zeitpunkten zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="c7625-167">ASP.NET applications are typically set up in a Startup class, which itself is configured to support dependency injection at several points.</span></span> <span data-ttu-id="c7625-168">Wenn die Start-Klasse einen Konstruktor verfügt, können sie Abhängigkeiten über den Konstruktor anfordern wie folgt:</span><span class="sxs-lookup"><span data-stu-id="c7625-168">If your Startup class has a constructor, it can request dependencies through the constructor, like so:</span></span>

```csharp
public class Startup
{
    public Startup(IHostingEnvironment env)
    {
        var builder = new ConfigurationBuilder()
        .SetBasePath(env.ContentRootPath)
        .AddJsonFile("appsettings.json", optional: false, reloadOnChange: true)
        .AddJsonFile(\$"appsettings.{env.EnvironmentName}.json", optional: true);
    }
}
```

<span data-ttu-id="c7625-169">Die Startklasse ist interessant, es keine expliziten typanforderungen dafür gibt.</span><span class="sxs-lookup"><span data-stu-id="c7625-169">The Startup class is interesting in that there are no explicit type requirements for it.</span></span> <span data-ttu-id="c7625-170">Sie erbt nicht von der eine spezielle Autostart-Basisklasse, noch ist es eine bestimmte Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-170">It doesn't inherit from a special Startup base class, nor does it implement any particular interface.</span></span> <span data-ttu-id="c7625-171">Kann ihm einen Konstruktor oder nicht, und Sie können angeben, wie viele Parameter für den Konstruktor wie gewünscht.</span><span class="sxs-lookup"><span data-stu-id="c7625-171">You can give it a constructor, or not, and you can specify as many parameters on the constructor as you want.</span></span> <span data-ttu-id="c7625-172">Zu Beginn der Webhost, den Sie für Ihre Anwendung konfiguriert haben, rufen die Start-Klasse, die Sie eingerichtet haben, um die Verwendung und wird Abhängigkeitsinjektion verwenden, um eventuelle weitere Abhängigkeiten zu aufzufüllen benötigten die Startklasse.</span><span class="sxs-lookup"><span data-stu-id="c7625-172">When the web host you've configured for your application starts, it will call the Startup class you've told it to use, and will use dependency injection to populate any dependencies the Startup class requires.</span></span> <span data-ttu-id="c7625-173">Natürlich, wenn Sie Parameter, die nicht in der von ASP.NET Core verwendeten Dienstecontainer konfiguriert ist anfordern, erhalten Sie eine Ausnahme, aber solange Sie sich an den Abhängigkeiten halten Container kennt, können Sie alles gewünschte anfordern.</span><span class="sxs-lookup"><span data-stu-id="c7625-173">Of course, if you request parameters that aren't configured in the services container used by ASP.NET Core, you'll get an exception, but as long as you stick to dependencies the container knows about, you can request anything you want.</span></span>

<span data-ttu-id="c7625-174">Abhängigkeitsinjektion wird bei Ihren apps ASP.NET Core rechts vom Start und erstellt, wenn Sie die Autostart-Instanz zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-174">Dependency injection is built into your ASP.NET Core apps right from the start, when you create the Startup instance.</span></span> <span data-ttu-id="c7625-175">Es ist nicht für die Startklasse beenden.</span><span class="sxs-lookup"><span data-stu-id="c7625-175">It doesn't stop there for the Startup class.</span></span> <span data-ttu-id="c7625-176">Sie können auch die Abhängigkeiten in der Methode konfigurieren anfordern:</span><span class="sxs-lookup"><span data-stu-id="c7625-176">You can also request dependencies in the Configure method:</span></span>

```csharp
public void Configure(IApplicationBuilder app,
    IHostingEnvironment env,
    ILoggerFactory loggerFactory)
{

}
```

<span data-ttu-id="c7625-177">Die ConfigureServices-Methode ist die Ausnahme zu diesem Verhalten. Es muss nur ein Parameter vom Typ IServiceCollection dauern.</span><span class="sxs-lookup"><span data-stu-id="c7625-177">The ConfigureServices method is the exception to this behavior; it must take just one parameter of type IServiceCollection.</span></span> <span data-ttu-id="c7625-178">Er muss nicht wirklich unterstützen die Abhängigkeitsinjektion, da einerseits verantwortlich ist für den Container für Objekte hinzugefügt und auf dem anderen sie Zugriff auf alle derzeit konfigurierten Diensten über den IServiceCollection-Parameter hat.</span><span class="sxs-lookup"><span data-stu-id="c7625-178">It doesn't really need to support dependency injection, since on the one hand it is responsible for adding objects to the services container, and on the other it has access to all currently configured services via the IServiceCollection parameter.</span></span> <span data-ttu-id="c7625-179">Daher können Sie mit Abhängigkeiten, die in der Auflistung des ASP.NET Core-Dienste in jedem Teil der Start-Klasse, die erforderlichen Dienst als Parameter anfordern oder Arbeiten mit der IServiceCollection in ConfigureServices definierten arbeiten.</span><span class="sxs-lookup"><span data-stu-id="c7625-179">Thus, you can work with dependencies defined in the ASP.NET Core services collection in every part of the Startup class, either by requesting the needed service as a parameter or by working with the IServiceCollection in ConfigureServices.</span></span>

> [!NOTE]
> <span data-ttu-id="c7625-180">Sie müssen sicherstellen, dass bestimmte Dienste sind auf die Start-Klasse verfügbar, konfigurieren Sie sie mithilfe von WebHostBuilder und der zugehörigen ConfigureServices-Methode.</span><span class="sxs-lookup"><span data-stu-id="c7625-180">If you need to ensure certain services are available to your Startup class, you can configure them using WebHostBuilder and its ConfigureServices method.</span></span>

<span data-ttu-id="c7625-181">Die Startklasse ist ein Modell für wie andere Teile der Anwendung ASP.NET Core von Domänencontrollern auf Middleware zu filtern, um eigene Dienste strukturieren werden sollte.</span><span class="sxs-lookup"><span data-stu-id="c7625-181">The Startup class is a model for how you should structure other parts of your ASP.NET Core application, from Controllers to Middleware to Filters to your own Services.</span></span> <span data-ttu-id="c7625-182">In jedem Fall befolgen Sie die [expliziten Abhängigkeiten Prinzip](http://deviq.com/explicit-dependencies-principle/), Ihre Abhängigkeiten anfordern statt direkt erstellen und die Nutzung Abhängigkeitsinjektion in der gesamten Anwendung.</span><span class="sxs-lookup"><span data-stu-id="c7625-182">In each case, you should follow the [Explicit Dependencies Principle](http://deviq.com/explicit-dependencies-principle/), requesting your dependencies rather than directly creating them, and leveraging dependency injection throughout your application.</span></span> <span data-ttu-id="c7625-183">Achten Sie darauf, dass der, wo und wie Sie nicht direkt instanziieren Implementierungen, insbesondere Dienste und Objekte, die mit der Infrastruktur arbeiten oder nachteiligen Auswirkungen haben.</span><span class="sxs-lookup"><span data-stu-id="c7625-183">Be careful of where and how you directly instantiate implementations, especially services and objects that work with infrastructure or have side effects.</span></span> <span data-ttu-id="c7625-184">Bevorzugen Sie arbeiten mit Abstraktionen in Ihrer Anwendung wichtigsten definiert und als Argumente an hartcodierten Verweise auf spezifische Implementierungstypen übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-184">Prefer working with abstractions defined in your application core and passed in as arguments to hardcoding references to specific implementation types.</span></span>

## <a name="structuring-the-application"></a><span data-ttu-id="c7625-185">Strukturieren die Anwendung</span><span class="sxs-lookup"><span data-stu-id="c7625-185">Structuring the Application</span></span>

<span data-ttu-id="c7625-186">Aufgrund eines monolithischen Anwendungen haben normalerweise einen einzigen Einstiegspunkt.</span><span class="sxs-lookup"><span data-stu-id="c7625-186">Monolithic applications typically have a single entry point.</span></span> <span data-ttu-id="c7625-187">Bei einer ASP.NET Core-Web-Anwendung wird der Einstiegspunkt das Webprojekt ASP.NET Core sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-187">In the case of an ASP.NET Core web application, the entry point will be the ASP.NET Core web project.</span></span> <span data-ttu-id="c7625-188">Allerdings impliziert dies nicht, dass die Projektmappe nur ein einzelnes Projekt bestehen sollte.</span><span class="sxs-lookup"><span data-stu-id="c7625-188">However, that doesn't mean the solution should consist of just a single project.</span></span> <span data-ttu-id="c7625-189">Es ist nützlich, um die Anwendung in den verschiedenen Ebenen um führen die Trennung von Anliegen aufteilen.</span><span class="sxs-lookup"><span data-stu-id="c7625-189">It's useful to break up the application into different layers in order to follow separation of concerns.</span></span> <span data-ttu-id="c7625-190">Sobald in Ebenen unterteilt, ist es hilfreich, die Ordner für Projekte, trennen Sie nützlich sein können, die eine bessere Kapselung zu erzielen, hinausgehen.</span><span class="sxs-lookup"><span data-stu-id="c7625-190">Once broken up into layers, it's helpful to go beyond folders to separate projects, which can help achieve better encapsulation.</span></span> <span data-ttu-id="c7625-191">Der beste Ansatz für diese Ziele mit einer Anwendung ASP.NET Core ist eine Variation der Clean-Architektur in Kapitel 5 erläutert.</span><span class="sxs-lookup"><span data-stu-id="c7625-191">The best approach to achieve these goals with an ASP.NET Core application is a variation of the Clean Architecture discussed in chapter 5.</span></span> <span data-ttu-id="c7625-192">Nach dieser Ansatz wird die Anwendung Lösung separate Bibliotheken für die UI-Infrastruktur und ApplicationCore bestehen.</span><span class="sxs-lookup"><span data-stu-id="c7625-192">Following this approach, the application's solution will be comprised of separate libraries for the UI, Infrastructure, and ApplicationCore.</span></span>

<span data-ttu-id="c7625-193">Zusätzlich zu diesen Projekten separate Testprojekte sind, enthalten ebenfalls (Test ist im Kapitel 9 erläutert).</span><span class="sxs-lookup"><span data-stu-id="c7625-193">In addition to these projects, separate test projects are included as well (Testing is discussed in Chapter 9).</span></span>

<span data-ttu-id="c7625-194">Die Anwendung das Objektmodell und Schnittstellen sollten im ApplicationCore Projekt gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-194">The application's object model and interfaces should be placed in the ApplicationCore project.</span></span> <span data-ttu-id="c7625-195">Dieses Projekt muss so wenig Abhängigkeiten wie möglich, und andere Projekte in der Projektmappe werden darauf verweisen.</span><span class="sxs-lookup"><span data-stu-id="c7625-195">This project will have as few dependencies as possible, and the other projects in the solution will reference it.</span></span> <span data-ttu-id="c7625-196">Business-Entitäten, die beibehalten werden müssen werden in das Projekt ApplicationCore definiert, ebenso wie Dienste, die nicht direkt von der Infrastruktur abhängen.</span><span class="sxs-lookup"><span data-stu-id="c7625-196">Business entities that need to be persisted are defined in the ApplicationCore project, as are services that do not directly depend on infrastructure.</span></span>

<span data-ttu-id="c7625-197">Implementierungsdetails wie wie die Persistenz ausgeführt wird oder wie Benachrichtigungen möglicherweise an einen Benutzer gesendet werden, bleiben im Infrastructure-Projekt.</span><span class="sxs-lookup"><span data-stu-id="c7625-197">Implementation details, such as how persistence is performed or how notifications might be sent to a user, are kept in the Infrastructure project.</span></span> <span data-ttu-id="c7625-198">Dieses Projekt implementierungsspezifische-Paketen, wie z. B. Entity Framework Core verweist, aber die Details zu dieser Implementierungen außerhalb des Projekts sollten nicht verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="c7625-198">This project will reference implementation-specific packages such as Entity Framework Core, but should not expose details about these implementations outside of the project.</span></span> <span data-ttu-id="c7625-199">Infrastrukturdienste und Repositorys sollten Schnittstellen implementieren, die im Projekt ApplicationCore definiert sind, und ihre Implementierung der Persistenz sind verantwortlich für das Abrufen und Speichern von Entitäten, die in ApplicationCore definiert.</span><span class="sxs-lookup"><span data-stu-id="c7625-199">Infrastructure services and repositories should implement interfaces that are defined in the ApplicationCore project, and its persistence implementations are responsible for retrieving and storing entities defined in ApplicationCore.</span></span>

<span data-ttu-id="c7625-200">ASP.NET Core-Projekt selbst ist verantwortlich für die Benutzeroberfläche Ebenen bedenken, jedoch sollten keine Details zu Business Logic und Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="c7625-200">The ASP.NET Core project itself is responsible for any UI level concerns, but should not include business logic or infrastructure details.</span></span> <span data-ttu-id="c7625-201">In der Tat darf nicht im Idealfall es auch eine Abhängigkeit auf Infrastructure-Projekt verfügen, das hilft sicherzustellen, dass keine Abhängigkeit zwischen den zwei Projekten versehentlich eingeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-201">In fact, ideally it shouldn't even have a dependency on the Infrastructure project, which will help ensure no dependency between the two projects is introduced accidentally.</span></span> <span data-ttu-id="c7625-202">Dies kann erreicht werden, mit einem Drittanbieter-DI-Container wie StructureMap, dadurch können Sie DI-Regeln in der Registrierung von Klassen in jedem Projekt definieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-202">This can be achieved using a third-party DI container like StructureMap, which allows you to define DI rules in Registry classes in each project.</span></span>

<span data-ttu-id="c7625-203">Einen anderen Ansatz für die Anwendung von Implementierungsdetails zu trennen, besteht darin, die Anwendung Aufruf Microservices, vielleicht in einzelne Docker-Container bereitgestellt haben.</span><span class="sxs-lookup"><span data-stu-id="c7625-203">Another approach to decoupling the application from implementation details is to have the application call microservices, perhaps deployed in individual Docker containers.</span></span> <span data-ttu-id="c7625-204">Dies bietet noch stärkere Trennung von Anliegen und die Entkopplung als DI zwischen zwei Projekte nutzen, hat jedoch zusätzliche Komplexität.</span><span class="sxs-lookup"><span data-stu-id="c7625-204">This provides even greater separation of concerns and decoupling than leveraging DI between two projects, but has additional complexity.</span></span>

### <a name="feature-organization"></a><span data-ttu-id="c7625-205">Feature-Organisation</span><span class="sxs-lookup"><span data-stu-id="c7625-205">Feature Organization</span></span>

<span data-ttu-id="c7625-206">Standardmäßig organisieren ASP.NET Core-Anwendungen, deren Ordnerstruktur Controller und Ansichten und häufig ViewModels aufgenommen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="c7625-206">By default, ASP.NET Core applications organize their folder structure to include Controllers and Views, and frequently ViewModels.</span></span> <span data-ttu-id="c7625-207">Clientseitiger Code zur Unterstützung dieser Strukturen serverseitige wird im Ordner "Wwwroot" in der Regel separat gespeichert.</span><span class="sxs-lookup"><span data-stu-id="c7625-207">Client-side code to support these server-side structures is typically stored separately in the wwwroot folder.</span></span> <span data-ttu-id="c7625-208">Allerdings können große Anwendungen Probleme für diese Organisation auftreten, da arbeiten häufig auf eine gegebene Funktion erforderlich ist, die zwischen diesen Ordnern springen.</span><span class="sxs-lookup"><span data-stu-id="c7625-208">However, large applications may encounter problems with this organization, since working on any given feature often requires jumping between these folders.</span></span> <span data-ttu-id="c7625-209">Dadurch wird mehr schwierig, die Anzahl der Dateien und Unterordner im Ordner "Jeder" wächst, was zu sehr viel systemverarbeitungszeit in einen Bildlauf durch die Projektmappen-Explorer.</span><span class="sxs-lookup"><span data-stu-id="c7625-209">This gets more and more difficult as the number of files and subfolders in each folder grows, resulting in a great deal of scrolling through Solution Explorer.</span></span> <span data-ttu-id="c7625-210">Eine Lösung für dieses Problem ist, zum Organisieren von Anwendungscode durch *Feature* anstatt von Dateityp.</span><span class="sxs-lookup"><span data-stu-id="c7625-210">One solution to this problem is to organize application code by *feature* instead of by file type.</span></span> <span data-ttu-id="c7625-211">Dieser Organisationseinheit Stil ist in der Regel als Featureordner oder Funktion Slices bezeichnet (Siehe auch: [vertikale Slices](http://deviq.com/vertical-slices/)).</span><span class="sxs-lookup"><span data-stu-id="c7625-211">This organizational style is typically referred to as feature folders or feature slices (see also: [Vertical Slices](http://deviq.com/vertical-slices/)).</span></span>

<span data-ttu-id="c7625-212">ASP.NET Core MVC unterstützt die Bereiche für diesen Zweck.</span><span class="sxs-lookup"><span data-stu-id="c7625-212">ASP.NET Core MVC supports Areas for this purpose.</span></span> <span data-ttu-id="c7625-213">Bereiche können Sie separate Sätze von Controllern und Ansichten Ordner (sowie alle zugeordneten Modelle) in jedem Bereichsordner erstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-213">Using areas, you can create separate sets of Controllers and Views folders (as well as any associated models) in each Area folder.</span></span> <span data-ttu-id="c7625-214">Abbildung 7 – 1 zeigt eine Beispiel-Ordnerstruktur, die mithilfe von Bereichen.</span><span class="sxs-lookup"><span data-stu-id="c7625-214">Figure 7-1 shows an example folder structure, using Areas.</span></span>

![](./media/image7-1.png)

<span data-ttu-id="c7625-215">Abbildung 7 – 1 Bereich Beispielorganisation</span><span class="sxs-lookup"><span data-stu-id="c7625-215">Figure 7-1 Sample Area Organization</span></span>

<span data-ttu-id="c7625-216">Wenn Sie Bereiche verwenden zu können, müssen Sie Attribute verwenden, auf um Ihren Domänencontrollern mit dem Namen des Bereichs zu ergänzen, zu dem sie gehören:</span><span class="sxs-lookup"><span data-stu-id="c7625-216">When using Areas, you must use attributes to decorate your controllers with the name of the area to which they belong:</span></span>

```csharp
[Area("Catalog")]
public class HomeController
{}
```

<span data-ttu-id="c7625-217">Sie müssen auch so Ihre Routen Bereich Unterstützung hinzu:</span><span class="sxs-lookup"><span data-stu-id="c7625-217">You also need to add area support to your routes:</span></span>

```csharp
app.UseMvc(routes =>
{
    // Areas support
    routes.MapRoute(
    name: "areaRoute",
    template: "{area:exists}/{controller=Home}/{action=Index}/{id?}");
    routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
});
```

<span data-ttu-id="c7625-218">Über die integrierte Unterstützung für Bereiche können Sie auch eigene Schritt die Ordnerstruktur und die Konventionen anstelle von Attributen und benutzerdefinierten Routen.</span><span class="sxs-lookup"><span data-stu-id="c7625-218">In addition to the built-in support for Areas, you can also use your own folder structure, and conventions in place of attributes and custom routes.</span></span> <span data-ttu-id="c7625-219">Dies können Sie Featureordner aufweisen, die separate Ordner für Ansichten, Controller, durch die Trennung der Hierarchie flachere und erleichtert es, alle Dateien in einem einzigen Ort für jede Funktion anzuzeigen usw. enthalten waren.</span><span class="sxs-lookup"><span data-stu-id="c7625-219">This would allow you to have feature folders that didn't include separate folders for Views, Controllers, etc., keeping the hierarchy flatter and making it easier to see all related files in a single place for each feature.</span></span>

<span data-ttu-id="c7625-220">ASP.NET Core werden mit integrierten Konvention Typen um sein Verhalten zu steuern.</span><span class="sxs-lookup"><span data-stu-id="c7625-220">ASP.NET Core uses built-in convention types to control its behavior.</span></span> <span data-ttu-id="c7625-221">Sie können ändern oder ersetzen diesen Konventionen.</span><span class="sxs-lookup"><span data-stu-id="c7625-221">You can modify or replace these conventions.</span></span> <span data-ttu-id="c7625-222">Beispielsweise können Sie eine Konvention erstellen, die automatisch den Namen der Funktion für einen bestimmten Controller basierend auf dessen Namespace erhält (die in der Regel in den Ordner, in dem sich der Controller befindet, korreliert):</span><span class="sxs-lookup"><span data-stu-id="c7625-222">For example, you can create a convention that will automatically get the feature name for a given controller based on its namespace (which typically correlates to the folder in which the controller is located):</span></span>

```csharp
FeatureConvention : IControllerModelConvention
{
    public void Apply(ControllerModel controller)
    {
        controller.Properties.Add("feature",
        GetFeatureName(controller.ControllerType));
    }

    private string GetFeatureName(TypeInfo controllerType)
    {
        string[] tokens = controllerType.FullName.Split('.');
        if (!tokens.Any(t => t == "Features")) return "";
        string featureName = tokens
        .SkipWhile(t => !t.Equals("features",
        StringComparison.CurrentCultureIgnoreCase))
        .Skip(1)
        .Take(1)
        .FirstOrDefault();
        return featureName;
    }
}
```

<span data-ttu-id="c7625-223">Anschließend geben Sie an dieser Konvention als eine Option, wenn Sie Ihre Anwendung in ConfigureServices Unterstützung für MVC hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="c7625-223">You then specify this convention as an option when you add support for MVC to your application in ConfigureServices:</span></span>

```csharp
services.AddMvc(o => o.Conventions.Add(new FeatureConvention()));
```

<span data-ttu-id="c7625-224">ASP.NET Core MVC wird auch eine Konvention zum Suchen von Ansichten verwendet.</span><span class="sxs-lookup"><span data-stu-id="c7625-224">ASP.NET Core MVC also uses a convention to locate views.</span></span> <span data-ttu-id="c7625-225">Sie können es mit einer benutzerdefinierten Konvention überschreiben, sodass Ansichten in Ihre Featureordner (mit dem Namen der Funktion durch die FeatureConvention oben aufgeführten) gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-225">You can override it with a custom convention so that views will be located in your feature folders (using the feature name provided by the FeatureConvention, above).</span></span> <span data-ttu-id="c7625-226">Können Sie weitere Informationen zu diesen Ansatz und Herunterladen von ein funktionstüchtiges Beispiel aus dem MSDN-Artikel [Feature Slices für ASP.NET Core MVC](https://msdn.microsoft.com/magazine/mt763233.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7625-226">You can learn more about this approach and download a working sample from the MSDN article, [Feature Slices for ASP.NET Core MVC](https://msdn.microsoft.com/magazine/mt763233.aspx).</span></span>

### <a name="cross-cutting-concerns"></a><span data-ttu-id="c7625-227">Querschnittliche Sicherheitsrisiken</span><span class="sxs-lookup"><span data-stu-id="c7625-227">Cross-Cutting Concerns</span></span>

<span data-ttu-id="c7625-228">Anwendungen hinausgeht, wird es zunehmend wichtig, verlagern Sie querschnittliche Bedenken Beseitigung von Duplikaten und Konsistenz zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="c7625-228">As applications grow, it becomes increasingly important to factor out cross-cutting concerns to eliminate duplication and maintain consistency.</span></span> <span data-ttu-id="c7625-229">Einige Beispiele für querschnittliche Begriffe in ASP.NET Core-Anwendungen sind Authentifizierung, Modell Validierungsregeln Zwischenspeichern der Ausgabe und Fehler zu behandeln, obwohl es gibt noch viele andere.</span><span class="sxs-lookup"><span data-stu-id="c7625-229">Some examples of cross-cutting concerns in ASP.NET Core applications are authentication, model validation rules, output caching, and error handling, though there are many others.</span></span> <span data-ttu-id="c7625-230">ASP.NET Core MVC [Filter](https://docs.microsoft.com/aspnet/core/mvc/controllers/filters) ermöglichen es Ihnen, Code vor oder nach der bestimmte Schritte in der Verarbeitungspipeline Anforderung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="c7625-230">ASP.NET Core MVC [filters](https://docs.microsoft.com/aspnet/core/mvc/controllers/filters) allow you to run code before or after certain steps in the request processing pipeline.</span></span> <span data-ttu-id="c7625-231">Ein Filter kann z. B. vor und nach der modellbindung, die vor und nach einer Aktion oder vor und nach einer Aktion Ergebnis führen.</span><span class="sxs-lookup"><span data-stu-id="c7625-231">For instance, a filter can run before and after model binding, before and after an action, or before and after an action's result.</span></span> <span data-ttu-id="c7625-232">Einen Autorisierungsfilter können auch zum Steuern des Zugriffs auf den Rest der Pipeline.</span><span class="sxs-lookup"><span data-stu-id="c7625-232">You can also use an authorization filter to control access to the rest of the pipeline.</span></span> <span data-ttu-id="c7625-233">Abbildung 7 – 2 zeigt fordern wie Ausführung Flüsse gefiltert, wenn konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="c7625-233">Figures 7-2 shows how request execution flows through filters, if configured.</span></span>

![Die Anforderung wird über den Autorisierungsfilter, Ressourcenfilter Modell binden, Aktionsfilter, Ausführen von Aktionen und Aktion Ergebniskonvertierung, Ausnahmefilter, Ergebnisfilter und Ergebnis Ausführung verarbeitet.](./media/image7-2.png)

<span data-ttu-id="c7625-236">Abbildung 7-2-anforderungsausführung durch Filter und Anforderungspipeline.</span><span class="sxs-lookup"><span data-stu-id="c7625-236">Figure 7-2 Request execution through filters and request pipeline.</span></span>

<span data-ttu-id="c7625-237">Filter werden in der Regel als Attribute implementiert, damit Sie diese Controllern oder Aktionen anwenden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-237">Filters are usually implemented as attributes, so you can apply them controllers or actions.</span></span> <span data-ttu-id="c7625-238">Wenn auf diese Weise, auf der Ebene überschreiben oder Build auf Filtern auf Controllerebene, angegebene angegebenen Filter hinzugefügt, die selbst globale Filter außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="c7625-238">When added in this fashion, filters specified at the action level override or build upon filters specified at the controller level, which themselves override global filters.</span></span> <span data-ttu-id="c7625-239">Z. B. die \[Route\] Attribut kann verwendet werden, um Routen zwischen Controllern und Aktionen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-239">For example, the \[Route\] attribute can be used to build up routes between controllers and actions.</span></span> <span data-ttu-id="c7625-240">Ebenso kann Autorisierung werden auf Controllerebene konfiguriert und dann überschrieben, indem einzelne Aktionen, wie im folgende Beispiel veranschaulicht:</span><span class="sxs-lookup"><span data-stu-id="c7625-240">Likewise, authorization can be configured at the controller level, and then overridden by individual actions, as the following sample demonstrates:</span></span>

```csharp
[Authorize]
public class AccountController : Controller

{
    [AllowAnonymous]
    public async Task<IActionResult> Login() {}
    public async Task<IActionResult> ForgotPassword() {}
}
```

<span data-ttu-id="c7625-241">Die erste Methode, Login, verwendet den AllowAnonymous-Filter (Attribut), das Autorisieren Filter auf Controllerebene überschreiben.</span><span class="sxs-lookup"><span data-stu-id="c7625-241">The first method, Login, uses the AllowAnonymous filter (attribute) to override the Authorize filter set at the controller level.</span></span> <span data-ttu-id="c7625-242">Die ForgotPassword-Aktion (und eine andere Aktion in der Klasse, die ein AllowAnonymous-Attribut besitzt) ist eine authentifizierte Anforderung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="c7625-242">The ForgotPassword action (and any other action in the class that doesn't have an AllowAnonymous attribute) will require an authenticated request.</span></span>

<span data-ttu-id="c7625-243">Filter können verwendet werden, um Duplikate in Form von häufige Fehler bei der Verarbeitung von Richtlinien für APIs zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="c7625-243">Filters can be used to eliminate duplication in the form of common error handling policies for APIs.</span></span> <span data-ttu-id="c7625-244">Eine typische API-Richtlinie werden z. B. NotFound Antwort auf Anforderungen mit Verweisen auf die Schlüssel, die nicht vorhanden sind, und eine Antwort BadRequest-Objekts zurück, wenn die modellvalidierung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="c7625-244">For example, a typical API policy is to return a NotFound response to requests referencing keys that do not exist, and a BadRequest response if model validation fails.</span></span> <span data-ttu-id="c7625-245">Das folgende Beispiel zeigt diese zwei Richtlinien in Aktion:</span><span class="sxs-lookup"><span data-stu-id="c7625-245">The following example demonstrates these two policies in action:</span></span>

```csharp
[HttpPut("{id}")]
public async Task<IActionResult> Put(int id, [FromBody]Author author)
{
    if ((await _authorRepository.ListAsync()).All(a => a.Id != id))
    {
        return NotFound(id);
    }
    if (!ModelState.IsValid)
    {
        return BadRequest(ModelState);
    }
    author.Id = id;
    await _authorRepository.UpdateAsync(author);
    return Ok();
}
```

<span data-ttu-id="c7625-246">Zulassen Sie nicht die Aktionsmethoden mit einem bedingten Code wie überladen werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-246">Don't allow your action methods to become cluttered with conditional code like this.</span></span> <span data-ttu-id="c7625-247">Ziehen Sie stattdessen die Richtlinien in Filtern, die auf einen Bedarf angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-247">Instead, pull the policies into filters that can be applied on an as-needed basis.</span></span> <span data-ttu-id="c7625-248">In diesem Beispiel kann die Modell-Überprüfung, die einem beliebigen Zeitpunkt erfolgen soll, ein Befehl an der API gesendet wird, durch das folgende Attribut ersetzt werden:</span><span class="sxs-lookup"><span data-stu-id="c7625-248">In this example, the model validation check, which should occur any time a command is sent to the API, can be replaced by the following attribute:</span></span>

```csharp
public class ValidateModelAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext context)
    {
        if (!context.ModelState.IsValid)
        {
            context.Result = new BadRequestObjectResult(context.ModelState);
        }
    }
}
```

<span data-ttu-id="c7625-249">Ebenso kann ein Filter zum Überprüfen, ob ein Datensatz vorhanden ist und Fehler 404 zurückgegeben werden, bevor die Aktion ausgeführt wird, entfällt die Erfordernis zum Ausführen dieser Tests in der Aktion verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-249">Likewise, a filter can be used to check if a record exists and return a 404 before the action is executed, eliminating the need to perform these checks in the action.</span></span> <span data-ttu-id="c7625-250">Sobald Sie allgemeine Konventionen herausgezogen und organisiert die Projektmappe Infrastruktur Code und Geschäftslogik von der Benutzeroberfläche getrennt haben, sollte Ihre MVC-Aktionsmethoden sehr dünne sein:</span><span class="sxs-lookup"><span data-stu-id="c7625-250">Once you've pulled out common conventions and organized your solution to separate infrastructure code and business logic from your UI, your MVC action methods should be extremely thin:</span></span>

```csharp
// PUT api/authors/2/5
[HttpPut("{id}")]
[ValidateAuthorExists]
public async Task<IActionResult> Put(int id, [FromBody]Author author)
{
    await _authorRepository.UpdateAsync(author);
    return Ok();
}
```

<span data-ttu-id="c7625-251">Erfahren Sie mehr zu implementieren von Filtern und Laden Sie ein funktionstüchtiges Beispiel aus dem MSDN-Artikel [Real World ASP.NET Core MVC-Filter](https://msdn.microsoft.com/magazine/mt767699.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7625-251">You can read more about implementing filters and download a working sample from the MSDN article, [Real World ASP.NET Core MVC Filters](https://msdn.microsoft.com/magazine/mt767699.aspx).</span></span>

> ### <a name="references--structuring-applications"></a><span data-ttu-id="c7625-252">Verweise – Strukturieren von Anwendungen</span><span class="sxs-lookup"><span data-stu-id="c7625-252">References – Structuring Applications</span></span>
> - <span data-ttu-id="c7625-253">**Bereiche**</span><span class="sxs-lookup"><span data-stu-id="c7625-253">**Areas**</span></span>  
> <span data-ttu-id="c7625-254"><https://docs.Microsoft.com/ASPNET/Core/MVC/Controllers/Areas></span><span class="sxs-lookup"><span data-stu-id="c7625-254"><https://docs.microsoft.com/aspnet/core/mvc/controllers/areas></span></span>
> - <span data-ttu-id="c7625-255">**MSDN – Feature Slices für ASP.NET Core MVC**
>  <https://msdn.microsoft.com/magazine/mt763233.aspx></span><span class="sxs-lookup"><span data-stu-id="c7625-255">**MSDN – Feature Slices for ASP.NET Core MVC**
<https://msdn.microsoft.com/magazine/mt763233.aspx></span></span>
> - <span data-ttu-id="c7625-256">**Filter**</span><span class="sxs-lookup"><span data-stu-id="c7625-256">**Filters**</span></span>  
> <span data-ttu-id="c7625-257"><https://docs.Microsoft.com/ASPNET/Core/MVC/Controllers/Filters></span><span class="sxs-lookup"><span data-stu-id="c7625-257"><https://docs.microsoft.com/aspnet/core/mvc/controllers/filters></span></span>
> - <span data-ttu-id="c7625-258">**MSDN – realen Core ASP.NET MVC-Filter**</span><span class="sxs-lookup"><span data-stu-id="c7625-258">**MSDN – Real World ASP.NET Core MVC Filters**</span></span>  
> <span data-ttu-id="c7625-259"><https://msdn.Microsoft.com/magazine/mt767699.aspx></span><span class="sxs-lookup"><span data-stu-id="c7625-259"><https://msdn.microsoft.com/magazine/mt767699.aspx></span></span>

## <a name="security"></a><span data-ttu-id="c7625-260">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="c7625-260">Security</span></span>

<span data-ttu-id="c7625-261">Sichern von Webanwendungen ist ein komplexes Thema, mit dem viele Aspekte zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="c7625-261">Securing web applications is a large topic, with many considerations.</span></span> <span data-ttu-id="c7625-262">Auf der grundlegendsten Ebene wird die Sicherheit sicherstellen, dass Sie wissen, wer eine gegebene Anforderung stammt, und dann sicherstellen, dass die Anforderung nur auf Ressourcen zugreifen kann, sollten es.</span><span class="sxs-lookup"><span data-stu-id="c7625-262">At its most basic level, security involves ensuring you know who a given request is coming from, and then ensuring that that request only has access to resources it should.</span></span> <span data-ttu-id="c7625-263">Authentifizierung versteht man das Vergleichen von Anmeldeinformationen mit einer Anforderung an die in einem vertrauenswürdigen Datenspeicher, um festzustellen, ob die Anforderung als stammen aus einer bekannten Entität behandelt werden soll.</span><span class="sxs-lookup"><span data-stu-id="c7625-263">Authentication is the process of comparing credentials provided with a request to those in a trusted data store, to see if the request should be treated as coming from a known entity.</span></span> <span data-ttu-id="c7625-264">Autorisierung versteht man das Einschränken des Zugriffs auf bestimmte Ressourcen je nach Benutzeridentität.</span><span class="sxs-lookup"><span data-stu-id="c7625-264">Authorization is the process of restricting access to certain resources based on user identity.</span></span> <span data-ttu-id="c7625-265">Eine dritte Sicherheitsbedenken schützt Anforderungen auf Abhören von Drittanbietern, die für die sollten Sie mindestens [stellen Sie sicher, dass SSL, von der Anwendung verwendet wird](https://docs.microsoft.com/aspnet/core/security/enforcing-ssl).</span><span class="sxs-lookup"><span data-stu-id="c7625-265">A third security concern is protecting requests from eavesdropping by third parties, for which you should at least [ensure that SSL is used by your application](https://docs.microsoft.com/aspnet/core/security/enforcing-ssl).</span></span>

### <a name="authentication"></a><span data-ttu-id="c7625-266">Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="c7625-266">Authentication</span></span>

<span data-ttu-id="c7625-267">ASP.NET Core Identität ist eine Mitgliedschaftssystem, das Sie verwenden können, um die Anmeldefunktionalität für Ihre Anwendung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="c7625-267">ASP.NET Core Identity is a membership system you can use to support login functionality for your application.</span></span> <span data-ttu-id="c7625-268">Es wurde Unterstützung für lokale Benutzerkonten sowie externe Anmeldung anbieterunterstützung von Anbietern wie Microsoft Account, Twitter, Facebook, Google und vieles mehr.</span><span class="sxs-lookup"><span data-stu-id="c7625-268">It has support for local user accounts as well as external login provider support from providers like Microsoft Account, Twitter, Facebook, Google, and more.</span></span> <span data-ttu-id="c7625-269">Ihre Anwendung kann zusätzlich zu ASP.NET Core Identity, Windows-Authentifizierung verwenden, oder ein Drittanbieter-Identitätsanbieter wie [Identity Server](https://github.com/IdentityServer/IdentityServer4).</span><span class="sxs-lookup"><span data-stu-id="c7625-269">In addition to ASP.NET Core Identity, your application can use windows authentication, or a third-party identity provider like [Identity Server](https://github.com/IdentityServer/IdentityServer4).</span></span>

<span data-ttu-id="c7625-270">ASP.NET Core Identität ist in Vorlagen für neue Projekte enthalten, wenn der einzelne Benutzerkonten-Option ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="c7625-270">ASP.NET Core Identity is included in new project templates if the Individual User Accounts option is selected.</span></span> <span data-ttu-id="c7625-271">Diese Vorlage enthält Unterstützung für die Registrierung, Anmeldung, externer Anmeldungen, vergessene Kennwörter und zusätzliche Funktionen.</span><span class="sxs-lookup"><span data-stu-id="c7625-271">This template includes support for registration, login, external logins, forgotten passwords, and additional functionality.</span></span>

![](./media/image7-3.png)

<span data-ttu-id="c7625-272">Abbildung 7 – 3 Wählen Sie einzelne Benutzerkonten Identität vorkonfiguriert.</span><span class="sxs-lookup"><span data-stu-id="c7625-272">Figure 7-3 Select Individual User Accounts to have Identity preconfigured.</span></span>

<span data-ttu-id="c7625-273">Identity-Support ist in den Starttasks, die sowohl in ConfigureServices "und" Konfigurieren konfiguriert:</span><span class="sxs-lookup"><span data-stu-id="c7625-273">Identity support is configured in Startup, both in ConfigureServices and Configure:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    // Add framework services.
    services.AddDbContext<ApplicationDbContext>(options =>
    options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));
    services.AddIdentity<ApplicationUser, IdentityRole>()
    .AddEntityFrameworkStores<ApplicationDbContext>()
    .AddDefaultTokenProviders();
    services.AddMvc();
}

public void Configure(IApplicationBuilder app)
{
    app.UseStaticFiles();
    app.UseIdentity();
    app.UseMvc(routes =>
    {
        routes.MapRoute(
        name: "default",
        template: "{controller=Home}/{action=Index}/{id?}");
    });
}
```

<span data-ttu-id="c7625-274">Es ist wichtig, dass vor dem UseMvc UseIdentity angezeigt, in der Methode konfigurieren werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-274">It's important that UseIdentity appear before UseMvc in the Configure method.</span></span> <span data-ttu-id="c7625-275">Beim Konfigurieren von Identität in ConfigureServices, sehen Sie einen Aufruf von AddDefaultTokenProviders.</span><span class="sxs-lookup"><span data-stu-id="c7625-275">When configuring Identity in ConfigureServices, you'll notice a call to AddDefaultTokenProviders.</span></span> <span data-ttu-id="c7625-276">Dies hat nichts mit Token zu tun, die zum Sichern der Webkommunikation verwendet werden kann, jedoch bezieht sich stattdessen auf Anbietern, die Anweisungen zu erstellen, die an Benutzer per SMS oder e-Mail in der Reihenfolge dafür, ihre Identität bestätigen gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-276">This has nothing to do with tokens that may be used to secure web communications, but instead refers to providers that create prompts that can be sent to users via SMS or email in order for them to confirm their identity.</span></span>

<span data-ttu-id="c7625-277">Sie können erfahren Sie mehr über [zweistufige Authentifizierung konfigurieren](https://docs.microsoft.com/aspnet/core/security/authentication/2fa) und [aktivieren externer anmeldeanbietern](https://docs.microsoft.com/aspnet/core/security/authentication/social/) aus offizielle ASP.NET Core Dokumente.</span><span class="sxs-lookup"><span data-stu-id="c7625-277">You can learn more about [configuring two-factor authentication](https://docs.microsoft.com/aspnet/core/security/authentication/2fa) and [enabling external login providers](https://docs.microsoft.com/aspnet/core/security/authentication/social/) from the official ASP.NET Core docs.</span></span>

### <a name="authorization"></a><span data-ttu-id="c7625-278">Autorisierung</span><span class="sxs-lookup"><span data-stu-id="c7625-278">Authorization</span></span>

<span data-ttu-id="c7625-279">Die einfachste Form der Autorisierung umfasst das Einschränken des Zugriffs für anonyme Benutzer.</span><span class="sxs-lookup"><span data-stu-id="c7625-279">The simplest form of authorization involves restricting access to anonymous users.</span></span> <span data-ttu-id="c7625-280">Dies kann erreicht werden, indem Sie einfach die \[autorisieren\] -Attribut auf bestimmte Domänencontroller oder Aktionen.</span><span class="sxs-lookup"><span data-stu-id="c7625-280">This can be achieved by simply applying the \[Authorize\] attribute to certain controllers or actions.</span></span> <span data-ttu-id="c7625-281">Wenn Rollen verwendet werden, kann das Attribut erweitert werden, um Beschränken des Zugriffs auf Benutzer, die bestimmten Rollen angehören wie gezeigt:</span><span class="sxs-lookup"><span data-stu-id="c7625-281">If roles are being used, the attribute can be further extended to restrict access to users who belong to certain roles, as shown:</span></span>

```csharp
[Authorize(Roles = "HRManager,Finance")]
public class SalaryController : Controller
{

}
```

<span data-ttu-id="c7625-282">In diesem Fall würden Benutzer entweder der Rollen HRManager oder Finanzen (oder beides), Zugriff auf die SalaryController haben.</span><span class="sxs-lookup"><span data-stu-id="c7625-282">In this case, users belonging to either the HRManager or Finance roles (or both) would have access to the SalaryController.</span></span> <span data-ttu-id="c7625-283">So, dass ein Benutzer mehreren Rollen (nicht nur eine von mehreren) angehören, können Sie das Attribut mehrere Male anwenden Geben Sie jedes Mal eine Rolle erforderliche.</span><span class="sxs-lookup"><span data-stu-id="c7625-283">To require that a user belong to multiple roles (not just one of several), you can apply the attribute multiple times, specifying a required role each time.</span></span>

<span data-ttu-id="c7625-284">Bestimmte Gruppen von Rollen angeben, wie Zeichenfolgen in vielen verschiedenen Controllern und Aktionen zu unerwünschten Wiederholung führen können.</span><span class="sxs-lookup"><span data-stu-id="c7625-284">Specifying certain sets of roles as strings in many different controllers and actions can lead to undesirable repetition.</span></span> <span data-ttu-id="c7625-285">Sie können Konfigurieren von Autorisierungsrichtlinien, die Autorisierungsregeln zu kapseln, und geben Sie dann die Richtlinie anstelle einzelner Rollen beim Anwenden der \[autorisieren\] Attribut:</span><span class="sxs-lookup"><span data-stu-id="c7625-285">You can configure authorization policies, which encapsulate authorization rules, and then specify the policy instead of individual roles when applying the \[Authorize\] attribute:</span></span>

```csharp
[Authorize(Policy = "CanViewPrivateReport")]
public IActionResult ExecutiveSalaryReport()
{
    return View();
}
```

<span data-ttu-id="c7625-286">Verwendung von Richtlinien auf diese Weise können Sie die Arten von Aktionen, die aus dem bestimmte Rollen oder die dafür geltenden Regeln eingeschränkt trennen.</span><span class="sxs-lookup"><span data-stu-id="c7625-286">Using policies in this way, you can separate the kinds of actions being restricted from the specific roles or rules that apply to it.</span></span> <span data-ttu-id="c7625-287">Später, wenn Sie eine neue Rolle, die auf bestimmte Ressourcen zugreifen muss erstellen, können Sie einfach aktualisieren eine Richtlinie, anstatt jede Liste von Rollen zu aktualisieren, auf jedem \[autorisieren\] Attribut.</span><span class="sxs-lookup"><span data-stu-id="c7625-287">Later, if you create a new role that needs to have access to certain resources, you can just update a policy, rather than updating every list of roles on every \[Authorize\] attribute.</span></span>

#### <a name="claims"></a><span data-ttu-id="c7625-288">Ansprüche</span><span class="sxs-lookup"><span data-stu-id="c7625-288">Claims</span></span>

<span data-ttu-id="c7625-289">Ansprüche sind Name-Wert-Paaren, die Eigenschaften eines authentifizierten Benutzers darstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-289">Claims are name value pairs that represent properties of an authenticated user.</span></span> <span data-ttu-id="c7625-290">Beispielsweise können Benutzer Mitarbeiternummer als Anspruch gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-290">For example, you might store users' employee number as a claim.</span></span> <span data-ttu-id="c7625-291">Ansprüche können dann im Rahmen von Autorisierungsrichtlinien verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c7625-291">Claims can then be used as part of authorization policies.</span></span> <span data-ttu-id="c7625-292">Sie können eine Richtlinie namens "EmployeeOnly" erstellen, erfordert das Vorhandensein eines Anspruchs "EmployeeNumber", aufgerufen, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="c7625-292">You could create a policy called "EmployeeOnly" that requires the existence of a claim called "EmployeeNumber", as shown in this example:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc();
    services.AddAuthorization(options =>
    {
        options.AddPolicy("EmployeeOnly", policy => policy.RequireClaim("EmployeeNumber"));
    });
}
```

<span data-ttu-id="c7625-293">Diese Richtlinie kann dann verwendet werden, mit der \[autorisieren\] Attribut, um alle Controller und/oder eine Aktion, wie oben beschrieben zu schützen.</span><span class="sxs-lookup"><span data-stu-id="c7625-293">This policy could then be used with the \[Authorize\] attribute to protect any controller and/or action, as described above.</span></span>

#### <a name="securing-web-apis"></a><span data-ttu-id="c7625-294">Sichern von Web-APIs</span><span class="sxs-lookup"><span data-stu-id="c7625-294">Securing Web APIs</span></span>

<span data-ttu-id="c7625-295">Die meisten Web-APIs sollten ein Token-basierter Authentifizierungssystem implementieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-295">Most web APIs should implement a token-based authentication system.</span></span> <span data-ttu-id="c7625-296">Tokenauthentifizierung ist statusfrei und entworfenen skalierbar sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-296">Token authentication is stateless and designed to be scalable.</span></span> <span data-ttu-id="c7625-297">In einem System tokenbasierter Authentifizierung authentifizieren des Clients muss zunächst mit dem Authentifizierungsanbieter.</span><span class="sxs-lookup"><span data-stu-id="c7625-297">In a token-based authentication system, the client must first authenticate with the authentication provider.</span></span> <span data-ttu-id="c7625-298">Im Erfolgsfall wird der Client ein Token ausgestellt. dabei einfach eine kryptografisch sinnvolle Zeichenfolge von Zeichen.</span><span class="sxs-lookup"><span data-stu-id="c7625-298">If successful, the client is issued a token, which is simply a cryptographically meaningful string of characters.</span></span> <span data-ttu-id="c7625-299">Wenn der Client eine Anforderung an eine API ausgeben, dann benötigt, fügt dieses Token als einen Header für die Anforderung hinzu.</span><span class="sxs-lookup"><span data-stu-id="c7625-299">When the client then needs to issue a request to an API, it adds this token as a header on the request.</span></span> <span data-ttu-id="c7625-300">Der Server überprüft dann das Token im Anforderungsheader vor Abschließen der Anforderung gefunden.</span><span class="sxs-lookup"><span data-stu-id="c7625-300">The server then validates the token found in the request header before completing the request.</span></span> <span data-ttu-id="c7625-301">Abbildung 7 – 4 veranschaulicht diesen Prozess.</span><span class="sxs-lookup"><span data-stu-id="c7625-301">Figure 7-4 demonstrates this process.</span></span>

![TokenAuth](./media/image7-4.png)

<span data-ttu-id="c7625-303">**Abbildung 7 – 4.**</span><span class="sxs-lookup"><span data-stu-id="c7625-303">**Figure 7-4.**</span></span> <span data-ttu-id="c7625-304">Tokenbasierte Authentifizierung für Web-APIs.</span><span class="sxs-lookup"><span data-stu-id="c7625-304">Token-based authentication for Web APIs.</span></span>

> ### <a name="references--security"></a><span data-ttu-id="c7625-305">Verweise – Sicherheit</span><span class="sxs-lookup"><span data-stu-id="c7625-305">References – Security</span></span>
> - <span data-ttu-id="c7625-306">**Übersicht über die Containerdokumentation Sicherheit**</span><span class="sxs-lookup"><span data-stu-id="c7625-306">**Security Docs Overview**</span></span>  
> <span data-ttu-id="c7625-307">https://docs.Microsoft.com/ASPNET/Core/Security/</span><span class="sxs-lookup"><span data-stu-id="c7625-307">https://docs.microsoft.com/aspnet/core/security/</span></span>
> - <span data-ttu-id="c7625-308">**Erzwingen von SSL in einer ASP.NET Core-App**</span><span class="sxs-lookup"><span data-stu-id="c7625-308">**Enforcing SSL in an ASP.NET Core App**</span></span>  
> <span data-ttu-id="c7625-309"><https://docs.Microsoft.com/ASPNET/Core/Security/Enforcing-SSL></span><span class="sxs-lookup"><span data-stu-id="c7625-309"><https://docs.microsoft.com/aspnet/core/security/enforcing-ssl></span></span>
> - <span data-ttu-id="c7625-310">**Einführung in Identity**</span><span class="sxs-lookup"><span data-stu-id="c7625-310">**Introduction to Identity**</span></span>  
> <span data-ttu-id="c7625-311"><https://docs.Microsoft.com/ASPNET/Core/Security/Authentication/Identity></span><span class="sxs-lookup"><span data-stu-id="c7625-311"><https://docs.microsoft.com/aspnet/core/security/authentication/identity></span></span>
> - <span data-ttu-id="c7625-312">**Einführung in die Autorisierung**</span><span class="sxs-lookup"><span data-stu-id="c7625-312">**Introduction to Authorization**</span></span>  
> <span data-ttu-id="c7625-313"><https://docs.Microsoft.com/ASPNET/Core/Security/Authorization/Introduction></span><span class="sxs-lookup"><span data-stu-id="c7625-313"><https://docs.microsoft.com/aspnet/core/security/authorization/introduction></span></span>
> - <span data-ttu-id="c7625-314">**Authentifizierung und Autorisierung für API-Apps in Azure App Service**</span><span class="sxs-lookup"><span data-stu-id="c7625-314">**Authentication and Authorization for API Apps in Azure App Service**</span></span>  
> <span data-ttu-id="c7625-315"><https://docs.Microsoft.com/Azure/App-Service-API/App-Service-API-Authentication></span><span class="sxs-lookup"><span data-stu-id="c7625-315"><https://docs.microsoft.com/azure/app-service-api/app-service-api-authentication></span></span>

## <a name="client-communication"></a><span data-ttu-id="c7625-316">Clientkommunikation</span><span class="sxs-lookup"><span data-stu-id="c7625-316">Client Communication</span></span>

<span data-ttu-id="c7625-317">Zusätzlich zu den Seiten bedient, und reagieren auf Anforderungen von Daten über Web-APIs, können ASP.NET Core-apps direkt verbundenen Clients kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-317">In addition to serving pages and responding to requests for data via web APIs, ASP.NET Core apps can communicate directly with connected clients.</span></span> <span data-ttu-id="c7625-318">Diese ausgehende Kommunikation kann eine Vielzahl von Transport-Technologien, die am häufigsten verwendeten wird WebSockets verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7625-318">This outbound communication can use a variety of transport technologies, the most common being WebSockets.</span></span> <span data-ttu-id="c7625-319">SignalR für ASP.NET Core ist eine Bibliothek, die sie auf die Art von Server-zu-Client-Kommunikation in Echtzeit-Funktion auf Ihre Anwendungen auf einfache Weise.</span><span class="sxs-lookup"><span data-stu-id="c7625-319">ASP.NET Core SignalR is a library that makes it simple to kind of real-time server-to-client communication functionality to your applications.</span></span> <span data-ttu-id="c7625-320">SignalR unterstützt eine Vielzahl von Transport-Technologien, darunter WebSockets, und beseitigen viele Implementierungsdetails seitens des Entwicklers abstrahiert.</span><span class="sxs-lookup"><span data-stu-id="c7625-320">SignalR supports a variety of transport technologies, including WebSockets, and abstracts away many of the implementation details from the developer.</span></span>

<span data-ttu-id="c7625-321">SignalR für ASP.NET Core befindet sich derzeit in Bearbeitung und wird in der nächsten Version von ASP.NET Core verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-321">ASP.NET Core SignalR is currently under development, and will be available in the next release of ASP.NET Core.</span></span> <span data-ttu-id="c7625-322">Allerdings andere [Source WebSockets-Bibliotheken öffnen](https://github.com/radu-matei/websocket-manager) sind derzeit verfügbar.</span><span class="sxs-lookup"><span data-stu-id="c7625-322">However, other [open source WebSockets libraries](https://github.com/radu-matei/websocket-manager) are currently available.</span></span>

<span data-ttu-id="c7625-323">Echtzeit Clientkommunikation, ob mit WebSockets direkt oder andere Techniken in einer Vielzahl von Anwendungsszenarien nützlich sind.</span><span class="sxs-lookup"><span data-stu-id="c7625-323">Real-time client communication, whether using WebSockets directly or other techniques, are useful in a variety of application scenarios.</span></span> <span data-ttu-id="c7625-324">Beispiele:</span><span class="sxs-lookup"><span data-stu-id="c7625-324">Some examples include:</span></span>

-   <span data-ttu-id="c7625-325">Live Chatraum-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="c7625-325">Live chat room applications</span></span>

-   <span data-ttu-id="c7625-326">Überwachen von Anwendungen</span><span class="sxs-lookup"><span data-stu-id="c7625-326">Monitoring applications</span></span>

-   <span data-ttu-id="c7625-327">Auftrag statusaktualisierungen</span><span class="sxs-lookup"><span data-stu-id="c7625-327">Job progress updates</span></span>

-   <span data-ttu-id="c7625-328">Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="c7625-328">Notifications</span></span>

-   <span data-ttu-id="c7625-329">Interaktive Forms-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="c7625-329">Interactive forms applications</span></span>

<span data-ttu-id="c7625-330">Wenn die Clientkommunikation in Ihre Anwendungen zu erstellen, sind in der Regel zwei Komponenten:</span><span class="sxs-lookup"><span data-stu-id="c7625-330">When building client communication into your applications, there are typically two components:</span></span>

-   <span data-ttu-id="c7625-331">Serverseitige Verbindungs-Manager (SignalR-Hubs, WebSocketManager WebSocketHandler)</span><span class="sxs-lookup"><span data-stu-id="c7625-331">Server-side connection manager (SignalR Hub, WebSocketManager WebSocketHandler)</span></span>

-   <span data-ttu-id="c7625-332">Die clientseitige-Bibliothek</span><span class="sxs-lookup"><span data-stu-id="c7625-332">Client-side library</span></span>

<span data-ttu-id="c7625-333">Clients sind nicht auf Browsern – mobile apps, die Konsolen-apps beschränkt, und andere systemeigene apps können auch mithilfe von SignalR/WebSockets kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-333">Clients are not limited to browsers – mobile apps, console apps, and other native apps can also communicate using SignalR/WebSockets.</span></span> <span data-ttu-id="c7625-334">Das folgende einfache Programm wiederholt alle Inhalte, die an eine Chat-Anwendung in der Konsole als Teil einer beispielanwendung WebSocketManager gesendet:</span><span class="sxs-lookup"><span data-stu-id="c7625-334">The following simple program echoes all content sent to a chat application to the console, as part of a WebSocketManager sample application:</span></span>

```csharp
public class Program
{
    private static Connection _connection;
    public static void Main(string[] args)
    {
        StartConnectionAsync();
        _connection.On("receiveMessage", (arguments) =>;
        {
            Console.WriteLine(\$"{arguments\[0\]} said: {arguments\[1\]}");
        });
        Console.ReadLine();
        StopConnectionAsync();
    }
    
    public static async Task StartConnectionAsync()
    {
        _connection = new Connection();
        await _connection.StartConnectionAsync("ws://localhost:65110/chat");
    }
    
    public static async Task StopConnectionAsync()
    {
        await _connection.StopConnectionAsync();
    }
```

<span data-ttu-id="c7625-335">Erwägen Sie, die Methoden in denen Anwendung kommunizieren direkt mit Clientanwendungen, und überlegen Sie, ob die Kommunikation in Echtzeit Benutzer Ihrer app verbessern würden auftreten.</span><span class="sxs-lookup"><span data-stu-id="c7625-335">Consider ways in which your applications communicate directly with client applications, and consider whether real-time communication would improve your app's user experience.</span></span>

> ### <a name="references--client-communication"></a><span data-ttu-id="c7625-336">Verweise – Client-Kommunikation</span><span class="sxs-lookup"><span data-stu-id="c7625-336">References – Client Communication</span></span>
> - <span data-ttu-id="c7625-337">**SignalR für ASP.NET Core**</span><span class="sxs-lookup"><span data-stu-id="c7625-337">**ASP.NET Core SignalR**</span></span>  
> <span data-ttu-id="c7625-338"><https://github.com/ASPNET/SignalR></span><span class="sxs-lookup"><span data-stu-id="c7625-338"><https://github.com/aspnet/SignalR></span></span>
> - <span data-ttu-id="c7625-339">**WebSocket-Manager**</span><span class="sxs-lookup"><span data-stu-id="c7625-339">**WebSocket Manager**</span></span>  
> <span data-ttu-id="c7625-340">https://github.com/Radu-matei/WebSocket-Manager</span><span class="sxs-lookup"><span data-stu-id="c7625-340">https://github.com/radu-matei/websocket-manager</span></span>

## <a name="domain-driven-design--should-you-apply-it"></a><span data-ttu-id="c7625-341">Installieren Domain-Driven Design: sollten Sie es?</span><span class="sxs-lookup"><span data-stu-id="c7625-341">Domain-Driven Design – Should You Apply It?</span></span>

<span data-ttu-id="c7625-342">Domain Driven Design (DDD) ist ein agile Ansatz zum Erstellen von Software, die Fokussierung auf hat vor den *Business-Domäne*.</span><span class="sxs-lookup"><span data-stu-id="c7625-342">Domain-Driven Design (DDD) is an agile approach to building software that emphasizes focusing on the *business domain*.</span></span> <span data-ttu-id="c7625-343">Es wird ein starker Gewichtung von Kommunikation und Interaktion mit Expert(s) von Business-Domäne, die den Entwicklern verknüpft sein kann wie die realen System funktioniert.</span><span class="sxs-lookup"><span data-stu-id="c7625-343">It places a heavy emphasis on communication and interaction with business domain expert(s) who can relate to the developers how the real-world system works.</span></span> <span data-ttu-id="c7625-344">Wenn Sie ein System, die Aktualität behandelt erstellen, möglicherweise Ihrer Domäne Expert z. B. eine erfahrenen stock-Broker-Instanz sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-344">For example, if you're building a system that handles stock trades, your domain expert might be an experienced stock broker.</span></span> <span data-ttu-id="c7625-345">DDD dient zum großen, komplexen Geschäftsprobleme zu lösen, und ist häufig nicht für kleinere, einfacher Anwendungen geeignet, wie die Investition zum verstehen und Modellieren der Domänenadministrators nicht Sache ist.</span><span class="sxs-lookup"><span data-stu-id="c7625-345">DDD is designed to address large, complex business problems, and is often not appropriate for smaller, simpler applications, as the investment in understanding and modeling the domain is not worth it.</span></span>

<span data-ttu-id="c7625-346">Beim Erstellen von Software, die einen DDD Ansatz folgen, sollte Ihr Team (einschließlich nichttechnische Projektbeteiligten und Mitwirkenden) Entwickeln einer *ubiquitäre Sprache* für das Problemfeld.</span><span class="sxs-lookup"><span data-stu-id="c7625-346">When building software following a DDD approach, your team (including non-technical stakeholders and contributors) should develop a *ubiquitous language* for the problem space.</span></span> <span data-ttu-id="c7625-347">D. h. sollte dieselbe Terminologie verwendet werden, für die reale Konzept, das modelliert wird, die entsprechende Software und aller Strukturen, die möglicherweise vorhanden, um das Konzept (z. B. die Datenbanktabellen) beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="c7625-347">That is, the same terminology should be used for the real-world concept being modeled, the software equivalent, and any structures that might exist to persist the concept (for example, database tables).</span></span> <span data-ttu-id="c7625-348">Daher sollte in der ubiquitäre Sprache beschriebenen Konzepte bilden die Grundlage für Ihre *Domänenmodell*.</span><span class="sxs-lookup"><span data-stu-id="c7625-348">Thus, the concepts described in the ubiquitous language should form the basis for your *domain model*.</span></span>

<span data-ttu-id="c7625-349">Ihre Domänenmodell besteht aus Objekten, die das Verhalten des Systems darstellen miteinander interagieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-349">Your domain model is comprised of objects that interact with one another to represent the behavior of the system.</span></span> <span data-ttu-id="c7625-350">Diese Objekte können in den folgenden Kategorien fallen:</span><span class="sxs-lookup"><span data-stu-id="c7625-350">These objects may fall into the following categories:</span></span>

-   <span data-ttu-id="c7625-351">[Entitäten](http://deviq.com/entity/), Objekte mit einem Thread-Identität darstellt.</span><span class="sxs-lookup"><span data-stu-id="c7625-351">[Entities](http://deviq.com/entity/), which represent objects with a thread of identity.</span></span> <span data-ttu-id="c7625-352">Entitäten sind in der Regel in Persistenz mit einem Schlüssel gespeichert mit denen sie später abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-352">Entities are typically stored in persistence with a key by which they can later be retrieved.</span></span>

-   <span data-ttu-id="c7625-353">[Aggregate](http://deviq.com/aggregate-pattern/), die darstellen, dass Gruppen von Objekten, die als Einheit beibehalten werden soll.</span><span class="sxs-lookup"><span data-stu-id="c7625-353">[Aggregates](http://deviq.com/aggregate-pattern/), which represent groups of objects that should be persisted as a unit.</span></span>

-   <span data-ttu-id="c7625-354">[Wert von Objekten](http://deviq.com/value-object/), die darstellen Konzepte, die auf der Basis der Summe der zugehörigen Eigenschaftswerte enthält verglichen werden können.</span><span class="sxs-lookup"><span data-stu-id="c7625-354">[Value objects](http://deviq.com/value-object/), which represent concepts that can be compared on the basis of the sum of their property values.</span></span> <span data-ttu-id="c7625-355">Beispielsweise besteht ein Anfangs- und Enddatum Datum DateRange.</span><span class="sxs-lookup"><span data-stu-id="c7625-355">For example, DateRange consisting of a start and end date.</span></span>

-   <span data-ttu-id="c7625-356">[Domäne Ereignisse](https://martinfowler.com/eaaDev/DomainEvent.html), die Dinge innerhalb des Systems, die von Interesse an anderen Teilen des Systems sind darstellen.</span><span class="sxs-lookup"><span data-stu-id="c7625-356">[Domain events](https://martinfowler.com/eaaDev/DomainEvent.html), which represent things happening within the system that are of interest to other parts of the system.</span></span>

<span data-ttu-id="c7625-357">Beachten Sie, dass ein Domänenmodell DDD komplexe Verhalten innerhalb des Modells kapseln sollten.</span><span class="sxs-lookup"><span data-stu-id="c7625-357">Note that a DDD domain model should encapsulate complex behavior within the model.</span></span> <span data-ttu-id="c7625-358">Entitäten sollten insbesondere lediglich Auflistungen von Eigenschaften nicht.</span><span class="sxs-lookup"><span data-stu-id="c7625-358">Entities, in particular, should not merely be collections of properties.</span></span> <span data-ttu-id="c7625-359">Wenn die Domänenmodell verfügt nicht über das Verhalten und lediglich den Zustand des Systems darstellt, es gilt als ein [anemic Modell](http://deviq.com/anemic-model/), im DDD unerwünscht ist.</span><span class="sxs-lookup"><span data-stu-id="c7625-359">When the domain model lacks behavior and merely represents the state of the system, it is said to be an [anemic model](http://deviq.com/anemic-model/), which is undesirable in DDD.</span></span>

<span data-ttu-id="c7625-360">Zusätzlich zu diesen Modell die folgenden DDD in der Regel einer Vielzahl von Mustern:</span><span class="sxs-lookup"><span data-stu-id="c7625-360">In addition to these model types, DDD typically employs a variety of patterns:</span></span>

-   <span data-ttu-id="c7625-361">[Repository](http://deviq.com/repository-pattern/), Abstraktion Persistenz-Details.</span><span class="sxs-lookup"><span data-stu-id="c7625-361">[Repository](http://deviq.com/repository-pattern/), for abstracting persistence details.</span></span>

-   <span data-ttu-id="c7625-362">[Factory](https://en.wikipedia.org/wiki/Factory_method_pattern), für das Erstellen von komplexen Objekten kapseln.</span><span class="sxs-lookup"><span data-stu-id="c7625-362">[Factory](https://en.wikipedia.org/wiki/Factory_method_pattern), for encapsulating complex object creation.</span></span>

-   <span data-ttu-id="c7625-363">Domain-Ereignisse für das entkoppeln abhängige Verhalten unterscheidet sich von Verhalten auslösen.</span><span class="sxs-lookup"><span data-stu-id="c7625-363">Domain events, for decoupling dependent behavior from triggering behavior.</span></span>

-   <span data-ttu-id="c7625-364">[Services](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)für kapselnden komplexe Verhalten und/oder Infrastrukturdetails-Implementierung.</span><span class="sxs-lookup"><span data-stu-id="c7625-364">[Services](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/), for encapsulating complex behavior and/or infrastructure implementation details.</span></span>

-   <span data-ttu-id="c7625-365">[Befehl](https://en.wikipedia.org/wiki/Command_pattern), für die Entkopplung Befehle ausgibt, und den Befehl selbst ausführen.</span><span class="sxs-lookup"><span data-stu-id="c7625-365">[Command](https://en.wikipedia.org/wiki/Command_pattern), for decoupling issuing commands and executing the command itself.</span></span>

-   <span data-ttu-id="c7625-366">[Spezifikation](http://deviq.com/specification-pattern/), für das Kapseln Abfragedetails.</span><span class="sxs-lookup"><span data-stu-id="c7625-366">[Specification](http://deviq.com/specification-pattern/), for encapsulating query details.</span></span>

<span data-ttu-id="c7625-367">DDD empfiehlt außerdem die Verwendung der zuvor besprochenen Clean-Architektur ermöglicht lose Verbindung, für die Kapselung und Code, die leicht mit Komponententests überprüft werden kann.</span><span class="sxs-lookup"><span data-stu-id="c7625-367">DDD also recommends the use of the Clean Architecture discussed previously, allowing for loose coupling, encapsulation, and code that can easily be verified using unit tests.</span></span>

### <a name="when-should-you-apply-ddd"></a><span data-ttu-id="c7625-368">Wann sollten Sie DDD anwenden</span><span class="sxs-lookup"><span data-stu-id="c7625-368">When Should You Apply DDD</span></span>

<span data-ttu-id="c7625-369">DDD eignet sich gut für große Anwendungen mit erheblichen Business (nicht nur technische) Komplexität.</span><span class="sxs-lookup"><span data-stu-id="c7625-369">DDD is well-suited to large applications with significant business (not just technical) complexity.</span></span> <span data-ttu-id="c7625-370">Die Anwendung sollte die Domänenexperten sein.</span><span class="sxs-lookup"><span data-stu-id="c7625-370">The application should require the knowledge of domain experts.</span></span> <span data-ttu-id="c7625-371">Es darf signifikantem Verhalten im Domänenmodell selbst, Geschäftsregeln und Interaktionen hinter einfach speichern und Abrufen von den aktuellen Status der verschiedenen Datensätzen aus Datenspeichern darstellt.</span><span class="sxs-lookup"><span data-stu-id="c7625-371">There should be significant behavior in the domain model itself, representing business rules and interactions beyond simply storing and retrieving the current state of various records from data stores.</span></span>

### <a name="when-shouldnt-you-apply-ddd"></a><span data-ttu-id="c7625-372">Sie sollte nicht beim DDD anwenden</span><span class="sxs-lookup"><span data-stu-id="c7625-372">When Shouldn't You Apply DDD</span></span>

<span data-ttu-id="c7625-373">DDD umfasst die Investitionen in die Modellierung, Architektur und Kommunikation, die für kleinere Anwendungen oder Anwendungen, die im Wesentlichen nur CRUD (erstellen/lesen/aktualisieren/löschen) sind nicht gerechtfertigt sein kann.</span><span class="sxs-lookup"><span data-stu-id="c7625-373">DDD involves investments in modeling, architecture, and communication that may not be warranted for smaller applications or applications that are essentially just CRUD (create/read/update/delete).</span></span> <span data-ttu-id="c7625-374">Wenn Sie entscheiden, Ihre Anwendung folgende DDD Ansatz, aber feststellen, dass Ihre Domäne ein anemic Modell ohne das Verhalten hat, müssen Sie Ihres Ansatzes überdenken.</span><span class="sxs-lookup"><span data-stu-id="c7625-374">If you choose to approach your application following DDD, but find that your domain has an anemic model with no behavior, you may need to rethink your approach.</span></span> <span data-ttu-id="c7625-375">Ihre Anwendung möglicherweise nicht DDD oder um Unterstützung zu erhalten, die Umgestaltung Ihrer Anwendung zum Kapseln der Geschäftslogik im Domänenmodell und nicht in der Datenbank oder-Benutzeroberfläche möglicherweise.</span><span class="sxs-lookup"><span data-stu-id="c7625-375">Either your application may not need DDD, or you may need assistance refactoring your application to encapsulate business logic in the domain model, rather than in your database or user interface.</span></span>

<span data-ttu-id="c7625-376">Ein Hybridansatz wäre nur DDD für die Transaktions- oder komplexeren Bereiche der Anwendung, nicht jedoch für einfacher CRUD oder nur-Lese Teile der Anwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7625-376">A hybrid approach would be to only use DDD for the transactional or more complex areas of the application, but not for simpler CRUD or read-only portions of the application.</span></span> <span data-ttu-id="c7625-377">Sie needn't für die Instanz, die Einschränkungen eines Aggregats aufweisen, wenn Sie Daten aus, um einen Bericht anzuzeigen oder zum Anzeigen von Daten für ein Dashboard abrufen.</span><span class="sxs-lookup"><span data-stu-id="c7625-377">For instance, you needn't have the constraints of an Aggregate if you're querying data to display a report or to visualize data for a dashboard.</span></span> <span data-ttu-id="c7625-378">Es ist vollkommen akzeptabel, eine separate, einfacher read-Modell für diese Anforderungen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="c7625-378">It's perfectly acceptable to have a separate, simpler read model for such requirements.</span></span>

> ### <a name="references--domain-driven-design"></a><span data-ttu-id="c7625-379">Verweise – Domain Driven Design</span><span class="sxs-lookup"><span data-stu-id="c7625-379">References – Domain-Driven Design</span></span>
> - <span data-ttu-id="c7625-380">**DDD im Klartext (StackOverflow Answers)**</span><span class="sxs-lookup"><span data-stu-id="c7625-380">**DDD in Plain English (StackOverflow Answer)**</span></span>  
> <span data-ttu-id="c7625-381"><https://stackoverflow.com/questions/1222392/can-someone-EXPLAIN-Domain-Driven-Design-ddd-in-Plain-English-Please/1222488#1222488></span><span class="sxs-lookup"><span data-stu-id="c7625-381"><https://stackoverflow.com/questions/1222392/can-someone-explain-domain-driven-design-ddd-in-plain-english-please/1222488#1222488></span></span>

## <a name="deployment"></a><span data-ttu-id="c7625-382">Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="c7625-382">Deployment</span></span>

<span data-ttu-id="c7625-383">Es gibt einige Schritte Beteiligten im Verlauf der Bereitstellung Ihrer Anwendung ASP.NET Core unabhängig davon, in dem sie gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="c7625-383">There are a few steps involved in the process of deploying your ASP.NET Core application, regardless of where it will be hosted.</span></span> <span data-ttu-id="c7625-384">Der erste Schritt ist zum Veröffentlichen der Anwendung, die ausgeführt werden können mithilfe der Dotnet CLI-Befehl "Veröffentlichen".</span><span class="sxs-lookup"><span data-stu-id="c7625-384">The first step is to publish the application, which can be done using the dotnet publish CLI command.</span></span> <span data-ttu-id="c7625-385">Die Anwendung kompilieren wird und platzieren alle Dateien, die erforderlich sind, um die Anwendung in einem designierten Ordner auszuführen.</span><span class="sxs-lookup"><span data-stu-id="c7625-385">This will compile the application and place all of the files needed to run the application into a designated folder.</span></span> <span data-ttu-id="c7625-386">Wenn Sie in Visual Studio bereitstellen, ist dieser Schritt automatisch ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="c7625-386">When you deploy from Visual Studio, this step is performed for you automatically.</span></span> <span data-ttu-id="c7625-387">Dem Veröffentlichungsordner enthält .exe und DLL-Dateien für die Anwendung und ihre Abhängigkeiten.</span><span class="sxs-lookup"><span data-stu-id="c7625-387">The publish folder contains .exe and .dll files for the application and its dependencies.</span></span> <span data-ttu-id="c7625-388">Eine eigenständige Anwendung dazu gehören auch eine Version der .NET Runtime.</span><span class="sxs-lookup"><span data-stu-id="c7625-388">A self-contained application will also include a version of the .NET runtime.</span></span> <span data-ttu-id="c7625-389">ASP.NET Core Anwendungen gehören auch Konfigurationsdateien, statischen Client Bestand und MVC-Ansichten.</span><span class="sxs-lookup"><span data-stu-id="c7625-389">ASP.NET Core applications will also include configuration files, static client assets, and MVC views.</span></span>

<span data-ttu-id="c7625-390">ASP.NET Core-Anwendungen sind konsolenanwendungen, die gestartet werden müssen, wenn der Server gestartet wird und neu gestartet, wenn die Anwendung (oder Server) stürzt ab.</span><span class="sxs-lookup"><span data-stu-id="c7625-390">ASP.NET Core applications are console applications that must be started when the server boots and restarted if the application (or server) crashes.</span></span> <span data-ttu-id="c7625-391">Prozess-Manager kann verwendet werden, um diesen Prozess zu automatisieren.</span><span class="sxs-lookup"><span data-stu-id="c7625-391">A process manager can be used to automate this process.</span></span> <span data-ttu-id="c7625-392">Die am häufigsten verwendeten Prozess-Manager für ASP.NET Core sind Nginx und Apache unter Linux und unter IIS oder Windows-Dienst unter Windows.</span><span class="sxs-lookup"><span data-stu-id="c7625-392">The most common process managers for ASP.NET Core are Nginx and Apache on Linux and IIS or Windows Service on Windows.</span></span>

<span data-ttu-id="c7625-393">Zusätzlich zu einem Prozess-Manager müssen ASP.NET Core-Anwendungen, die in den Kestrel Webserver gehostet einen reverse-Proxy-Server verwenden.</span><span class="sxs-lookup"><span data-stu-id="c7625-393">In addition to a process manager, ASP.NET Core applications hosted in the Kestrel web server must use a reverse proxy server.</span></span> <span data-ttu-id="c7625-394">Ein reverse-Proxy-Server empfängt HTTP-Anforderungen aus dem Internet und an Kestrel weiterleitet, nachdem einige vorläufige Behandlung.</span><span class="sxs-lookup"><span data-stu-id="c7625-394">A reverse proxy server receives HTTP requests from the internet and forwards them to Kestrel after some preliminary handling.</span></span> <span data-ttu-id="c7625-395">Reverse-Proxy-Server eine Sicherheitsebene für die Anwendung bereitzustellen und für Edge-Bereitstellungen (für den Datenverkehr aus dem Internet ausgesetzt) erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="c7625-395">Reverse proxy servers provide a layer of security for the application, and are required for edge deployments (exposed to traffic from the Internet).</span></span> <span data-ttu-id="c7625-396">Kestrel ist relativ neu und entsprechende Schutzmaßnahmen gegen bestimmte Angriffe noch nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="c7625-396">Kestrel is relatively new and does not yet offer defenses against certain attacks.</span></span> <span data-ttu-id="c7625-397">Kestrel unterstützt auch mehrere Anwendungen auf demselben Port hosten, sodass Techniken, wie Sie Hostheader mit ihm verwendet werden können, zum Aktivieren des Hostings mehrere Anwendungen auf dem gleichen Port und IP-Adresse nicht.</span><span class="sxs-lookup"><span data-stu-id="c7625-397">Kestrel also doesn't support hosting multiple applications on the same port, so techniques like host headers cannot be used with it to enable hosting multiple applications on the same port and IP address.</span></span>

![Kestrel zum Internet](./media/image7-5.png)

<span data-ttu-id="c7625-399">Abbildung 7 – 5 ASP.NET gehostete Kestrel hinter einem reverse-Proxy-server</span><span class="sxs-lookup"><span data-stu-id="c7625-399">Figure 7-5 ASP.NET hosted in Kestrel behind a reverse proxy server</span></span>

<span data-ttu-id="c7625-400">Ein weiteres Szenario, in dem Reverseproxy hilfreich sein kann, ist Sichern von mehreren Anwendungen, die mithilfe von SSL/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c7625-400">Another scenario in which a reverse proxy can be helpful is to secure multiple applications using SSL/HTTPS.</span></span> <span data-ttu-id="c7625-401">In diesem Fall würde nur die Reverseproxy müssen SSL konfiguriert haben.</span><span class="sxs-lookup"><span data-stu-id="c7625-401">In this case, only the reverse proxy would need to have SSL configured.</span></span> <span data-ttu-id="c7625-402">Kommunikation zwischen dem reverse-Proxy-Server und Kestrel konnte über HTTP, stattfinden wie in Abbildung 7 – 6 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="c7625-402">Communication between the reverse proxy server and Kestrel could take place over HTTP, as shown in Figure 7-6.</span></span>

![](./media/image7-6.png)

<span data-ttu-id="c7625-403">Abbildung 7 – 6 ASP.NET gehostet hinter eine sichere HTTPS-reverse-Proxy-server</span><span class="sxs-lookup"><span data-stu-id="c7625-403">Figure 7-6 ASP.NET hosted behind an HTTPS-secured reverse proxy server</span></span>

<span data-ttu-id="c7625-404">Ein immer beliebter Ansatz ist zum Hosten der ASP.NET Core-Anwendung in einem Docker-Container, der dann lokal gehostet oder in Azure zum Hosten von Cloud-basierten bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="c7625-404">An increasingly popular approach is to host your ASP.NET Core application in a Docker container, which then can be hosted locally or deployed to Azure for cloud-based hosting.</span></span> <span data-ttu-id="c7625-405">Der Docker-Container konnte Anwendungscode Kestrel, unter enthalten und wird hinter einem reverse-Proxy-Server bereitgestellt werden, wie oben gezeigt.</span><span class="sxs-lookup"><span data-stu-id="c7625-405">The Docker container could contain your application code, running on Kestrel, and would be deployed behind a reverse proxy server, as shown above.</span></span>

<span data-ttu-id="c7625-406">Wenn Sie Ihre Anwendung in Azure hosten, können Microsoft Azure Application Gateway als dediziertes virtuelles Gerät Sie mehrere Dienste bereitstellen können.</span><span class="sxs-lookup"><span data-stu-id="c7625-406">If you're hosting your application on Azure, you can use Microsoft Azure Application Gateway as a dedicated virtual appliance to provide several services.</span></span> <span data-ttu-id="c7625-407">Zusätzlich zu den fungiert als Reverseproxy für einzelne Anwendungen, bieten Application Gateway auch die folgenden Funktionen:</span><span class="sxs-lookup"><span data-stu-id="c7625-407">In addition to acting as a reverse proxy for individual applications, Application Gateway can also offer the following features:</span></span>

-   <span data-ttu-id="c7625-408">HTTP-Lastenausgleich</span><span class="sxs-lookup"><span data-stu-id="c7625-408">HTTP load balancing</span></span>

-   <span data-ttu-id="c7625-409">SSL Offloading (SSL nur für Internet)</span><span class="sxs-lookup"><span data-stu-id="c7625-409">SSL offload (SSL only to Internet)</span></span>

-   <span data-ttu-id="c7625-410">End-to-End-SSL</span><span class="sxs-lookup"><span data-stu-id="c7625-410">End to End SSL</span></span>

-   <span data-ttu-id="c7625-411">Routing mit mehreren Standorten (Konsolidieren von bis zu 20 Standorten auf ein einzelnes Gateway für die Anwendung)</span><span class="sxs-lookup"><span data-stu-id="c7625-411">Multi-site routing (consolidate up to 20 sites on a single Application Gateway)</span></span>

-   <span data-ttu-id="c7625-412">Web Application-firewall</span><span class="sxs-lookup"><span data-stu-id="c7625-412">Web application firewall</span></span>

-   <span data-ttu-id="c7625-413">WebSocket-Unterstützung</span><span class="sxs-lookup"><span data-stu-id="c7625-413">Websocket support</span></span>

-   <span data-ttu-id="c7625-414">Erweiterte Diagnose</span><span class="sxs-lookup"><span data-stu-id="c7625-414">Advanced diagnostics</span></span>

<span data-ttu-id="c7625-415">*Erfahren Sie mehr über Azure Bereitstellungsoptionen in Kapitel 10.*</span><span class="sxs-lookup"><span data-stu-id="c7625-415">*Learn more about Azure deployment options in Chapter 10.*</span></span>

> ### <a name="references--deployment"></a><span data-ttu-id="c7625-416">Verweise – Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="c7625-416">References – Deployment</span></span>
> - <span data-ttu-id="c7625-417">**Hosting- und -Bereitstellungsübersicht**</span><span class="sxs-lookup"><span data-stu-id="c7625-417">**Hosting and Deployment Overview**</span></span>  
> <span data-ttu-id="c7625-418"><https://docs.Microsoft.com/ASPNET/Core/Publishing/></span><span class="sxs-lookup"><span data-stu-id="c7625-418"><https://docs.microsoft.com/aspnet/core/publishing/></span></span>
> - <span data-ttu-id="c7625-419">**Verwendung von Kestrel mit einer reverse-proxy**</span><span class="sxs-lookup"><span data-stu-id="c7625-419">**When to use Kestrel with a reverse proxy**</span></span>  
> <span data-ttu-id="c7625-420"><https://docs.Microsoft.com/ASPNET/Core/Fundamentals/Servers/kestrel#When-to-Use-kestrel-with-a-Reverse-Proxy></span><span class="sxs-lookup"><span data-stu-id="c7625-420"><https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel#when-to-use-kestrel-with-a-reverse-proxy></span></span>
> - <span data-ttu-id="c7625-421">**Host ASP.NET Core-apps in Docker**</span><span class="sxs-lookup"><span data-stu-id="c7625-421">**Host ASP.NET Core apps in Docker**</span></span>  
> <span data-ttu-id="c7625-422"><https://docs.Microsoft.com/ASPNET/Core/Publishing/docker></span><span class="sxs-lookup"><span data-stu-id="c7625-422"><https://docs.microsoft.com/aspnet/core/publishing/docker></span></span>
> - <span data-ttu-id="c7625-423">**Einführung in Azure-Anwendung-Gateway**</span><span class="sxs-lookup"><span data-stu-id="c7625-423">**Introducing Azure Application Gateway**</span></span>  
> <span data-ttu-id="c7625-424"><https://docs.Microsoft.com/Azure/Application-Gateway/Application-Gateway-Introduction></span><span class="sxs-lookup"><span data-stu-id="c7625-424"><https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="c7625-425">[Vorherigen] (Allgemeine-Client-Side-Web-technologies.md) [weiter] (Work-with-data-in-asp-net-core-apps.md)</span><span class="sxs-lookup"><span data-stu-id="c7625-425">[Previous] (common-client-side-web-technologies.md) [Next] (work-with-data-in-asp-net-core-apps.md)</span></span>
