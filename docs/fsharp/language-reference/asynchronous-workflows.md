---
title: Asynchrone Workflows (F#)
description: Weitere Informationen Sie zur Unterstützung in der F#-Programmiersprache zum Ausführen von Berechnungen asynchron ausgeführt wird, die ausgeführt werden, ohne dass die Ausführung von anderen Arbeitsaufgaben.
ms.date: 05/16/2016
ms.openlocfilehash: 5f7a1a623e143e1bedf51c1a1ed477bb867b280a
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33566362"
---
# <a name="asynchronous-workflows"></a><span data-ttu-id="79810-103">Asynchrone Workflows</span><span class="sxs-lookup"><span data-stu-id="79810-103">Asynchronous Workflows</span></span>

> [!NOTE]
<span data-ttu-id="79810-104">Mit dem API-Referenz-Link gelangen Sie auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="79810-104">The API reference link will take you to MSDN.</span></span>  <span data-ttu-id="79810-105">Die docs.microsoft.com-API-Referenz ist nicht abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="79810-105">The docs.microsoft.com API reference is not complete.</span></span>

<span data-ttu-id="79810-106">Dieses Thema beschreibt die Unterstützung in f# zum Ausführen von Berechnungen asynchron ausgeführt wird, d. h. ohne andere arbeiten, die Ausführung blockiert.</span><span class="sxs-lookup"><span data-stu-id="79810-106">This topic describes support in F# for performing computations asynchronously, that is, without blocking execution of other work.</span></span> <span data-ttu-id="79810-107">Beispielsweise können asynchrone Berechnungen verwendet werden, zum Schreiben von Anwendungen mit Benutzeroberflächen, die Benutzern reaktionsfähig bleiben, wie die Anwendung andere Arbeit ausführt.</span><span class="sxs-lookup"><span data-stu-id="79810-107">For example, asynchronous computations can be used to write applications that have UIs that remain responsive to users as the application performs other work.</span></span>

## <a name="syntax"></a><span data-ttu-id="79810-108">Syntax</span><span class="sxs-lookup"><span data-stu-id="79810-108">Syntax</span></span>

```fsharp
async { expression }
```

## <a name="remarks"></a><span data-ttu-id="79810-109">Hinweise</span><span class="sxs-lookup"><span data-stu-id="79810-109">Remarks</span></span>

<span data-ttu-id="79810-110">In der vorherigen Syntax, die Berechnung dargestellte `expression` eingerichtet wurde, asynchron ausgeführt wird, d. h. ausführen, ohne den aktuellen Berechnungsthread blockieren, wenn asynchrone Standby-Vorgänge, e/a- und anderer asynchronen Operationen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="79810-110">In the previous syntax, the computation represented by `expression` is set up to run asynchronously, that is, without blocking the current computation thread when asynchronous sleep operations, I/O, and other asynchronous operations are performed.</span></span> <span data-ttu-id="79810-111">Asynchrone Berechnungen werden häufig in einem Hintergrundthread gestartet, während der Ausführung wird fortgeführt, für den aktuellen Thread.</span><span class="sxs-lookup"><span data-stu-id="79810-111">Asynchronous computations are often started on a background thread while execution continues on the current thread.</span></span> <span data-ttu-id="79810-112">Der Typ des Ausdrucks ist `Async<'T>`, wobei `'T` ist der vom Ausdruck zurückgegebenen Typ bei der `return` -Schlüsselwort wird verwendet.</span><span class="sxs-lookup"><span data-stu-id="79810-112">The type of the expression is `Async<'T>`, where `'T` is the type returned by the expression when the `return` keyword is used.</span></span> <span data-ttu-id="79810-113">Der Code in ein solcher Ausdruck wird als bezeichnet ein *asynchroner Block*, oder *Async-Block*.</span><span class="sxs-lookup"><span data-stu-id="79810-113">The code in such an expression is referred to as an *asynchronous block*, or *async block*.</span></span>

<span data-ttu-id="79810-114">Es gibt verschiedene Arten der Programmierung von asynchron ausgeführt wird, und die [ `Async` ](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7) Klasse enthält Methoden, die mehrere Szenarien zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="79810-114">There are a variety of ways of programming asynchronously, and the [`Async`](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7) class provides methods that support several scenarios.</span></span> <span data-ttu-id="79810-115">Die allgemeine Vorgehensweise besteht im erstellen `Async` Objekte repräsentieren die Berechnung oder Berechnungen, die asynchron ausgeführt werden soll, und klicken Sie dann diese Berechnungen mit einer der auslösenden Funktionen zu starten.</span><span class="sxs-lookup"><span data-stu-id="79810-115">The general approach is to create `Async` objects that represent the computation or computations that you want to run asynchronously, and then start these computations by using one of the triggering functions.</span></span> <span data-ttu-id="79810-116">Die verschiedenen auslösenden Funktionen bieten verschiedene Möglichkeiten zum Ausführen von asynchronen Berechnungen und welche Sie verwenden hängt von, ob Sie den aktuellen Thread, einen Hintergrundthread weitergeben oder eine .NET Framework-Task-Objekt verwenden möchten und ob Fortsetzung vorhanden sind Funktionen, die ausgeführt werden soll, wenn die Berechnung beendet wurde.</span><span class="sxs-lookup"><span data-stu-id="79810-116">The various triggering functions provide different ways of running asynchronous computations, and which one you use depends on whether you want to use the current thread, a background thread, or a .NET Framework task object, and whether there are continuation functions that should run when the computation finishes.</span></span> <span data-ttu-id="79810-117">Beispielsweise um eine asynchrone Berechnung für den aktuellen Thread zu starten, können Sie [ `Async.StartImmediate` ](https://msdn.microsoft.com/library/2f71d1cc-187f-48cf-ac66-e7fda41c46e3).</span><span class="sxs-lookup"><span data-stu-id="79810-117">For example, to start an asynchronous computation on the current thread, you can use [`Async.StartImmediate`](https://msdn.microsoft.com/library/2f71d1cc-187f-48cf-ac66-e7fda41c46e3).</span></span> <span data-ttu-id="79810-118">Wenn Sie eine asynchrone Berechnung vom UI-Thread starten, werden Sie nicht die Haupt-Ereignisschleife blockiert, die Benutzeraktionen wie Tastatureingaben und Mausaktivitäten, verarbeitet, damit die Anwendung reaktionsfähig bleibt.</span><span class="sxs-lookup"><span data-stu-id="79810-118">When you start an asynchronous computation from the UI thread, you do not block the main event loop that processes user actions such as keystrokes and mouse activity, so your application remains responsive.</span></span>

## <a name="asynchronous-binding-by-using-let"></a><span data-ttu-id="79810-119">Asynchrone Bindung mithilfe von let!</span><span class="sxs-lookup"><span data-stu-id="79810-119">Asynchronous Binding by Using let!</span></span>

<span data-ttu-id="79810-120">In einem asynchronen Workflow einige Ausdrücke und die Vorgänge sind synchron, und einige längeren Berechnungen, die entwickelt wurden, ein Ergebnis asynchron zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="79810-120">In an asynchronous workflow, some expressions and operations are synchronous, and some are longer computations that are designed to return a result asynchronously.</span></span> <span data-ttu-id="79810-121">Wenn Sie eine Methode asynchron aufrufen, anstatt mit einem normalen `let` binden, verwenden Sie `let!`.</span><span class="sxs-lookup"><span data-stu-id="79810-121">When you call a method asynchronously, instead of an ordinary `let` binding, you use `let!`.</span></span> <span data-ttu-id="79810-122">Die Auswirkung der `let!` besteht darin, aktivieren die Ausführung auf anderen Berechnungen oder Threads zu fortfahren, da es sich bei die Berechnung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="79810-122">The effect of `let!` is to enable execution to continue on other computations or threads as the computation is being performed.</span></span> <span data-ttu-id="79810-123">Nach rechts neben der `let!` Bindung zurückgibt, wird der Rest des asynchronen Workflows die Ausführung fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="79810-123">After the right side of the `let!` binding returns, the rest of the asynchronous workflow resumes execution.</span></span>

<span data-ttu-id="79810-124">Der folgende Code zeigt den Unterschied zwischen `let` und `let!`.</span><span class="sxs-lookup"><span data-stu-id="79810-124">The following code shows the difference between `let` and `let!`.</span></span> <span data-ttu-id="79810-125">Die Codezeile, die verwendet `let` einfach erstellt eine asynchrone Berechnung als ein Objekt, mit dem Sie später verwenden, z. B. `Async.StartImmediate` oder [ `Async.RunSynchronously` ](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b).</span><span class="sxs-lookup"><span data-stu-id="79810-125">The line of code that uses `let` just creates an asynchronous computation as an object that you can run later by using, for example, `Async.StartImmediate` or [`Async.RunSynchronously`](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b).</span></span> <span data-ttu-id="79810-126">Die Codezeile, die verwendet `let!` startet die Berechnung, und klicken Sie dann der Thread angehalten wird, bis das Ergebnis verfügbar ist, an die Punkt die Ausführung wird fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="79810-126">The line of code that uses `let!` starts the computation, and then the thread is suspended until the result is available, at which point execution continues.</span></span>

```fsharp
// let just stores the result as an asynchronous operation.
let (result1 : Async<byte[]>) = stream.AsyncRead(bufferSize)
// let! completes the asynchronous operation and returns the data.
let! (result2 : byte[])  = stream.AsyncRead(bufferSize)
```

<span data-ttu-id="79810-127">Zusätzlich zu `let!`, können Sie `use!` zum Ausführen von asynchronen Bindungen.</span><span class="sxs-lookup"><span data-stu-id="79810-127">In addition to `let!`, you can use `use!` to perform asynchronous bindings.</span></span> <span data-ttu-id="79810-128">Der Unterschied zwischen `let!` und `use!` ist identisch mit den Unterschied zwischen `let` und `use`.</span><span class="sxs-lookup"><span data-stu-id="79810-128">The difference between `let!` and `use!` is the same as the difference between `let` and `use`.</span></span> <span data-ttu-id="79810-129">Für `use!`, das Objekt wird zum Abschluss des aktuellen Gültigkeitsbereichs verworfen.</span><span class="sxs-lookup"><span data-stu-id="79810-129">For `use!`, the object is disposed of at the close of the current scope.</span></span> <span data-ttu-id="79810-130">Beachten Sie, dass in der aktuellen Version von der Programmiersprache f# `use!` lässt sich nicht auf einen Wert auf null initialisiert werden, obwohl `use` verfügt.</span><span class="sxs-lookup"><span data-stu-id="79810-130">Note that in the current release of the F# language, `use!` does not allow a value to be initialized to null, even though `use` does.</span></span>

## <a name="asynchronous-primitives"></a><span data-ttu-id="79810-131">Asynchrone primitiven</span><span class="sxs-lookup"><span data-stu-id="79810-131">Asynchronous Primitives</span></span>

<span data-ttu-id="79810-132">Eine Methode, die eine einzelne asynchrone Aufgabe ausführt, und gibt das Ergebnis aufgerufen, ein *asynchrone Primitive*, und diese dienen insbesondere für die Verwendung mit `let!`.</span><span class="sxs-lookup"><span data-stu-id="79810-132">A method that performs a single asynchronous task and returns the result is called an *asynchronous primitive*, and these are designed specifically for use with `let!`.</span></span> <span data-ttu-id="79810-133">Mehrere asynchrone primitiven sind in der f#-Kernbibliothek definiert.</span><span class="sxs-lookup"><span data-stu-id="79810-133">Several asynchronous primitives are defined in the F# core library.</span></span> <span data-ttu-id="79810-134">Sind zwei solche Methoden für Webanwendungen im Modul definierten [ `Microsoft.FSharp.Control.WebExtensions` ](https://msdn.microsoft.com/library/95ef17bc-ee3f-44ba-8a11-c90fcf4cf003): [ `WebRequest.AsyncGetResponse` ](https://msdn.microsoft.com/library/09a60c31-e6e2-4b5c-ad23-92a86e50060c) und [ `WebClient.AsyncDownloadString` ](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a).</span><span class="sxs-lookup"><span data-stu-id="79810-134">Two such methods for Web applications are defined in the module [`Microsoft.FSharp.Control.WebExtensions`](https://msdn.microsoft.com/library/95ef17bc-ee3f-44ba-8a11-c90fcf4cf003): [`WebRequest.AsyncGetResponse`](https://msdn.microsoft.com/library/09a60c31-e6e2-4b5c-ad23-92a86e50060c) and [`WebClient.AsyncDownloadString`](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a).</span></span> <span data-ttu-id="79810-135">Beide primitive Herunterladen von Daten von einer Webseite, eine URL angegeben.</span><span class="sxs-lookup"><span data-stu-id="79810-135">Both primitives download data from a Web page, given a URL.</span></span> <span data-ttu-id="79810-136">`AsyncGetResponse` erzeugt eine `System.Net.WebResponse` -Objekt, und `AsyncDownloadString` erzeugt eine Zeichenfolge, die HTML für eine Webseite darstellt.</span><span class="sxs-lookup"><span data-stu-id="79810-136">`AsyncGetResponse` produces a `System.Net.WebResponse` object, and `AsyncDownloadString` produces a string that represents the HTML for a Web page.</span></span>

<span data-ttu-id="79810-137">Mehrere primitiven für asynchrone e/a-Vorgänge sind in enthalten die [ `Microsoft.FSharp.Control.CommonExtensions` ](https://msdn.microsoft.com/library/2edb67cb-6814-4a30-849f-b6dbdd042396) Modul.</span><span class="sxs-lookup"><span data-stu-id="79810-137">Several primitives for asynchronous I/O operations are included in the [`Microsoft.FSharp.Control.CommonExtensions`](https://msdn.microsoft.com/library/2edb67cb-6814-4a30-849f-b6dbdd042396) module.</span></span> <span data-ttu-id="79810-138">Diese Erweiterungsmethoden für die `System.IO.Stream` -Klasse sind [ `Stream.AsyncRead` ](https://msdn.microsoft.com/library/85698aaa-bdda-47e6-abed-3730f59fda5e) und [ `Stream.AsyncWrite` ](https://msdn.microsoft.com/library/1b0a2751-e42a-47e1-bd27-020224adc618).</span><span class="sxs-lookup"><span data-stu-id="79810-138">These extension methods of the `System.IO.Stream` class are [`Stream.AsyncRead`](https://msdn.microsoft.com/library/85698aaa-bdda-47e6-abed-3730f59fda5e) and [`Stream.AsyncWrite`](https://msdn.microsoft.com/library/1b0a2751-e42a-47e1-bd27-020224adc618).</span></span>

<span data-ttu-id="79810-139">Zusätzliche asynchrone primitiven stehen in der [f# PowerTools](https://fsprojects.github.io/VisualFSharpPowerTools/).</span><span class="sxs-lookup"><span data-stu-id="79810-139">Additional asynchronous primitives are available in the [F# PowerTools](https://fsprojects.github.io/VisualFSharpPowerTools/).</span></span> <span data-ttu-id="79810-140">Sie können auch eine eigene asynchronen primitiven schreiben, durch die Definition einer Funktion, deren vollständiger Text in einer Async-Block eingeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="79810-140">You can also write your own asynchronous primitives by defining a function whose complete body is enclosed in an async block.</span></span>

<span data-ttu-id="79810-141">Asynchrone Methoden in .NET Framework, die entwickelt wurden für anderen asynchronen Modellen mit dem asynchronen F#-Programmiermodell verwenden möchten, erstellen Sie eine Funktion, ein F#-zurückgibt `Async` Objekt.</span><span class="sxs-lookup"><span data-stu-id="79810-141">To use asynchronous methods in the .NET Framework that are designed for other asynchronous models with the F# asynchronous programming model, you create a function that returns an F# `Async` object.</span></span> <span data-ttu-id="79810-142">F#-Bibliothek verfügt über Funktionen, die Dies erleichtert, vornehmen.</span><span class="sxs-lookup"><span data-stu-id="79810-142">The F# library has functions that make this easy to do.</span></span>

<span data-ttu-id="79810-143">Hier ist ein Beispiel zur Verwendung des asynchronen Workflows enthalten. Es gibt noch viele andere in der Dokumentation für die Methoden der der [Async-Klasse](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7).</span><span class="sxs-lookup"><span data-stu-id="79810-143">One example of using asynchronous workflows is included here; there are many others in the documentation for the methods of the [Async class](https://msdn.microsoft.com/library/03eb4d12-a01a-4565-a077-5e83f17cf6f7).</span></span>

<span data-ttu-id="79810-144">Dieses Beispiel zeigt, wie Sie asynchrone Workflows verwenden, um Berechnungen parallel auszuführen.</span><span class="sxs-lookup"><span data-stu-id="79810-144">This example shows how to use asynchronous workflows to perform computations in parallel.</span></span>

<span data-ttu-id="79810-145">Im folgenden Codebeispiel wird eine Funktion `fetchAsync` ruft der HTML-Text aus einer webanforderung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="79810-145">In the following code example, a function `fetchAsync` gets the HTML text returned from a Web request.</span></span> <span data-ttu-id="79810-146">Die `fetchAsync` Funktion enthält einen asynchronen Codeblock.</span><span class="sxs-lookup"><span data-stu-id="79810-146">The `fetchAsync` function contains an asynchronous block of code.</span></span> <span data-ttu-id="79810-147">Wenn eine Bindung setzt auf das Ergebnis eines asynchronen primitiven in diesem Fall [ `AsyncDownloadString` ](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a)ermöglichen!</span><span class="sxs-lookup"><span data-stu-id="79810-147">When a binding is made to the result of an asynchronous primitive, in this case [`AsyncDownloadString`](https://msdn.microsoft.com/library/8a85a9b7-f712-4cac-a0ce-0a797f8ea32a), let!</span></span> <span data-ttu-id="79810-148">wird anstelle der Let verwendet.</span><span class="sxs-lookup"><span data-stu-id="79810-148">is used instead of let.</span></span>

<span data-ttu-id="79810-149">Verwenden Sie die Funktion [ `Async.RunSynchronously` ](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b) ein asynchroner Vorgang ausgeführt und das Ergebnis gewartet.</span><span class="sxs-lookup"><span data-stu-id="79810-149">You use the function [`Async.RunSynchronously`](https://msdn.microsoft.com/library/0a6663a9-50f2-4d38-8bf3-cefd1a51fd6b) to execute an asynchronous operation and wait for its result.</span></span> <span data-ttu-id="79810-150">Beispielsweise können Sie mehrere asynchrone Vorgänge parallel ausgeführt, mit der [ `Async.Parallel` ](https://msdn.microsoft.com/library/aa9b0355-2d55-4858-b943-cbe428de9dc4) -Funktion zusammen mit der `Async.RunSynchronously` Funktion.</span><span class="sxs-lookup"><span data-stu-id="79810-150">As an example, you can execute multiple asynchronous operations in parallel by using the [`Async.Parallel`](https://msdn.microsoft.com/library/aa9b0355-2d55-4858-b943-cbe428de9dc4) function together with the `Async.RunSynchronously` function.</span></span> <span data-ttu-id="79810-151">Die `Async.Parallel` Funktion akzeptiert eine Liste von der `Async` Objekte, richtet den Code für die einzelnen `Async` Aufgabenobjekt auszuführende Parallel aus, und gibt ein `Async` Objekt, das die parallele Berechnung darstellt.</span><span class="sxs-lookup"><span data-stu-id="79810-151">The `Async.Parallel` function takes a list of the `Async` objects, sets up the code for each `Async` task object to run in parallel, and returns an `Async` object that represents the parallel computation.</span></span> <span data-ttu-id="79810-152">So wie für einen einzelnen Vorgang, rufen Sie `Async.RunSynchronously` auf die Ausführung zu starten.</span><span class="sxs-lookup"><span data-stu-id="79810-152">Just as for a single operation, you call `Async.RunSynchronously` to start the execution.</span></span>

<span data-ttu-id="79810-153">Die `runAll` -Funktion startet drei asynchrone Workflows parallel und wartet, bis alle abgeschlossen wurden.</span><span class="sxs-lookup"><span data-stu-id="79810-153">The `runAll` function launches three asynchronous workflows in parallel and waits until they have all completed.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet8003.fs)]

## <a name="see-also"></a><span data-ttu-id="79810-154">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="79810-154">See Also</span></span>

[<span data-ttu-id="79810-155">F#-Sprachreferenz</span><span class="sxs-lookup"><span data-stu-id="79810-155">F# Language Reference</span></span>](index.md)

[<span data-ttu-id="79810-156">Berechnungsausdrücke</span><span class="sxs-lookup"><span data-stu-id="79810-156">Computation Expressions</span></span>](computation-expressions.md)

[<span data-ttu-id="79810-157">Control.Async-Klasse</span><span class="sxs-lookup"><span data-stu-id="79810-157">Control.Async Class</span></span>](https://msdn.microsoft.com/visualfsharpdocs/conceptual/control.async-class-%5bfsharp%5d)
