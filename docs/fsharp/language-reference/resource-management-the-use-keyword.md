---
title: 'Ressourcenverwaltung: Das use-Schlüsselwort (F#)'
description: Informationen Sie zu F#-Schlüsselwort "Use" und die 'using'-Funktion, die die Initialisierung und Freigabe von Ressourcen steuern kann.
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: dotnet-fsharp
ms.devlang: fsharp
ms.openlocfilehash: 0e134bf5b302911324dd224316941fee693b787b
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/28/2018
---
# <a name="resource-management-the-use-keyword"></a><span data-ttu-id="631e4-103">Ressourcenverwaltung: Das use-Schlüsselwort</span><span class="sxs-lookup"><span data-stu-id="631e4-103">Resource Management: The use Keyword</span></span>

<span data-ttu-id="631e4-104">In diesem Thema wird beschrieben, das Schlüsselwort `use` und die `using` -Funktion, die die Initialisierung und Freigabe von Ressourcen steuern kann.</span><span class="sxs-lookup"><span data-stu-id="631e4-104">This topic describes the keyword `use` and the `using` function, which can control the initialization and release of resources.</span></span>

## <a name="resources"></a><span data-ttu-id="631e4-105">Ressourcen</span><span class="sxs-lookup"><span data-stu-id="631e4-105">Resources</span></span>
<span data-ttu-id="631e4-106">Der Begriff *Ressource* auf mehr als eine Art verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="631e4-106">The term *resource* is used in more than one way.</span></span> <span data-ttu-id="631e4-107">Ja, Ressourcen Daten, die eine Anwendung z. B. Zeichenfolgen, Grafiken und ähnliche, aber in diesem Kontext verwendet werden können *Ressourcen* bezieht sich auf Software oder Betriebssystem-Ressourcen, z. B. Grafiken Gerätekontexte, Dateihandles, Netzwerk und Datenbank-Verbindungen, Parallelitätsobjekten z. B. Wait-Handles und So weiter.</span><span class="sxs-lookup"><span data-stu-id="631e4-107">Yes, resources can be data that an application uses, such as strings, graphics, and the like, but in this context, *resources* refers to software or operating system resources, such as graphics device contexts, file handles, network and database connections, concurrency objects such as wait handles, and so on.</span></span> <span data-ttu-id="631e4-108">Die Verwendung dieser Ressourcen durch Anwendungen umfasst die Übernahme von der Ressource mit dem das Betriebssystem oder anderen Ressourcenanbieter, gefolgt von die höhere Version der Ressource an den Pool, sodass es für eine andere Anwendung bereitgestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="631e4-108">The use of these resources by applications involves the acquisition of the resource from the operating system or other resource provider, followed by the later release of the resource to the pool so that it can be provided to another application.</span></span> <span data-ttu-id="631e4-109">Probleme auftreten, wenn Anwendungen nicht die Ressourcen für den gemeinsamen Pool wieder freigeben.</span><span class="sxs-lookup"><span data-stu-id="631e4-109">Problems occur when applications do not release resources back to the common pool.</span></span>

## <a name="managing-resources"></a><span data-ttu-id="631e4-110">Verwalten von Ressourcen</span><span class="sxs-lookup"><span data-stu-id="631e4-110">Managing Resources</span></span>
<span data-ttu-id="631e4-111">Zum Verwalten von effizient und bittet Ressourcen in einer Anwendung, müssen Sie sofort und in einer vorhersagbaren Weise Ressourcen freigeben.</span><span class="sxs-lookup"><span data-stu-id="631e4-111">To efficiently and responsibly manage resources in an application, you must release resources promptly and in a predictable manner.</span></span> <span data-ttu-id="631e4-112">.NET Framework können Sie dies tun, indem Sie die Bereitstellung der `System.IDisposable` Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="631e4-112">The .NET Framework helps you do this by providing the `System.IDisposable` interface.</span></span> <span data-ttu-id="631e4-113">Ein Typ, der implementiert `System.IDisposable` hat die `System.IDisposable.Dispose` -Methode, die Ressourcen korrekt freigegeben.</span><span class="sxs-lookup"><span data-stu-id="631e4-113">A type that implements `System.IDisposable` has the `System.IDisposable.Dispose` method, which correctly frees resources.</span></span> <span data-ttu-id="631e4-114">Gut geschriebene Anwendungen sicherstellen, dass `System.IDisposable.Dispose` wird sofort aufgerufen, wenn jedes Objekt, das eine eingeschränkte Ressource ist nicht mehr benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="631e4-114">Well-written applications guarantee that `System.IDisposable.Dispose` is called promptly when any object that holds a limited resource is no longer needed.</span></span> <span data-ttu-id="631e4-115">Glücklicherweise unterstützen die meisten zur Vereinfachung und f# stellt keine Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="631e4-115">Fortunately, most .NET languages provide support to make this easier, and F# is no exception.</span></span> <span data-ttu-id="631e4-116">Es gibt zwei hilfreiche Sprachkonstrukte, die das Dispose-Muster unterstützen: die `use` Bindung und die `using` Funktion.</span><span class="sxs-lookup"><span data-stu-id="631e4-116">There are two useful language constructs that support the dispose pattern: the `use` binding and the `using` function.</span></span>

## <a name="use-binding"></a><span data-ttu-id="631e4-117">Verwenden der Bindung</span><span class="sxs-lookup"><span data-stu-id="631e4-117">use Binding</span></span>
<span data-ttu-id="631e4-118">Die `use` -Schlüsselwort hat ein Formular, das der ähnelt der `let` Bindung:</span><span class="sxs-lookup"><span data-stu-id="631e4-118">The `use` keyword has a form that resembles that of the `let` binding:</span></span>

<span data-ttu-id="631e4-119">Verwenden Sie *Wert* = *Ausdruck*</span><span class="sxs-lookup"><span data-stu-id="631e4-119">use *value* = *expression*</span></span>

<span data-ttu-id="631e4-120">Es bietet die gleiche Funktionalität wie ein `let` binden, jedoch Fügt einen Aufruf von `Dispose` auf den Wert, wenn der Wert den Gültigkeitsbereich verlässt.</span><span class="sxs-lookup"><span data-stu-id="631e4-120">It provides the same functionality as a `let` binding but adds a call to `Dispose` on the value when the value goes out of scope.</span></span> <span data-ttu-id="631e4-121">Beachten Sie, dass der Compiler Fügt eine null-Prüfung auf den Wert aus, damit, auch wenn der Wert ist `null`, den Aufruf von `Dispose` wird nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="631e4-121">Note that the compiler inserts a null check on the value, so that if the value is `null`, the call to `Dispose` is not attempted.</span></span>

<span data-ttu-id="631e4-122">Im folgende Beispiel wird gezeigt, wie eine Datei automatisch geschlossen werden mithilfe der `use` Schlüsselwort.</span><span class="sxs-lookup"><span data-stu-id="631e4-122">The following example shows how to close a file automatically by using the `use` keyword.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6301.fs)]

>[!NOTE]
<span data-ttu-id="631e4-123">Können Sie `use` im Berechnungsausdrücke, in diesem Fall, dass eine angepasste Version von den `use` Ausdruck verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="631e4-123">You can use `use` in computation expressions, in which case a customized version of the `use` expression is used.</span></span> <span data-ttu-id="631e4-124">Weitere Informationen finden Sie unter [Sequenzen](sequences.md), [asynchrone Workflows](asynchronous-workflows.md), und [Berechnungsausdrücke](computation-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="631e4-124">For more information, see [Sequences](sequences.md), [Asynchronous Workflows](asynchronous-workflows.md), and [Computation Expressions](computation-expressions.md).</span></span>


## <a name="using-function"></a><span data-ttu-id="631e4-125">Mithilfe der Funktion</span><span class="sxs-lookup"><span data-stu-id="631e4-125">using Function</span></span>
<span data-ttu-id="631e4-126">Die `using` Funktion weist folgende Form:</span><span class="sxs-lookup"><span data-stu-id="631e4-126">The `using` function has the following form:</span></span>

<span data-ttu-id="631e4-127">`using` (*expression1*) *-Funktion oder Lambda*</span><span class="sxs-lookup"><span data-stu-id="631e4-127">`using` (*expression1*) *function-or-lambda*</span></span>

<span data-ttu-id="631e4-128">In einem `using` Ausdruck *expression1* erstellt das Objekt, das freigegeben werden muss.</span><span class="sxs-lookup"><span data-stu-id="631e4-128">In a `using` expression, *expression1* creates the object that must be disposed.</span></span> <span data-ttu-id="631e4-129">Das Ergebnis des *expression1* (das Objekt, das freigegeben werden muss), wird ein Argument *Wert*in *-Funktion oder Lambda*, dies ist entweder eine Funktion, die ein einzelnes erwartet von erzeugten verbleibende Argument des Typs, der den Wert entspricht *expression1*, oder einen Lambda-Ausdruck, der ein Argument dieses Typs erwartet.</span><span class="sxs-lookup"><span data-stu-id="631e4-129">The result of *expression1* (the object that must be disposed) becomes an argument, *value*, to *function-or-lambda*, which is either a function that expects a single remaining argument of a type that matches the value produced by *expression1*, or a lambda expression that expects an argument of that type.</span></span> <span data-ttu-id="631e4-130">Am Ende der Ausführung der Funktion ruft die Runtime `Dispose` und die Ressourcen freigegeben werden (es sei denn, der Wert ist `null`, in diesem Fall der Aufruf von Dispose nicht versucht wird).</span><span class="sxs-lookup"><span data-stu-id="631e4-130">At the end of the execution of the function, the runtime calls `Dispose` and frees the resources (unless the value is `null`, in which case the call to Dispose is not attempted).</span></span>

<span data-ttu-id="631e4-131">Das folgende Beispiel veranschaulicht die `using` Ausdruck mit einem Lambdaausdruck.</span><span class="sxs-lookup"><span data-stu-id="631e4-131">The following example demonstrates the `using` expression with a lambda expression.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6302.fs)]

<span data-ttu-id="631e4-132">Das folgende Beispiel zeigt die `using` Ausdruck mit einer Funktion.</span><span class="sxs-lookup"><span data-stu-id="631e4-132">The next example shows the `using` expression with a function.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6303.fs)]

<span data-ttu-id="631e4-133">Beachten Sie, dass die Funktion eine Funktion handeln, die bereits einige Argumente angewendet wurde.</span><span class="sxs-lookup"><span data-stu-id="631e4-133">Note that the function could be a function that has some arguments applied already.</span></span> <span data-ttu-id="631e4-134">Dies wird im folgenden Codebeispiel veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="631e4-134">The following code example demonstrates this.</span></span> <span data-ttu-id="631e4-135">Erstellt eine Datei mit der Zeichenfolge `XYZ`.</span><span class="sxs-lookup"><span data-stu-id="631e4-135">It creates a file that contains the string `XYZ`.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6304.fs)]

<span data-ttu-id="631e4-136">Die `using` Funktion und die `use` Bindung sind nahezu äquivalente Verfahren, um dasselbe Ziel erreichen.</span><span class="sxs-lookup"><span data-stu-id="631e4-136">The `using` function and the `use` binding are nearly equivalent ways to accomplish the same thing.</span></span> <span data-ttu-id="631e4-137">Die `using` Schlüsselwort bietet mehr Kontrolle darüber, wann `Dispose` aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="631e4-137">The `using` keyword provides more control over when `Dispose` is called.</span></span> <span data-ttu-id="631e4-138">Bei Verwendung von `using`, `Dispose` wird am Ende der Funktion oder einen Lambda-Ausdruck aufgerufen, wenn Sie mithilfe der `use` Schlüsselwort `Dispose` am Ende des enthaltenden Codeblocks aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="631e4-138">When you use `using`, `Dispose` is called at the end of the function or lambda expression; when you use the `use` keyword, `Dispose` is called at the end of the containing code block.</span></span> <span data-ttu-id="631e4-139">Im Allgemeinen sollten gewünscht verwenden `use` statt der `using` Funktion.</span><span class="sxs-lookup"><span data-stu-id="631e4-139">In general, you should prefer to use `use` instead of the `using` function.</span></span>


## <a name="see-also"></a><span data-ttu-id="631e4-140">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="631e4-140">See Also</span></span>
[<span data-ttu-id="631e4-141">F#-Sprachreferenz</span><span class="sxs-lookup"><span data-stu-id="631e4-141">F# Language Reference</span></span>](index.md)
